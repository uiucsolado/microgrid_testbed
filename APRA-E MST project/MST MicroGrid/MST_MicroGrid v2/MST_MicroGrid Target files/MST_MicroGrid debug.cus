<ui_settings>
    <version>2.5</version>
    <model_locked>False</model_locked>
    <canvas_bg_color>#ffffff</canvas_bg_color>
    <initialization_code><![CDATA[# NOTE: Variables and functions defined here will be
# available for use in all Macro and Expression scripts.
# This code is always executed prior simulation start.

# HIL Control Panel API

'''
import sys 
sys.path.append("C:\Program Files\Typhoon HIL Control Center 2020.1 sp2\python3_portable\Lib\site-packages\pysunspec")
sys.path.append("C:\Program Files\Typhoon HIL Control Center 2020.1 sp2\python3_portable\Lib\site-packages\pyModbusTCP")

import sunspec
####### add to global 
import sunspec.core.client as client

import typhoon.api.modbus as modbus

# create instance of the Modbus TCP client
# in case any arguments are invalid ValueError exception will be raised
try:
   modbus_client = modbus.TCPModbusClient(host="192.168.0.250",
                                       port=502,
                                       auto_open=True)
except ValueError:
   print("Invalid arguments...")

#from pymodbus.client.sync import ModbusTcpClient

import time

ess_server = client.SunSpecClientDevice(client.TCP, 1, ipaddr='192.168.0.250')
pv_server = client.SunSpecClientDevice(client.TCP, 1, ipaddr='192.168.0.251')
#Set to control source 0=CAN 1=Modbus
ess_server.epc.CtlSrc = 1
ess_server.epc.write()
#Set to control source 0=CAN 1=Modbus
pv_server.epc.CtlSrc = 1
pv_server.epc.write()
soft_relay_clients = []
for r in range(42):
    #soft_relay_clients.append(ModbusTcpClient('192.168.10.%s' % str(101 + r)))
    soft_relay_clients.append(modbus.TCPModbusClient('192.168.10.%s' % str(101 + r)))

dms_disconect = 'DMS_ENGINE.Disconnect'
dms_reconect = 'DMS_ENGINE.Reconnect'
dms_exp_req = 'DMS_ENGINE.Export Request'
dms_exp_val = 'DMS_ENGINE.Export Value'
dms_import_req = 'DMS_ENGINE.Import Request'
dms_import_val = 'DMS_ENGINE.Import Value'
dms_pf_req = 'DMS_ENGINE.PF Request'
dms_pf_val = 'DMS_ENGINE.PF Value'
dms_var_req = 'DMS_ENGINE.VAR Request'
dms_var_val = 'DMS_ENGINE.VAR Value'
dms_dr_req = 'DMS_ENGINE.DR Request'
dms_dr_val = 'DMS_ENGINE.DR Value'
dms_blc_start_en = 'DMS_ENGINE.Black Start Enable'
dms_mcgrid_ctrl_start = 'DMS_ENGINE.MicorGrid Controler Start'
dms_req_to_sync = 'DMS_ENGINE.Request To Sync To POI'
dms_bs_en = 'DMS_ENGINE.BS Enabled'

fault_106 = '3ph Fault 106.S1'
fault_204 = '3ph Fault 204.S1'
fault_208 = '3ph Fault 208.S1'

motor_F1 ='F1_Motor.CB.S1'
motor_F3 = 'F3_Motor.CB.S1'


time_in_sec = 0
dms_enable = False
loop_time = 30*60
dms_cmds = [     #dms reg      ,val, time in s
                
               # [ dms_exp_req, 1000, 5.5*60],
              #  [ dms_exp_req, 0, 7*60],

               # [ dms_exp_req, 4000, 7.5*60],
               # [ dms_exp_req, 0, 9*60],

                #[ dms_import_val, 8000, 17.5*60],
                #[ dms_import_val, 0, 18.5*60],

               #[ dms_pf_req, 0.5, 6.5*60],
                #[ dms_pf_req, 1, 9*60],

                #[ dms_disconect, 1, 9*60],
                #[ dms_disconect, 0, 17*60],

                #[ dms_req_to_sync, 1, 5*60],
                #[ dms_req_to_sync, 0, 9*60],

                #[ dms_req_to_sync, 1, 17*60],
                #[ dms_req_to_sync, 0, 20*60],

                #[ dms_mcgrid_ctrl_start, 1, 3*60],

                #[ dms_bs_en, 1, 3*60],
                

                #DMS DISCONNECT (includes POI DISCONNECT REQUEST)
                #==============
                [ dms_disconect, 1, 2*60], #disconnect F1
                [ dms_disconect, 3, 2*60+1], #disconnect F3. Not possible to disconnect both in one command?
                [ dms_disconect, 0, 2*60+10], #set dms disconnect in to normal state (0)
                
                [ dms_disconect, 1, 9*60], #disconnect F1
                [ dms_disconect, 3, 9*60+1], #disconnect F3
                [ dms_disconect, 0, 9*60+10], #set dms disconnect in to normal state (0)                
                
                [ dms_disconect, 1, 20*60], #disconnect F1
                [ dms_disconect, 3, 20*60+1], #disconnect F3
                [ dms_disconect, 0, 20*60+10], #set dms disconnect in to normal state (0)                

                
                #MOTORS
                #======
                [ motor_F3, True, 4*60], #Connect Motor F3
                [ motor_F3, False, 5.5*60], #Disconnect Motor F3
                
                [ motor_F3, True, 12*60], #Connect Motor F3
                [ motor_F3, False, 13*60], #Disconnect Motor F3
                
                [ motor_F1, True, 10*60], #Connect Motor F1
                [ motor_F1, False, 11*60], #Disconnect Motor F1
                
                [ motor_F1, True, 18*60], #Connect Motor F1
                [ motor_F1, False, 19*60], #Disconnect Motor F1
                
                #FAULTS
                #======
                [ fault_106, True, 14*60],
                [ fault_106, False, 14*60+1],
                
                [ fault_204, True, 22.2*60],
                [ fault_204, False, 22.2*60+1],
                
                [ fault_208, True, 26*60],
                [ fault_208, False, 26*60+1],

                #REQUEST TO SYNC
                #================
                [ dms_req_to_sync, 5, 5*60], #Request sync for all feeders
                [ dms_req_to_sync, 0, 5*60+10], #Set the reqest to sync back to quiescent state
                
                [ dms_req_to_sync, 5, 17*60], #Request sync for all feeders
                [ dms_req_to_sync, 0, 17*60+10], #Set the reqest to sync back to quiescent state
                
                #POWER IMPORT (negative value means EXPORT)
                #===========================================

                #[ dms_import_req, 1, 5.5*60], 
                [ dms_import_val, -1000, 5.5*60],
                [ dms_import_val, 0, 7*60],

                [ dms_import_val, -4000, 7.5*60],
                [ dms_import_val, 0, 9*60],

                [ dms_import_val, 8000, 17.5*60],
                [ dms_import_val, 0, 18.5*60],
                
                
                #POWER FACTOR (in thousands)
                #===========================
                #[ dms_pf_req, 1, 0*60], 
                [ dms_pf_val, 1000, 0*60], #request power factor of 1

                #[ dms_pf_req, 1, 6.5*60],
                [ dms_pf_val, 500, 6.5*60], #request power factor of 0.5
                
                #[ dms_pf_req, 1, 9*60],
                [ dms_pf_val, 1000, 9*60], #request power factor of 1
    
            ]
            
# PV profile
ir_profile_running = False
irradiance_array = [944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 944.0, 945.74, 945.04, 946.32, 945.66, 946.97, 946.34, 947.69, 947.08, 948.46, 947.89, 949.3, 948.76, 950.2, 949.69, 951.16, 950.68, 952.17, 951.71, 953.24, 952.81, 954.36, 953.91, 955.45, 955.02, 956.6, 956.19, 957.79, 957.4, 959.02, 958.66, 960.3, 959.96, 961.62, 961.3, 962.99, 962.69, 964.39, 964.11, 965.84, 965.58, 967.33, 967.08, 968.85, 968.62, 970.41, 970.2, 972.01, 971.81, 973.64, 973.46, 975.31, 975.14, 977.0, 976.85, 978.73, 978.6, 980.49, 980.36, 982.28, 982.17, 984.09, 983.97, 985.89, 985.77, 987.7, 987.6, 989.54, 989.45, 991.4, 991.32, 993.29, 993.2, 995.18, 995.11, 997.1, 997.03, 999.03, 998.96, 1001.0, 1000.9, 1002.9, 1002.8, 1004.9, 1004.8, 1006.8, 1006.7, 1008.8, 1008.7, 1010.7, 1010.6, 1012.6, 1012.5, 1014.5, 1014.4, 1016.4, 1016.3, 1018.3, 1018.1, 1020.1, 1019.9, 1021.8, 1021.6, 1023.5, 1023.2, 1025.1, 1024.8, 1026.6, 1026.3, 1028.0, 1027.7, 1029.4, 1029.0, 1030.7, 1030.2, 1031.8, 1031.3, 1032.9, 1032.3, 1033.9, 1033.2, 1034.7, 1034.0, 1035.3, 1034.6, 1035.9, 1035.0, 1036.2, 1035.3, 1036.4, 1035.4, 1036.4, 1035.3, 1036.2, 1035.0, 1035.8, 1034.5, 1035.2, 1033.7, 1034.3, 1032.7, 1033.1, 1031.4, 1031.6, 1029.7, 1029.9, 1027.9, 1027.8, 1025.6, 1025.5, 1023.1, 1022.8, 1020.3, 1019.8, 1017.1, 1016.4, 1013.6, 1012.7, 1009.7, 1008.7, 1005.5, 1004.2, 1000.9, 999.41, 995.84, 994.19, 990.42, 988.56, 984.6, 982.52, 978.35, 976.06, 971.68, 969.16, 964.58, 961.83, 957.04, 954.06, 949.05, 945.84, 940.62, 937.18, 931.7, 927.97, 922.27, 918.32, 912.4, 908.21, 902.08, 897.66, 891.31, 886.66, 880.1, 875.22, 868.46, 863.35, 856.39, 851.05, 843.89, 838.34, 830.99, 825.22, 817.68, 811.7, 803.99, 797.81, 789.92, 783.54, 775.49, 768.92, 760.72, 753.97, 745.62, 738.7, 730.2, 723.12, 714.51, 707.27, 698.53, 691.16, 682.33, 674.82, 665.85, 658.17, 649.11, 641.34, 632.22, 624.35, 615.18, 607.24, 598.03, 590.02, 580.79, 572.74, 563.5, 555.42, 546.19, 538.09, 528.89, 520.8, 511.63, 503.56, 494.45, 486.41, 477.38, 469.39, 460.45, 452.52, 443.69, 435.85, 427.14, 419.4, 410.84, 403.21, 394.8, 387.32, 379.08, 371.74, 363.69, 356.52, 348.68, 341.69, 334.02, 327.19, 319.74, 313.14, 305.95, 299.56, 292.64, 286.5, 279.86, 273.98, 267.62, 262.03, 255.97, 250.67, 244.93, 239.93, 234.52, 229.83, 224.76, 220.39, 215.67, 211.65, 207.28, 203.6, 199.6, 196.28, 192.66, 189.7, 186.45, 183.87, 181.01, 178.8, 176.33, 174.5, 172.42, 170.98, 169.3, 168.25, 166.98, 166.31, 165.4, 165.1, 164.57, 164.68, 164.55, 165.05, 165.32, 166.21, 166.87, 168.16, 169.21, 170.89, 172.32, 174.39, 176.2, 178.65, 180.84, 183.66, 186.21, 189.41, 192.31, 195.87, 199.12, 203.04, 206.63, 210.88, 214.8, 219.39, 223.62, 228.54, 233.08, 238.31, 243.13, 248.66, 253.76, 259.58, 264.93, 271.03, 276.64, 282.99, 288.8, 295.36, 301.37, 308.18, 314.4, 321.41, 327.82, 335.04, 341.62, 349.02, 355.75, 363.33, 370.2, 377.94, 384.93, 392.8, 399.9, 407.9, 415.08, 423.19, 430.45, 438.65, 445.97, 454.24, 461.59, 469.93, 477.31, 485.69, 493.07, 501.48, 508.86, 517.28, 524.63, 533.05, 540.36, 548.76, 556.01, 564.38, 571.58, 579.89, 586.96, 595.17, 602.13, 610.28, 617.14, 625.19, 631.92, 639.89, 646.49, 654.34, 660.8, 668.53, 674.84, 682.44, 688.58, 696.04, 702.01, 709.32, 715.11, 722.26, 727.86, 734.84, 740.25, 747.05, 752.25, 758.87, 763.87, 770.3, 775.07, 781.31, 785.86, 791.89, 796.22, 802.04, 806.14, 811.75, 815.61, 821.0, 824.64, 829.8, 833.15, 838.04, 841.14, 845.82, 848.68, 853.12, 855.73, 859.95, 862.32, 866.31, 868.44, 872.19, 874.08, 877.6, 879.25, 882.54, 883.94, 887.01, 888.18, 891.01, 891.94, 894.55, 895.25, 897.63, 898.1, 900.26, 900.49, 902.43, 902.44, 904.16, 903.95, 905.45, 905.02, 906.31, 905.66, 906.74, 905.88, 906.75, 905.69, 906.34, 905.05, 905.47, 903.96, 904.19, 902.5, 902.53, 900.65, 900.49, 898.43, 898.09, 895.84, 895.32, 892.9, 892.2, 889.61, 888.75, 886.0, 884.97, 882.06, 880.87, 877.81, 876.46, 873.25, 871.75, 868.41, 866.77, 863.29, 861.5, 857.9, 855.98, 852.25, 850.2, 846.36, 844.18, 840.23, 837.94, 833.88, 831.48, 827.33, 824.82, 820.55, 817.91, 813.55, 810.82, 806.39, 803.57, 799.07, 796.18, 791.62, 788.65, 784.03, 781.0, 776.33, 773.24, 768.54, 765.4, 760.67, 757.48, 752.73, 749.51, 744.74, 741.5, 736.72, 733.46, 728.68, 725.42, 720.65, 717.38, 712.63, 709.37, 704.65, 701.4, 696.71, 693.49, 688.85, 685.66, 681.06, 677.92, 673.39, 670.3, 665.82, 662.77, 658.36, 655.38, 651.07, 648.17, 643.95, 641.13, 637.02, 634.3, 630.3, 627.68, 623.81, 621.31, 617.56, 615.18, 611.57, 609.32, 605.86, 603.75, 600.44, 598.48, 595.33, 593.53, 590.55, 588.91, 586.1, 584.63, 582.01, 580.72, 578.28, 577.18, 574.93, 574.02, 571.97, 571.25, 569.41, 568.89, 567.26, 566.94, 565.51, 565.4, 564.18, 564.28, 563.28, 563.6, 562.81, 563.35, 562.79, 563.56, 563.22, 564.2, 564.09, 565.3, 565.41, 566.84, 567.17, 568.84, 569.38, 571.27, 572.04, 574.14, 575.13, 577.45, 578.64, 581.19, 582.59, 585.34, 586.94, 589.9, 591.7, 594.86, 596.84, 600.2, 602.36, 605.91, 608.25, 611.97, 614.48, 618.37, 621.02, 625.06, 627.85, 632.05, 634.97, 639.31, 642.36, 646.84, 650.0, 654.6, 657.87, 662.57, 665.93, 670.73, 674.17, 679.06, 682.56, 687.52, 691.07, 696.08, 699.67, 704.73, 708.34, 713.43, 717.05, 722.16, 725.77, 730.88, 734.47, 739.56, 743.12, 748.18, 751.68, 756.7, 760.14, 765.09, 768.45, 773.33, 776.59, 781.38, 784.51, 789.17, 792.17, 796.72, 799.58, 803.99, 806.69, 810.96, 813.5, 817.61, 819.97, 823.9, 826.08, 829.82, 831.79, 835.34, 837.1, 840.44, 841.97, 845.09, 846.39, 849.27, 850.33, 852.97, 853.78, 856.17, 856.71, 858.84, 859.12, 860.98, 860.99, 862.57, 862.3, 863.6, 863.04, 864.06, 863.21, 863.94, 862.8, 863.23, 861.76, 861.86, 860.1, 859.9, 857.84, 857.35, 854.99, 854.2, 851.55, 850.45, 847.51, 846.12, 842.89, 841.21, 837.7, 835.72, 831.93, 829.67, 825.61, 823.06, 818.73, 815.91, 811.33, 808.24, 803.4, 800.05, 794.98, 791.37, 786.06, 782.22, 776.68, 772.6, 766.86, 762.55, 756.61, 752.08, 745.95, 741.22, 734.91, 729.99, 723.5, 718.38, 711.72, 706.44, 699.65, 694.21, 687.3, 681.72, 674.7, 668.99, 661.87, 656.05, 648.84, 642.92, 635.65, 629.64, 622.32, 616.24, 608.87, 602.74, 595.35, 589.17, 581.76, 575.55, 568.15, 561.93, 554.54, 548.31, 540.95, 534.73, 527.42, 521.22, 513.96, 507.8, 500.6, 494.49, 487.37, 481.32, 474.29, 468.3, 461.36, 455.44, 448.6, 442.78, 436.07, 430.34, 423.76, 418.14, 411.7, 406.21, 399.91, 394.55, 388.41, 383.18, 377.2, 372.11, 366.31, 361.37, 355.74, 350.96, 345.5, 340.88, 335.61, 331.16, 326.07, 321.79, 316.89, 312.78, 308.08, 304.14, 299.63, 295.87, 291.56, 287.97, 283.85, 280.45, 276.52, 273.3, 269.56, 266.51, 262.95, 260.06, 256.69, 253.98, 250.79, 248.25, 245.25, 242.88, 240.06, 237.86, 235.22, 233.18, 230.71, 228.83, 226.52, 224.8, 222.66, 221.09, 219.1, 217.67, 215.84, 214.55, 212.86, 211.7, 210.15, 209.12, 207.7, 206.8, 205.5, 204.71, 203.53, 202.85, 201.77, 201.19, 200.23, 199.74, 198.86, 198.47, 197.68, 197.36, 196.64, 196.38, 195.72, 195.53, 194.95, 194.81, 194.29, 194.2, 193.73, 193.69, 193.27, 193.27, 192.88, 192.92, 192.56, 192.63, 192.3, 192.38, 192.08, 192.18, 191.88, 191.99, 191.71, 191.82, 191.54, 191.65, 191.37, 191.48, 191.19, 191.28, 190.98, 191.06, 190.75, 190.81, 190.47, 190.51, 190.15, 190.17, 189.78, 189.76, 189.33, 189.26, 188.78, 188.68, 188.18, 188.04, 187.5, 187.32, 186.74, 186.52, 185.9, 185.64, 184.99, 184.69, 183.99, 183.65, 182.91, 182.53, 181.75, 181.32, 180.51, 180.04, 179.18, 178.67, 177.77, 177.21, 176.28, 175.68, 174.71, 174.07, 173.06, 172.38, 171.34, 170.62, 169.54, 168.79, 167.67, 166.89, 165.75, 164.92, 163.72, 162.84, 161.61, 160.7, 159.45, 158.51, 157.24, 156.27, 154.98, 153.99, 152.68, 151.67, 150.34, 149.31, 147.97, 146.92, 145.57, 144.51, 143.15, 142.07, 140.71, 139.62, 138.25, 137.16, 135.79, 134.7, 133.32, 132.22, 130.85, 129.75, 128.39, 127.29, 125.93, 124.83, 123.48, 122.39, 121.05, 119.96, 118.64, 117.56, 116.22, 115.12, 113.79, 112.71, 111.4, 110.34, 109.05, 107.99, 106.73, 105.69, 104.45, 103.43, 102.21, 101.22, 100.02, 99.051, 97.884, 96.938, 95.799, 94.879, 93.771, 92.878, 91.801, 90.936, 89.892, 89.057, 88.048, 87.243, 86.268, 85.496, 84.557, 83.817, 82.914, 82.209, 81.344, 80.673, 79.844, 79.21, 78.426, 77.824, 77.06, 76.477, 75.749, 75.21, 74.526, 74.024, 73.381, 72.921, 72.323, 71.905, 71.35, 70.976, 70.467, 70.136, 69.674, 69.389, 68.973, 68.735, 68.367, 68.176, 67.857, 67.714, 67.445, 67.351, 67.132, 67.088, 66.92, 66.927, 66.81, 66.869, 66.804, 66.916, 66.903, 67.069, 67.11, 67.329, 67.423, 67.697, 67.847, 68.174, 68.37, 68.745, 68.993, 69.427, 69.732, 70.221, 70.581, 71.129, 71.546, 72.152, 72.625, 73.29, 73.819, 74.543, 75.13, 75.913, 76.556, 77.4, 78.099, 79.003, 79.759, 80.722, 81.534, 82.557, 83.425, 84.507, 85.431, 86.572, 87.55, 88.751, 89.783, 91.041, 92.127, 93.443, 94.581, 95.953, 97.141, 98.57, 99.811, 101.29, 102.57, 104.1, 105.43, 107.01, 108.38, 110.01, 111.43, 113.11, 114.57, 116.3, 117.8, 119.57, 121.11, 122.93, 124.51, 126.37, 127.98, 129.88, 131.52, 133.46, 135.13, 137.1, 138.8, 140.81, 142.53, 144.57, 146.32, 148.38, 150.14, 152.23, 154.01, 156.12, 157.91, 160.03, 161.83, 163.98, 165.78, 167.93, 169.74, 171.9, 173.7, 175.85, 177.65, 179.81, 181.59, 183.75, 185.52, 187.67, 189.42, 191.56, 193.3, 195.43, 197.15, 199.26, 200.95, 203.04, 204.7, 206.77, 208.4, 210.44, 212.03, 214.04, 215.59, 217.57, 219.08, 221.01, 222.48, 224.37, 225.79, 227.64, 229.01, 230.81, 232.12, 233.87, 235.13, 236.82, 238.02, 239.66, 240.79, 242.37, 243.43, 244.93, 245.92, 247.37, 248.29, 249.67, 250.51, 251.83, 252.6, 253.84, 254.54, 255.71, 256.34, 257.44, 257.99, 259.01, 259.48, 260.44, 260.83, 261.71, 262.03, 262.83, 263.07, 263.79, 263.95, 264.6, 264.69, 265.26, 265.27, 265.77, 265.7, 266.12, 265.97, 266.32, 266.1, 266.38, 266.08, 266.28, 265.92, 266.05, 265.6, 265.65, 265.14, 265.12, 264.54, 264.46, 263.81, 263.67, 262.96, 262.75, 261.98, 261.72, 260.89, 260.57, 259.69, 259.32, 258.39, 257.96, 256.98, 256.51, 255.48, 254.96, 253.9, 253.34, 252.24, 251.63, 250.5, 249.86, 248.69, 248.02, 246.82, 246.12, 244.9, 244.18, 242.94, 242.19, 240.93, 240.16, 238.89, 238.1, 236.82, 236.01, 234.72, 233.91, 232.61, 231.79, 230.49, 229.67, 228.37, 227.55, 226.26, 225.45, 224.17, 223.36, 222.09, 221.29, 220.04, 219.25, 218.02, 217.25, 216.03, 215.28, 214.09, 213.36, 212.19, 211.49, 210.35, 209.67, 208.56, 207.91, 206.83, 206.21, 205.17, 204.57, 203.57, 203.01, 202.04, 201.52, 200.59, 200.1, 199.2, 198.75, 197.89, 197.47, 196.65, 196.27, 195.5, 195.16, 194.43, 194.14, 193.45, 193.2, 192.55, 192.34, 191.74, 191.58, 191.02, 190.9, 190.39, 190.75, 191.06, 190.98, 191.28, 191.19, 191.48, 191.37, 191.65, 191.54, 191.82, 191.71, 191.99, 191.88, 192.18, 192.08, 192.38, 192.3, 192.63, 192.56, 192.92, 192.88, 193.27, 193.27, 193.69, 193.73, 194.2, 194.29, 194.81, 194.95, 195.53, 195.72, 196.38, 196.64, 197.36, 197.68, 198.47, 198.86, 199.74, 200.23, 201.19, 201.77, 202.85, 203.53, 204.71, 205.5, 206.8, 207.7, 209.12, 210.15, 211.7, 212.86, 214.55, 215.84, 217.67, 219.1, 221.09, 222.66, 224.8, 226.52, 228.83, 230.71, 233.18, 235.22, 237.86, 240.06, 242.88, 245.25, 248.25, 250.79, 253.98, 256.69, 260.06, 262.95, 266.51, 269.56, 273.3, 276.52, 280.45, 283.85, 287.97, 291.56, 295.87, 299.63, 304.14, 308.08, 312.78, 316.89, 321.79, 326.07, 331.16, 335.61, 340.88, 345.5, 350.96, 355.74, 361.37, 366.31, 372.11, 377.2, 383.18, 388.41, 394.55, 399.91, 406.21, 411.7, 418.14, 423.76, 430.34, 436.07, 442.78, 448.6, 455.44, 461.36, 468.3, 474.29, 481.32, 487.37, 494.49, 500.6, 507.8, 513.96, 521.22, 527.42, 534.73, 540.95, 548.31, 554.54, 561.93, 568.15, 575.55, 581.76, 589.17, 595.35, 602.74, 608.87, 616.24, 622.32, 629.64, 635.65, 642.92, 648.84, 656.05, 661.87, 668.99, 674.7, 681.72, 687.3, 694.21, 699.65, 706.44, 711.72, 718.38, 723.5, 729.99, 734.91, 741.22, 745.95, 752.08, 756.61, 762.55, 766.86, 772.6, 776.68, 782.22, 786.06, 791.37, 794.98, 800.05, 803.4, 808.24, 811.33, 815.91, 818.73, 823.06, 825.61, 829.67, 831.93, 835.72, 837.7, 841.21, 842.89, 846.12, 847.51, 850.45, 851.55, 854.2, 854.99, 857.35, 857.84, 859.9, 860.1, 861.86, 861.76, 863.23, 862.8, 863.94, 863.21, 864.06, 863.04, 863.6, 862.3, 862.57, 860.99, 860.98, 859.12, 858.84, 856.71, 856.17, 853.78, 852.97, 850.33, 849.27, 846.39, 845.09, 841.97, 840.44, 837.1, 835.34, 831.79, 829.82, 826.08, 823.9, 819.97, 817.61, 813.5, 810.96, 806.69, 803.99, 799.58, 796.72, 792.17, 789.17, 784.51, 781.38, 776.59, 773.33, 768.45, 765.09, 760.14, 756.7, 751.68, 748.18, 743.12, 739.56, 734.47, 730.88, 725.77, 722.16, 717.05, 713.43, 708.34, 704.73, 699.67, 696.08, 691.07, 687.52, 682.56, 679.06, 674.17, 670.73, 665.93, 662.57, 657.87, 654.6, 650.0, 646.84, 642.36, 639.31, 634.97, 632.05, 627.85, 625.06, 621.02, 618.37, 614.48, 611.97, 608.25, 605.91, 602.36, 600.2, 596.84, 594.86, 591.7, 589.9, 586.94, 585.34, 582.59, 581.19, 578.64, 577.45, 575.13, 574.14, 572.04, 571.27, 569.38, 568.84, 567.17, 566.84, 565.41, 565.3]

#irradiance_array = [100.0, 944.0]
''']]></initialization_code>
    <components>
        <component_data>
                <id>a71a66deedf311e6a46d4c34882a0abb</id>
                <name><![CDATA[GRID-Connected]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[PCC.S1_fb]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1560.0</x>
                    <y>1032.0</y>
                    <width>156</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>33d4bdd1ee0b11e6b3104c34882a0abb</id>
                <name><![CDATA[Battery Storage]]></name>
                <type>Group</type>
                <description><![CDATA[None]]></description>
                <components_ids><![CDATA[['5e96f061ee0b11e684dc4c34882a0abb', 'b60fab6eee0b11e6978f4c34882a0abb', '550614c0f23111e6af68dc4a3e45580c', 'f49a7670f25e11e6b7a3dc4a3e45580c', '9090e51ef27111e6a769dc4a3e45580c', '69a4419ac1fa11eabf860050b621b179', '69a4419bc1fa11ea811d0050b621b179', '6f1765c0c1fb11eaa6c40050b621b179', 'ee5d9514d4ee11ea930b0050b621b179', 'a9ef0362d4f011eaa25d0050b621b179']]]></components_ids>
                <hierarchy_position>1</hierarchy_position>
                <canvas_bg_color>#ffffff</canvas_bg_color>
                <initialization_code><![CDATA[# NOTE: Variables and functions defined here will be
# available for use in all Macro and Expression scripts of the components owned by this widget.
# This code is always executed prior simulation start.
# HIL API is imported as 'hil'

]]></initialization_code>
                <widget_settings>
                    <x>1000.0</x>
                    <y>1160.0</y>
                    <width>700</width>
                    <height>800</height>
                    <appearance><![CDATA[Flat]]></appearance>
                    <collapsed>False</collapsed>
                </widget_settings>
            </component_data>
        <component_data>
                <id>4f867840f14c11e69ae24c348851fa7b</id>
                <name><![CDATA[ V grid]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('Vrms_grid')

]]></code>
                <signal_name><![CDATA[Vrms_grid]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1872.0</x>
                    <y>1088.0</y>
                    <width>128</width>
                    <height>56</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>6edafa1abbec11ea91650050b621b179</id>
                <name><![CDATA[Vrms_ess]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[Vrms_ess]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1344.0</x>
                    <y>1288.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>eae6ff08bbfa11ea858a0050b621b179</id>
                <name><![CDATA[freq]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal(name = 'ESS1.Controller.f1')

]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[Hz]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>2032.0</x>
                    <y>1088.0</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>1b1f059abed511eaace30050b621b179</id>
                <name><![CDATA[Capture/Scope]]></name>
                <type>Capture/Scope</type>
                <description><![CDATA[]]></description>
                <hierarchy_position>1</hierarchy_position>
                <working_mode>windowed</working_mode>
                <widget_settings>
                    <x>1376.0</x>
                    <y>1024.0</y>
                    <width>120</width>
                    <height>120</height>
                    <appearance><![CDATA[Flat]]></appearance>
                    <state>Scope</state>
                    <layout>None</layout>
                    <presets>
                        <active_capture_preset>Default</active_capture_preset>
                        <active_scope_preset>Default</active_scope_preset>
                        <capture name="Default">
                            <time_interval>0.01</time_interval>
                            <sample_rate>250000</sample_rate>
                            <background_color>white</background_color>
                            <layout>Vertical</layout>
                            <legend>True</legend>
                            <analog_signals>
                            </analog_signals>
                            <digital_signals>
                            </digital_signals>
                            <trigger>
                                <device>-1</device>
                                <is_force>False</is_force>
                                <type>Analog</type>
                                <source>None</source>
                                <edge>Rising edge</edge>
                                <treshold>0.0</treshold>
                                <offset>0.0</offset>
                                <useFirstTrigger>False</useFirstTrigger>
                            </trigger>
                            <plotting_options in_use="False">
                                <subplots>
                                    </subplots>
                            </plotting_options>
                        </capture>
                        <scope name="Default">
                            <background_color>white</background_color>
                            <layout>Grid</layout>
                            <legend>True</legend>
                            <show_viewports>4</show_viewports>
                            <decimation>1</decimation>
                            <time_base>0.001</time_base>
                            <analog_signals>
                            </analog_signals>
                            <digital_signals>
                            </digital_signals>
                            <trigger>
                                <device>-1</device>
                                <is_force>False</is_force>
                                <type>Analog</type>
                                <source>None</source>
                                <edge>Rising edge</edge>
                                <treshold>0.0</treshold>
                                <offset>50.0</offset>
                                <useFirstTrigger>False</useFirstTrigger>
                            </trigger>
                        </scope>
                        </presets>
                    <capture>
                        <time_interval>0.01</time_interval>
                        <sample_rate>250000</sample_rate>
                        <background_color>white</background_color>
                        <layout>Vertical</layout>
                        <legend>True</legend>
                        <trigger>
                            <type>Analog</type>
                            <source>None</source>
                            <edge>Rising edge</edge>
                            <treshold>0.0</treshold>
                            <offset>0.0</offset>
                            <useFirstTrigger>False</useFirstTrigger>
                        </trigger>

                        <analog_signals>
                            </analog_signals>

                         <digital_signals>
                            </digital_signals>

                    </capture>

                    <scope>
                        <time_base>0.001 </time_base>
                        <background_color>white</background_color>
                        <layout>Grid</layout>
                        <legend>True</legend>
                        <trigger>
                            <mode>Auto</mode>
                            <type>Analog</type>
                            <source>None</source>
                            <edge>Rising edge</edge>
                            <treshold>0.0</treshold>
                            <offset>50.0</offset>
                        </trigger>

                         <analog_signals>
                            </analog_signals>

                        <digital_signals>
                            </digital_signals>

                    </scope>
                    <plotting_options in_use="False">
                    
                        <subplots>
                            </subplots>
                    </plotting_options>
                </widget_settings>

            </component_data>
        <component_data>
                <id>d7d9bd1cc1fc11eaa2290050b621b179</id>
                <name><![CDATA[PV plant]]></name>
                <type>Group</type>
                <description><![CDATA[None]]></description>
                <components_ids><![CDATA[['d7d9bd1dc1fc11ea9de80050b621b179', 'd7d9bd1ec1fc11ea928f0050b621b179', 'd7d9bd1fc1fc11ea92050050b621b179', 'd7d9bd20c1fc11ea9f620050b621b179', 'd7d9bd21c1fc11ea8b560050b621b179', 'd7d9bd31c1fc11ea80e90050b621b179', 'd7d9bd32c1fc11ea91800050b621b179', 'd7d9bd33c1fc11ea9d230050b621b179', 'ba17d346cf5f11ea94710050b621b179', '8bdb0176d27811ea9bcd0050b621b179']]]></components_ids>
                <hierarchy_position>1</hierarchy_position>
                <canvas_bg_color>#ffffff</canvas_bg_color>
                <initialization_code><![CDATA[# NOTE: Variables and functions defined here will be
# available for use in all Macro and Expression scripts of the components owned by this widget.
# This code is always executed prior simulation start.
# HIL API is imported as 'hil'

]]></initialization_code>
                <widget_settings>
                    <x>1728.0</x>
                    <y>1160.0</y>
                    <width>700</width>
                    <height>708</height>
                    <appearance><![CDATA[Flat]]></appearance>
                    <collapsed>False</collapsed>
                </widget_settings>
            </component_data>
        <component_data>
                <id>5e96f061ee0b11e684dc4c34882a0abb</id>
                <name><![CDATA[ESS Q]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
#Q = hil.read_analog_signal(name = 'ESS.Grid forming inverter (averaged).Controller.Q1')/1000.0
displayValue = hil.read_analog_signal(name = 'ESS1.Q1')/1000.0
]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kVAr]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>176.0</x>
                    <y>104.0</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>b60fab6eee0b11e6978f4c34882a0abb</id>
                <name><![CDATA[ESS STATUS]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[ESS1.S2_fb]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>16.0</x>
                    <y>8.0</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>550614c0f23111e6af68dc4a3e45580c</id>
                <name><![CDATA[ESS START]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed on button click.

# HIL Control Panel API


#stop, clear, run commands in UPS mode

hil.set_scada_input_value("ESS1.CONNECT", 1)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>152.0</x>
                    <y>8.0</y>
                    <width>160</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>f49a7670f25e11e6b7a3dc4a3e45580c</id>
                <name><![CDATA[ESS PQ]]></name>
                <type>TraceDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

import numpy as np
# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing values
# that will be displayed
# e.g displayValue = [ [sigVal1,sigVal2,sigVal3], ["Signal 1 name","Signal 2 name","Signal 3 name"] ]

#P = hil.read_analog_signal(name = 'ESS.Grid forming inverter (averaged).Controller.P1')/1000.0
#Q = hil.read_analog_signal(name = 'ESS.Grid forming inverter (averaged).Controller.Q1')/1000.0
P = hil.read_analog_signal(name = 'ESS1.P1')/1000.0
Q = hil.read_analog_signal(name = 'ESS1.Q1')/1000.0
displayValue = [ [P,Q], ['P [kW]','Q [kvar]'] ]

]]></code>
                <analog_signals><![CDATA[['P [kW]', 'Q [kvar]']]]></analog_signals>
                <digital_signals><![CDATA[[]]]></digital_signals>
                <streaming_analog_signals><![CDATA[[]]]></streaming_analog_signals>
                <streaming_digital_signals><![CDATA[[]]]></streaming_digital_signals>
                <update_rate>1000</update_rate>
                <execution_rate>None</execution_rate>
                <background_color>white</background_color>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>48.0</x>
                    <y>152.0</y>
                    <width>592</width>
                    <height>352</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <x_title><![CDATA[x axes]]></x_title>
                    <y_title><![CDATA[y axes]]></y_title>
                    <y_range_min>-1000.0</y_range_min>
                    <y_range_max>1100.0</y_range_max>
                    <time_window>60</time_window>
                    <auto_scale_enabled>True</auto_scale_enabled>
                    <legend_enabled>True</legend_enabled>
                    <x_axis_title_enabled>False</x_axis_title_enabled>
                    <y_axis_title_enabled>False</y_axis_title_enabled>
                    <use_reference_curve>False</use_reference_curve>
                    <reference_curve_code><![CDATA[# NOTE: Global namespace variables are available
# Selected time window is available through variable 'timeWindow'
# Selected update rate is available through variable 'updateRate'

# reference curve data point
curveData = 12.0

# specify curve options ('data' part is mandatory)
refCurveData1 = {
    # reference curve data point
    "data": curveData,

    # curve line style: 'solid', 'dashed', 'dashdot', 'dotted'
    "line_style": "dashed",

    # curve line color: 'red', 'green', 'blue', 'cyan', 'magenta', 'yellow'
    "line_color": 'red',

    # curve line width: float number
    "line_width": 2.0,
    
    # reference curve title
    "title": "Reference curve",

    # show a title in the legend
    "show_in_legend": True
}

# list of reference curves data: [ref1, ref2,...refN]
referenceCurves = [refCurveData1]

]]></reference_curve_code>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>9090e51ef27111e6a769dc4a3e45580c</id>
                <name><![CDATA[ESS P]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
#P = hil.read_analog_signal(name = 'ESS.Grid forming inverter (averaged).Controller.P1')/1000.0
displayValue = hil.read_analog_signal(name = 'ESS1.P')/1000.0

]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kW]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>24.0</x>
                    <y>104.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>69a4419ac1fa11eabf860050b621b179</id>
                <name><![CDATA[Qref]]></name>
                <type>TextBoxMacro</type>
                <description><![CDATA[None]]></description>
                <on_use_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

hil.set_scada_input_value("ESS1.Q_ref_ess", inputValue)]]></on_use_code>
                <on_start_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

ess_server.epc.CmdRealPwr = inputValue
ess_server.epc.write()
time.sleep(.5)
ess_server.epc.read()
print(ess_server.epc)]]></on_start_code>
                <on_stop_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_stop_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed periodically each 1000ms.
# NOTE: Only read functions are available from the HIL Control Panel API
# HIL Control Panel API



# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_timer_code>
                <on_start_code_source><![CDATA[Macro code]]></on_start_code_source>
                <inputValue><![CDATA[2.0]]></inputValue>
                <inputValueType>float</inputValueType>
                <unit><![CDATA[kVar]]></unit>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>184.0</x>
                    <y>56.0</y>
                    <width>150</width>
                    <height>40</height>
                    <inputWidgetWidth>80</inputWidgetWidth>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>69a4419bc1fa11ea811d0050b621b179</id>
                <name><![CDATA[Pref]]></name>
                <type>TextBoxMacro</type>
                <description><![CDATA[None]]></description>
                <on_use_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

hil.set_scada_input_value("ESS1.P_ref_ess", inputValue)]]></on_use_code>
                <on_start_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

ess_server.epc.CmdRealPwr = inputValue
ess_server.epc.write()
time.sleep(.5)
ess_server.epc.read()
print(ess_server.epc)]]></on_start_code>
                <on_stop_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_stop_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed periodically each 1000ms.
# NOTE: Only read functions are available from the HIL Control Panel API
# HIL Control Panel API



# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_timer_code>
                <on_start_code_source><![CDATA[Macro code]]></on_start_code_source>
                <inputValue><![CDATA[2.0]]></inputValue>
                <inputValueType>float</inputValueType>
                <unit><![CDATA[kW]]></unit>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>16.0</x>
                    <y>56.0</y>
                    <width>150</width>
                    <height>40</height>
                    <inputWidgetWidth>80</inputWidgetWidth>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>6f1765c0c1fb11eaa6c40050b621b179</id>
                <name><![CDATA[ESS STOP]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed on button click.

# HIL Control Panel API


#stop, clear, run commands in UPS mode

hil.set_scada_input_value("ESS1.CONNECT", 0)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>328.0</x>
                    <y>8.0</y>
                    <width>160</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd1dc1fc11ea9de80050b621b179</id>
                <name><![CDATA[PV Q]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kVAr]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>176.0</x>
                    <y>104.0</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd1ec1fc11ea928f0050b621b179</id>
                <name><![CDATA[PV STATUS]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[PV1.PV Plant.S1_fb]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>16.0</x>
                    <y>8.0</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd1fc1fc11ea92050050b621b179</id>
                <name><![CDATA[PV START]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed on button click.

# HIL Control Panel API


#stop, clear, run commands in UPS mode

hil.set_scada_input_value("PV.Grid following inverter (averaged).CONNECT", 1)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>152.0</x>
                    <y>8.0</y>
                    <width>160</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd20c1fc11ea9f620050b621b179</id>
                <name><![CDATA[PV PQ]]></name>
                <type>TraceDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

import numpy as np
# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing values
# that will be displayed
# e.g displayValue = [ [sigVal1,sigVal2,sigVal3], ["Signal 1 name","Signal 2 name","Signal 3 name"] ]

# P = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.P1')/1000.0
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
P = hil.read_analog_signal(name = 'PV1.P')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0

displayValue = [ [P,Q], ['P [kW]','Q [kvar]'] ]
# displayValue = [ [Q], ['Q [kvar]'] ]
]]></code>
                <analog_signals><![CDATA[['P [kW]', 'Q [kvar]']]]></analog_signals>
                <digital_signals><![CDATA[[]]]></digital_signals>
                <streaming_analog_signals><![CDATA[[]]]></streaming_analog_signals>
                <streaming_digital_signals><![CDATA[[]]]></streaming_digital_signals>
                <update_rate>1000</update_rate>
                <execution_rate>None</execution_rate>
                <background_color>white</background_color>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>24.0</x>
                    <y>152.0</y>
                    <width>592</width>
                    <height>352</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <x_title><![CDATA[x axes]]></x_title>
                    <y_title><![CDATA[y axes]]></y_title>
                    <y_range_min>-1000.0</y_range_min>
                    <y_range_max>1100.0</y_range_max>
                    <time_window>60</time_window>
                    <auto_scale_enabled>True</auto_scale_enabled>
                    <legend_enabled>True</legend_enabled>
                    <x_axis_title_enabled>False</x_axis_title_enabled>
                    <y_axis_title_enabled>False</y_axis_title_enabled>
                    <use_reference_curve>False</use_reference_curve>
                    <reference_curve_code><![CDATA[# NOTE: Global namespace variables are available
# Selected time window is available through variable 'timeWindow'
# Selected update rate is available through variable 'updateRate'

# reference curve data point
curveData = 12.0

# specify curve options ('data' part is mandatory)
refCurveData1 = {
    # reference curve data point
    "data": curveData,

    # curve line style: 'solid', 'dashed', 'dashdot', 'dotted'
    "line_style": "dashed",

    # curve line color: 'red', 'green', 'blue', 'cyan', 'magenta', 'yellow'
    "line_color": 'red',

    # curve line width: float number
    "line_width": 2.0,
    
    # reference curve title
    "title": "Reference curve",

    # show a title in the legend
    "show_in_legend": True
}

# list of reference curves data: [ref1, ref2,...refN]
referenceCurves = [refCurveData1]

]]></reference_curve_code>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd21c1fc11ea8b560050b621b179</id>
                <name><![CDATA[PV P]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
# P = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.P1')/1000.0
P = hil.read_analog_signal(name = 'PV1.P')/1000.0
displayValue = P

]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kW]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>24.0</x>
                    <y>104.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd31c1fc11ea80e90050b621b179</id>
                <name><![CDATA[Qref]]></name>
                <type>TextBoxMacro</type>
                <description><![CDATA[None]]></description>
                <on_use_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

hil.set_scada_input_value("PV1.Q_ref_pv", inputValue)]]></on_use_code>
                <on_start_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

ess_server.epc.CmdRealPwr = inputValue
ess_server.epc.write()
time.sleep(.5)
ess_server.epc.read()
print(ess_server.epc)]]></on_start_code>
                <on_stop_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_stop_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed periodically each 1000ms.
# NOTE: Only read functions are available from the HIL Control Panel API
# HIL Control Panel API



# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_timer_code>
                <on_start_code_source><![CDATA[Macro code]]></on_start_code_source>
                <inputValue><![CDATA[1.0]]></inputValue>
                <inputValueType>float</inputValueType>
                <unit><![CDATA[kVar]]></unit>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>248.0</x>
                    <y>56.0</y>
                    <width>150</width>
                    <height>40</height>
                    <inputWidgetWidth>80</inputWidgetWidth>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd32c1fc11ea91800050b621b179</id>
                <name><![CDATA[PV panel tilt angle]]></name>
                <type>TextBoxMacro</type>
                <description><![CDATA[None]]></description>
                <on_use_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

hil.set_scada_input_value("PV1.Solar irradiance.ang_t", inputValue)]]></on_use_code>
                <on_start_code active="True"><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API


# Function for printing text to console (e.g printf("Hello world"))

#------------------------------------------------

# NOTE: entered value is available through variable 'inputValue'

ess_server.epc.CmdRealPwr = inputValue
ess_server.epc.write()
time.sleep(.5)
ess_server.epc.read()
print(ess_server.epc)]]></on_start_code>
                <on_stop_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_stop_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed periodically each 1000ms.
# NOTE: Only read functions are available from the HIL Control Panel API
# HIL Control Panel API



# Change widget value by setting this variable.
# NOTE: If you not specify 'widgetValue' variable or assign 'None' to it, widget value won't be changed.
widgetValue = None
]]></on_timer_code>
                <on_start_code_source><![CDATA[Macro code]]></on_start_code_source>
                <inputValue><![CDATA[20.0]]></inputValue>
                <inputValueType>float</inputValueType>
                <unit><![CDATA[deg]]></unit>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>16.0</x>
                    <y>56.0</y>
                    <width>220</width>
                    <height>40</height>
                    <inputWidgetWidth>80</inputWidgetWidth>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d7d9bd33c1fc11ea9d230050b621b179</id>
                <name><![CDATA[PV STOP]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed on button click.

# HIL Control Panel API


#stop, clear, run commands in UPS mode

hil.set_scada_input_value("PV.Grid following inverter (averaged).CONNECT", 0)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>336.0</x>
                    <y>8.0</y>
                    <width>160</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>8d8b4b2ccd4511ea9fb90050b621b179</id>
                <name><![CDATA[P grid]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal(name = 'PCC.P')/1000.0

]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kW]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1560.0</x>
                    <y>1088.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>8fff0cb4cd4511ea82fa0050b621b179</id>
                <name><![CDATA[Q grid]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
displayValue = hil.read_analog_signal(name = 'PCC.Q')/1000.0
]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[kVAr]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1712.0</x>
                    <y>1088.0</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>eb066ba8ceab11eabd8b0050b621b179</id>
                <name><![CDATA[SOC]]></name>
                <type>TraceDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Signals</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

import numpy as np
# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing values
# that will be displayed
# e.g displayValue = [ [sigVal1,sigVal2,sigVal3], ["Signal 1 name","Signal 2 name","Signal 3 name"] ]

Vr = hil.read_analog_signal(name = 'ESS.Grid forming inverter (averaged).Controller.E_dREF1')

displayValue = [ [Vr], ['Vref [pu]'] ]

]]></code>
                <analog_signals><![CDATA[['ESS1.Battery.SOC']]]></analog_signals>
                <digital_signals><![CDATA[[]]]></digital_signals>
                <streaming_analog_signals><![CDATA[[]]]></streaming_analog_signals>
                <streaming_digital_signals><![CDATA[[]]]></streaming_digital_signals>
                <update_rate>250</update_rate>
                <execution_rate>None</execution_rate>
                <background_color>white</background_color>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1088.0</x>
                    <y>1688.0</y>
                    <width>520</width>
                    <height>264</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <x_title><![CDATA[x axes]]></x_title>
                    <y_title><![CDATA[y axes]]></y_title>
                    <y_range_min>-1000.0</y_range_min>
                    <y_range_max>1100.0</y_range_max>
                    <time_window>60</time_window>
                    <auto_scale_enabled>True</auto_scale_enabled>
                    <legend_enabled>True</legend_enabled>
                    <x_axis_title_enabled>False</x_axis_title_enabled>
                    <y_axis_title_enabled>False</y_axis_title_enabled>
                    <use_reference_curve>False</use_reference_curve>
                    <reference_curve_code><![CDATA[# NOTE: Global namespace variables are available
# Selected time window is available through variable 'timeWindow'
# Selected update rate is available through variable 'updateRate'

# reference curve data point
curveData = 12.0

# specify curve options ('data' part is mandatory)
refCurveData1 = {
    # reference curve data point
    "data": curveData,

    # curve line style: 'solid', 'dashed', 'dashdot', 'dotted'
    "line_style": "dashed",

    # curve line color: 'red', 'green', 'blue', 'cyan', 'magenta', 'yellow'
    "line_color": 'red',

    # curve line width: float number
    "line_width": 2.0,
    
    # reference curve title
    "title": "Reference curve",

    # show a title in the legend
    "show_in_legend": True
}

# list of reference curves data: [ref1, ref2,...refN]
referenceCurves = [refCurveData1]

]]></reference_curve_code>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>ba17d346cf5f11ea94710050b621b179</id>
                <name><![CDATA[PV SI]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Expression</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
displayValue = hil.read_analog_signal(name = 'PV1.SI')
]]></code>
                <signal_name><![CDATA[]]></signal_name>
                <unit><![CDATA[W/m2]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>520.0</x>
                    <y>104.0</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>8bdb0176d27811ea9bcd0050b621b179</id>
                <name><![CDATA[Vrms_pv]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[Vrms_pv]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>352</x>
                    <y>96</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>ff9384c8d4d811ea8c2e0050b621b179</id>
                <name><![CDATA[Vrms_ess]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[ESS1.VDC]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1208.0</x>
                    <y>1120.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>957ec652d4e011ea8a9e0050b621b179</id>
                <name><![CDATA[Xi_d_ref]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[ESS1.Controller.Outer Voltage Loop + Inner Current Loop.Xi_d_ref]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1040.0</x>
                    <y>1080.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>3eb81b46d4e111ea94f80050b621b179</id>
                <name><![CDATA[id_err]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[ESS1.Controller.Outer Voltage Loop + Inner Current Loop.inner current control loop.id_err]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1032.0</x>
                    <y>1016.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>6564aff8d4e111ea93c80050b621b179</id>
                <name><![CDATA[Ud]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[ESS1.Controller.Outer Voltage Loop + Inner Current Loop.Ud]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1176.0</x>
                    <y>1016.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>ab1801d4d4e111ea9d7d0050b621b179</id>
                <name><![CDATA[Uq]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
displayValue = hil.read_analog_signal('ESS.Grid forming inverter (averaged).Vrms_ess')

]]></code>
                <signal_name><![CDATA[ESS1.Controller.Outer Voltage Loop + Inner Current Loop.Uq]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1184.0</x>
                    <y>1064.0</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>d80b5046d4ee11eab8bd0050b621b179</id>
                <name><![CDATA[Grid-Connect]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[hil.set_scada_input_value("PCC.Grid_Connect", 1)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1752.0</x>
                    <y>1032.0</y>
                    <width>184</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>df977b2cd4ee11eaaa940050b621b179</id>
                <name><![CDATA[ISLAND]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[hil.set_scada_input_value("PCC.Grid_Connect", 0)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>1</hierarchy_position>
                <widget_settings>
                    <x>1968.0</x>
                    <y>1032.0</y>
                    <width>184</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>ee5d9514d4ee11ea930b0050b621b179</id>
                <name><![CDATA[Charge/Discharge]]></name>
                <type>Macro</type>
                <description><![CDATA[None]]></description>
                <on_click_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed on button click.

# HIL Control Panel API


#stop, clear, run commands in UPS mode

scada_input_settings = hil.get_scada_input_settings("ESS1.Battery.charge")
input_value = scada_input_settings["input_value"]

if input_value<1:
    hil.set_scada_input_value("ESS1.Battery.charge", 1)
else:
    hil.set_scada_input_value("ESS1.Battery.charge", 0)]]></on_click_code>
                <on_start_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on simulation start.
# NOTE: Variables specified here will be available in other two handlers
# HIL Control Panel API


]]></on_start_code>
                <on_timer_code active="False"><![CDATA[# NOTE: The code specified in this handler will be executed on timer event.

# HIL Control Panel API

]]></on_timer_code>
                <run_each>250</run_each>
                <on_stop_code active="True"><![CDATA[# NOTE: The code specified in this handler will be executed after simulation is stopped.
# HIL API is imported as 'hil'

]]></on_stop_code>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>520.0</x>
                    <y>8.0</y>
                    <width>160</width>
                    <height>40</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>a9ef0362d4f011eaa25d0050b621b179</id>
                <name><![CDATA[Charging]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[ESS1.Battery.Charging]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>520.0</x>
                    <y>48.0</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>cda9ac7ee22b11eaa65a0050b621b179</id>
                <name><![CDATA[EV charging station]]></name>
                <type>Group</type>
                <description><![CDATA[None]]></description>
                <components_ids><![CDATA[['06e34b8ce22c11eaa9990050b621b179', '06e34b8de22c11eabe180050b621b179', '99aba392e22c11eaa1fd0050b621b179', '1e0df21ce23011ea952f0050b621b179', 'd3022518e23111eabcf60050b621b179', 'f0b14d40e23111eab7c40050b621b179', '0b0866eee23211ea8ab40050b621b179', '7df97e4ce23211ea93e40050b621b179', '7a0f32e4e23511eabd840050b621b179', 'cc177226e23611eaa5880050b621b179', 'c3c1122ce23711eab55b0050b621b179', 'ae1417c0e23811ea880f0050b621b179', 'be611ebee23811eab5170050b621b179', 'ca7271d2e23811ea97da0050b621b179', '06774f2ce23a11ea85d20050b621b179', '8fe1d950e23c11ea87730050b621b179', 'fa197498e23e11eabe060050b621b179', 'd9d8d93ae24011eabfa80050b621b179']]]></components_ids>
                <hierarchy_position>1</hierarchy_position>
                <canvas_bg_color>#ffffff</canvas_bg_color>
                <initialization_code><![CDATA[# NOTE: Variables and functions defined here will be
# available for use in all Macro and Expression scripts of the components owned by this widget.
# This code is always executed prior simulation start.
# HIL API is imported as 'hil'

]]></initialization_code>
                <widget_settings>
                    <x>2456</x>
                    <y>1160</y>
                    <width>700</width>
                    <height>708</height>
                    <appearance><![CDATA[Flat]]></appearance>
                    <collapsed>False</collapsed>
                </widget_settings>
            </component_data>
        <component_data>
                <id>06e34b8ce22c11eaa9990050b621b179</id>
                <name><![CDATA[EV Q]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Charging_station_meter_split.Q_kVAr]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>192</x>
                    <y>96</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>06e34b8de22c11eabe180050b621b179</id>
                <name><![CDATA[EV P]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# that will be displayed
# P = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.P1')/1000.0
P = hil.read_analog_signal(name = 'PV1.P')/1000.0
displayValue = P

]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Charging_station_meter_split.P_kW]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>40</x>
                    <y>96</y>
                    <width>128</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>99aba392e22c11eaa1fd0050b621b179</id>
                <name><![CDATA[EV V]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Charging_station_meter_split.VLL_RMS]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>344</x>
                    <y>96</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>1e0df21ce23011ea952f0050b621b179</id>
                <name><![CDATA[EV STATUS]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.S1_fb]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>40</x>
                    <y>24</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>d3022518e23111eabcf60050b621b179</id>
                <name><![CDATA[phase lock]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.phase_lock]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>160</x>
                    <y>24</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>f0b14d40e23111eab7c40050b621b179</id>
                <name><![CDATA[on nominal]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.on_nominal]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>280</x>
                    <y>24</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>0b0866eee23211ea8ab40050b621b179</id>
                <name><![CDATA[live grid]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.live grid]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>400</x>
                    <y>24</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>7df97e4ce23211ea93e40050b621b179</id>
                <name><![CDATA[out of limit freq]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_grid.out of limit freq]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>512</x>
                    <y>24</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>7a0f32e4e23511eabd840050b621b179</id>
                <name><![CDATA[EV On]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control_Inputs.on]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>80</x>
                    <y>240</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>cc177226e23611eaa5880050b621b179</id>
                <name><![CDATA[Vmode]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Inv_Cab_SM.V_mode]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>272</x>
                    <y>288</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>c3c1122ce23711eab55b0050b621b179</id>
                <name><![CDATA[out of limit volt]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_grid.out of limit volts]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>512</x>
                    <y>64</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>ae1417c0e23811ea880f0050b621b179</id>
                <name><![CDATA[f_out_nom]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_nominal_conditions.f_out_nom]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>512</x>
                    <y>104</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>be611ebee23811eab5170050b621b179</id>
                <name><![CDATA[V_out_nom]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_nominal_conditions.V_out_nom]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>512</x>
                    <y>144</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>ca7271d2e23811ea97da0050b621b179</id>
                <name><![CDATA[reset]]></name>
                <type>LedDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Digital signal</data_type>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_nominal_conditions.reset]]></signal_name>
                <hil_device>1</hil_device>
                <led_color>Green</led_color>
                <code><![CDATA[#------------- MANDATORY IMPORTS ---------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#------------------------------------------------

# mandatory variable used for storing LED indicator state
# True -> On, False -> Off
displayValue = False
]]></code>
                <updateRate>1000</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>512</x>
                    <y>184</y>
                    <width>96</width>
                    <height>32</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
            </component_data>
        <component_data>
                <id>06774f2ce23a11ea85d20050b621b179</id>
                <name><![CDATA[EV Vdq]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Control.Synch.Check_nominal_conditions.Vt inv]]></signal_name>
                <unit><![CDATA[]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>344</x>
                    <y>160</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>8fe1d950e23c11ea87730050b621b179</id>
                <name><![CDATA[EV V]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.Vrms_ev]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>344</x>
                    <y>232</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>fa197498e23e11eabe060050b621b179</id>
                <name><![CDATA[EV Vdc]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.VDC]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>488</x>
                    <y>336</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        <component_data>
                <id>d9d8d93ae24011eabfa80050b621b179</id>
                <name><![CDATA[EV Vdc]]></name>
                <type>DigitalDisplay</type>
                <description><![CDATA[None]]></description>
                <data_type>Analog signal</data_type>
                <code><![CDATA[#----------------------- MANDATORY IMPORT --------------------------
# HIL Control Panel API

# NOTE: Only read functions are available from HIL Control Panel API
#-------------------------------------------------------------------

# mandatory variable used for storing value
# Q = hil.read_analog_signal(name = 'PV.Grid following inverter (averaged).Controller.Q1')/1000.0
Q = hil.read_analog_signal(name = 'PV1.Q')/1000.0
displayValue = Q
]]></code>
                <signal_name><![CDATA[EV charging st.Charging Station.Battery inverter.VDC]]></signal_name>
                <unit><![CDATA[V]]></unit>
                <automatic_unit>True</automatic_unit>
                <decimals><![CDATA[2]]></decimals>
                <updateRate>500</updateRate>
                <hierarchy_position>2</hierarchy_position>
                <widget_settings>
                    <x>312</x>
                    <y>440</y>
                    <width>136</width>
                    <height>48</height>
                    <appearance><![CDATA[Flat]]></appearance>
                </widget_settings>
                <advance_widget_settings>
                    <color_range>False</color_range>
                    <green_range>(0, 0, 0, 0)</green_range>
                    <orange_range>(0, 0, 0, 0)</orange_range>
                    <red_range>(0, 0, 0, 0)</red_range>
                </advance_widget_settings>
            </component_data>
        </components>
</ui_settings>