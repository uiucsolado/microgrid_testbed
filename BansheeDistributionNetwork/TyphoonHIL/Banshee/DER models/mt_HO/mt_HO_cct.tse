version = 4.2

//
// Saved by sw version: 2020.1 SP2
// Save timestamp: 29-Jun-2020 @ 06:16:37 PM
//

model "mt_ho_cct" {
    configuration {
        hil_device = "HIL603"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = 4e-6
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = True
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "medium"
    }

    component Subsystem Root {
        component Subsystem Microturbine {
            layout = dynamic
            component src_constant Constant1 {
                execution_rate = "Ts"
            }
            [
                position = 7896, 8112
                hide_name = True
            ]

            component sys_signal_switch "Signal switch1" {
                criterion = "ctrl != threshold"
                threshold = "1"
            }
            [
                position = 7976, 8224
                hide_name = True
                scale = 1, -1
            ]

            component src_constant Constant2 {
                execution_rate = "Ts"
                value = "w_0"
            }
            [
                position = 7896, 8240
                hide_name = True
            ]

            component gen_logic_op "Logical operator1" {
                operator = "NOT"
            }
            [
                position = 7504, 7928
                rotation = right
                hide_name = True
            ]

            component gen_digital_probe "MT_sync OFF" {
            }
            [
                position = 7576, 7960
            ]

            component gen_digital_probe "MT_sync ON" {
            }
            [
                position = 7576, 7840
            ]

            component src_scada_input MT_sync {
                execution_rate = "Ts"
                format = "int"
                max = "1"
                min = "0"
                signal_type = "int"
                unit = ""
            }
            [
                position = 7448, 7888
            ]

            component Subsystem "qd0(PU)" {
                layout = dynamic
                component gen_gain Gain1 {
                    gain = "pms"
                }
                [
                    position = 7664, 8400
                    hide_name = True
                ]

                component gen_probe E_qp_M {
                }
                [
                    position = 7648, 7920
                ]

                component gen_probe T_m_M {
                }
                [
                    position = 7696, 8480
                ]

                component gen_probe Phi_1d_a_M {
                }
                [
                    position = 7664, 8088
                ]

                component gen_probe Phi_2q_a_M {
                }
                [
                    position = 8744, 8096
                    scale = -1, 1
                ]

                component gen_probe E_F_M {
                }
                [
                    position = 8744, 8248
                    scale = -1, 1
                ]

                component gen_probe Phi_d_a_M {
                }
                [
                    position = 8160, 8016
                ]

                component gen_probe Phi_q_a_M {
                }
                [
                    position = 8248, 8016
                    scale = -1, 1
                ]

                component gen_probe E_dp_M {
                }
                [
                    position = 8744, 7952
                    scale = -1, 1
                ]

                component gen_probe w_m_M {
                }
                [
                    position = 7744, 8288
                ]

                component Subsystem Phi_1d_a {
                    layout = dynamic
                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_dp-X_ls"
                    }
                    [
                        position = 8024, 8224
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_dopp"
                    }
                    [
                        position = 8288, 8152
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8096, 8232
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8352, 8152
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+-"
                    }
                    [
                        position = 8208, 8152
                        hide_name = True
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8424, 8152
                    ]

                    port E_qp {
                        label = "E_qp"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8136, 8152
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8264
                    ]

                    junction Junction1 sp
                    [
                        position = 8392, 8152
                    ]

                    connect Constant1.out Product1.in as Connection26
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction1 as Connection31
                    connect Junction1 Phi_1d_a as Connection32
                    connect Product1.in1 I_d_a as Connection29
                    connect Product1.out Sum1.in2 as Connection27
                    connect Sum1.in1 E_qp as Connection30
                    connect Sum1.out Gain1.in as Connection25
                    connect Sum1.in Junction1 as Connection33
                    [
                        breakpoints = 8168, 8096; 8392, 8096
                    ]
                }
                [
                    position = 7528, 8136
                    size = 96, 64
                ]

                component Subsystem Phi_2q_a {
                    layout = dynamic
                    component gen_gain Gain1 {
                        gain = "1/T_qopp"
                    }
                    [
                        position = 8288, 8152
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8352, 8152
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "---"
                    }
                    [
                        position = 8208, 8152
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8096, 8232
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_qp-X_ls"
                    }
                    [
                        position = 8024, 8224
                        hide_name = True
                    ]

                    port E_dp {
                        label = "E_dp"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8136, 8152
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8424, 8152
                    ]

                    port I_q_a {
                        label = "I_q_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8264
                    ]

                    junction Junction1 sp
                    [
                        position = 8392, 8152
                    ]

                    connect Constant1.out Product1.in as Connection26
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction1 as Connection31
                    connect Junction1 Phi_2q_a as Connection32
                    connect Product1.in1 I_q_a as Connection29
                    connect Product1.out Sum1.in2 as Connection27
                    connect Sum1.in1 E_dp as Connection30
                    connect Sum1.out Gain1.in as Connection25
                    connect Sum1.in Junction1 as Connection33
                    [
                        breakpoints = 8168, 8096; 8392, 8096
                    ]
                }
                [
                    position = 8880, 8144
                    scale = -1, 1
                    size = 96, 64
                ]

                component Subsystem w_m {
                    layout = dynamic
                    component gen_product Product3 {
                    }
                    [
                        position = 8032, 8096
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8376, 8144
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8112, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain2 {
                        gain = "w_0/(2*H)"
                    }
                    [
                        position = 8312, 8144
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "+-"
                    }
                    [
                        position = 8112, 8144
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "pms/w_0"
                    }
                    [
                        position = 8032, 8248
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+--"
                    }
                    [
                        position = 8248, 8144
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "D_FW"
                    }
                    [
                        position = 7968, 8248
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8032, 8184
                        hide_name = True
                    ]

                    port w_m2 {
                        label = "w_m"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8448, 8144
                    ]

                    port T_M {
                        label = "T_M"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8112, 8056
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8040
                    ]

                    port I_q_a {
                        label = "I_q_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8096
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = left:5
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8144
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8192
                    ]

                    tag w_m1 {
                        value = "w_m"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7968, 8280
                        hide_name = True
                    ]

                    tag w_m {
                        value = "w_m"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8456, 8240
                        hide_name = True
                    ]

                    junction Junction1 sp
                    [
                        position = 8416, 8144
                    ]

                    connect Constant1.out Gain1.in as Connection1
                    connect Gain1.out Product1.in as Connection2
                    connect Gain2.out Integrator1.in as Connection8
                    connect Integrator1.out Junction1 as Connection16
                    connect Junction1 w_m2 as Connection17
                    connect Product1.out Sum2.in2 as Connection6
                    connect Product2.in1 I_d_a as Connection10
                    connect Product2.in Phi_q_a as Connection13
                    connect Product2.out Sum1.in1 as Connection3
                    connect Product3.in1 I_q_a as Connection14
                    connect Product3.in Phi_d_a as Connection11
                    connect Product3.out Sum1.in as Connection4
                    connect Sum1.out Sum2.in1 as Connection5
                    connect Sum2.out Gain2.in as Connection7
                    connect Sum2.in T_M as Connection15
                    [
                        breakpoints = 8208, 8128; 8208, 8056
                    ]
                    connect w_m Junction1 as Connection18
                    connect w_m1 Product1.in1 as Connection9
                }
                [
                    position = 7536, 8352
                    size = 160, 96
                ]

                component Subsystem E_qp {
                    layout = dynamic
                    component gen_product Product3 {
                    }
                    [
                        position = 8016, 8272
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_d-X_dp"
                    }
                    [
                        position = 8272, 8088
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8192, 8224
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "++-"
                    }
                    [
                        position = 8096, 8272
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_dp-X_dpp)/(X_dp-X_ls)**2"
                    }
                    [
                        position = 8096, 8200
                        hide_name = True
                    ]

                    component src_constant Constant3 {
                        execution_rate = "Ts"
                        value = "X_dp-X_ls"
                    }
                    [
                        position = 7936, 8248
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "--+"
                    }
                    [
                        position = 8448, 8112
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+-"
                    }
                    [
                        position = 8272, 8160
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8352, 8112
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8568, 8112
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_dop"
                    }
                    [
                        position = 8512, 8112
                        hide_name = True
                    ]

                    port E_qp3 {
                        label = "E_qp"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8632, 8112
                        hide_name = True
                    ]

                    port E_F {
                        label = "E_F"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8352, 8176
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7816, 8152
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8208
                    ]

                    tag E_qp1 {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8352, 8056
                        hide_name = True
                    ]

                    tag E_qp2 {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8016, 8328
                        hide_name = True
                        size = 60, 20
                    ]

                    tag E_qp {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8656, 8192
                        hide_name = True
                    ]

                    junction Junction2 sp
                    [
                        position = 7856, 8152
                    ]

                    junction Junction3 sp
                    [
                        position = 8600, 8112
                    ]

                    connect Constant1.out Product1.in as Connection3
                    connect Constant2.out Product2.in as Connection6
                    connect Constant3.out Product3.in as Connection19
                    connect E_qp Junction3 as Connection29
                    connect E_qp1 Sum1.in as Connection1
                    connect E_qp2 Sum3.in2 as Connection9
                    connect Gain1.in Sum1.out as Connection26
                    [
                        breakpoints = 8480, 8112
                    ]
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction3 as Connection27
                    connect Junction2 I_d_a as Connection21
                    connect Junction3 E_qp3 as Connection28
                    connect Product1.out Sum1.in1 as Connection2
                    connect Product2.out Sum2.in1 as Connection5
                    connect Product3.in1 Junction2 as Connection22
                    connect Product3.out Sum3.in1 as Connection8
                    connect Sum1.in2 E_F as Connection13
                    connect Sum2.in Junction2 as Connection20
                    connect Sum2.out Product1.in1 as Connection4
                    connect Sum3.in Phi_1d_a as Connection15
                    connect Sum3.out Product2.in1 as Connection7
                }
                [
                    position = 7520, 8000
                    size = 96, 88
                ]

                component Subsystem Governor {
                    layout = dynamic
                    component gen_gain Gain2 {
                        gain = "gov_Kp"
                    }
                    [
                        position = 8256, 8216
                        hide_name = True
                    ]

                    component gen_gain Gain3 {
                        gain = "K"
                    }
                    [
                        position = 8304, 8216
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "pms/w_0"
                    }
                    [
                        position = 8024, 8248
                        hide_name = True
                    ]

                    component gen_z_domain_transfer "Discrete Transfer Function2" {
                        a_coeff = "[T5*T6, (T5+T6), 1]"
                        b_coeff = "[T4, 1]"
                        domain = "S-domain"
                        method = "Bilinear"
                    }
                    [
                        position = 8352, 8216
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8416, 8216
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "+-"
                    }
                    [
                        position = 8128, 8216
                        hide_name = True
                    ]

                    component gen_z_domain_transfer "Discrete Transfer Function1" {
                        a_coeff = "[T1*T2, T1, 1]"
                        b_coeff = "[T3, 1]"
                        domain = "S-domain"
                        method = "Bilinear"
                    }
                    [
                        position = 8200, 8216
                        hide_name = True
                    ]

                    component gen_gain Gain4 {
                        gain = "1/w_0"
                    }
                    [
                        position = 7784, 8200
                        hide_name = True
                    ]

                    component gen_rate_limiter "Rate Limiter1" {
                        falling_limit = "inner_w_fall"
                        rising_limit = "inner_w_rise"
                    }
                    [
                        position = 7848, 8200
                        hide_name = True
                    ]

                    component gen_sum Sum6 {
                        signs = "++"
                    }
                    [
                        position = 7920, 8208
                        hide_name = True
                    ]

                    component Subsystem "Exciter Activation" {
                        layout = dynamic
                        component gen_abs Abs1 {
                        }
                        [
                            position = 8192, 8208
                            hide_name = True
                        ]

                        component gen_comparator Comparator1 {
                        }
                        [
                            position = 8264, 8232
                            hide_name = True
                            scale = 1, -1
                        ]

                        component src_constant Constant1 {
                            execution_rate = "Ts"
                            value = "4*max_slip"
                        }
                        [
                            position = 8192, 8256
                            hide_name = True
                        ]

                        component gen_probe Exc_state {
                        }
                        [
                            position = 8480, 8232
                        ]

                        component gen_probe "speed difference" {
                        }
                        [
                            position = 8096, 8144
                        ]

                        component gen_c_function "Activate Exciter" {
                            in_terminal_dimensions = "inherit"
                            in_terminal_dimensions_str = "boolean inherit"
                            in_terminal_labels = "[(\'boolean\', True)]"
                            in_terminal_properties = "inherit boolean;"
                            init_fnc = "/*Begin code section*/
Activate = 0;
/*End code section*/"
                            no_feed_inputs = "[\'\']"
                            no_feed_outputs = "[\'\']"
                            out_terminal_dimensions = "inherit"
                            out_terminal_dimensions_str = "Activate inherit"
                            out_terminal_labels = "[(\'Activate\', True)]"
                            out_terminal_properties = "int Activate;"
                            output_fnc = "/*Begin code section*/
if(boolean==1){
    Activate = 1;
}
/*End code section*/"
                        }
                        [
                            position = 8360, 8232
                            size = 112, 48
                        ]

                        component gen_sum Sum1 {
                            signs = "+-"
                        }
                        [
                            position = 8008, 8144
                            hide_name = True
                        ]

                        component src_constant Constant2 {
                            execution_rate = "Ts"
                        }
                        [
                            position = 7936, 8120
                            hide_name = True
                        ]

                        port w_PU {
                            label = "w_PU"
                            position = left:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7936, 8168
                        ]

                        tag V_t4 {
                            value = "exc_state"
                            scope = masked_subsystem
                            kind = sp
                            direction = in
                        }
                        [
                            position = 8480, 8176
                            hide_name = True
                        ]

                        junction Junction14 sp
                        [
                            position = 8048, 8144
                        ]

                        junction Junction15 sp
                        [
                            position = 8432, 8232
                        ]

                        connect Abs1.out Comparator1.in2 as Connection105
                        connect Constant1.out Comparator1.in1 as Connection18
                        connect w_PU Sum1.in1 as Connection199
                        connect "speed difference.in" Junction14 as Connection195
                        connect Junction14 Sum1.out as Connection196
                        connect Abs1.in Junction14 as Connection197
                        connect Constant2.out Sum1.in as Connection201
                        connect Exc_state.in Junction15 as Connection203
                        connect Junction15 "Activate Exciter.Activate" as Connection204
                        [
                            breakpoints = 8440, 8232; 8440, 8232
                        ]
                        connect V_t4 Junction15 as Connection205
                        connect Comparator1.out "Activate Exciter.boolean" as Connection206
                    }
                    [
                        position = 8128, 8272
                        size = 88, 48
                    ]

                    port P_SV {
                        label = "P_SV"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8488, 8216
                    ]

                    port w_ref {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7720, 8200
                    ]

                    port w_m {
                        label = "w_m"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8248
                    ]

                    tag V_t3 {
                        value = "del_w"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7736, 8248
                        hide_name = True
                    ]

                    junction Junction1 sp
                    [
                        position = 8064, 8248
                    ]

                    connect "Discrete Transfer Function1.out" Gain2.in as Connection3
                    connect "Discrete Transfer Function2.in" Gain3.out as Connection5
                    connect Gain1.in w_m as Connection7
                    connect Gain2.out Gain3.in as Connection4
                    connect Integrator1.in "Discrete Transfer Function2.out" as Connection6
                    connect "Rate Limiter1.in" Gain4.out as Connection13
                    connect Integrator1.out P_SV as Connection14
                    connect w_ref Gain4.in as Connection186
                    connect "Rate Limiter1.out" Sum6.in as Connection187
                    connect Sum1.in Sum6.out as Connection193
                    [
                        breakpoints = 8008, 8208
                    ]
                    connect "Discrete Transfer Function1.in" Sum1.out as Connection194
                    connect Sum1.in1 Junction1 as Connection201
                    [
                        breakpoints = 8064, 8224
                    ]
                    connect Junction1 Gain1.out as Connection202
                    [
                        breakpoints = 8064, 8248
                    ]
                    connect "Exciter Activation.w_PU" Junction1 as Connection203
                    connect V_t3 Sum6.in1 as Connection204
                }
                [
                    position = 7416, 8528
                    size = 176, 80
                ]

                component Subsystem Engine {
                    layout = dynamic
                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8272, 8192
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8112, 8192
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_CH"
                    }
                    [
                        position = 8192, 8192
                        hide_name = True
                    ]

                    port T_M2 {
                        label = "T_M"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8344, 8192
                    ]

                    port P_SV {
                        label = "P_SV"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8016, 8216
                    ]

                    tag T_M {
                        value = "T_M"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8368, 8264
                    ]

                    tag T_M1 {
                        value = "T_M"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8016, 8152
                        hide_name = True
                    ]

                    junction Junction1 sp
                    [
                        position = 8312, 8192
                    ]

                    connect Gain1.out Integrator1.in as Connection2
                    connect Integrator1.out Junction1 as Connection6
                    connect Junction1 T_M2 as Connection7
                    connect Sum1.out Gain1.in as Connection1
                    connect Sum1.in1 P_SV as Connection5
                    connect T_M Junction1 as Connection8
                    connect T_M1 Sum1.in as Connection3
                }
                [
                    position = 7592, 8528
                    size = 80, 56
                ]

                component Subsystem E_dp {
                    layout = dynamic
                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_q-X_qp"
                    }
                    [
                        position = 8272, 8088
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+-"
                    }
                    [
                        position = 8272, 8160
                        hide_name = True
                    ]

                    component src_constant Constant3 {
                        execution_rate = "Ts"
                        value = "X_qp-X_ls"
                    }
                    [
                        position = 7936, 8248
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8352, 8112
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8448, 8104
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "+++"
                    }
                    [
                        position = 8096, 8272
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_qp-X_qpp)/(X_qp-X_ls)**2"
                    }
                    [
                        position = 8096, 8200
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8192, 8224
                        hide_name = True
                    ]

                    component gen_product Product3 {
                    }
                    [
                        position = 8016, 8272
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_qop"
                    }
                    [
                        position = 8504, 8104
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8560, 8104
                        hide_name = True
                    ]

                    port I_q_a {
                        label = "I_q_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7816, 8152
                    ]

                    port E_dp3 {
                        label = "E_dp"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8656, 8104
                        hide_name = True
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8208
                    ]

                    tag E_dp1 {
                        value = "E_dp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8352, 8048
                        hide_name = True
                    ]

                    tag E_dp {
                        value = "E_dp"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8656, 8184
                        hide_name = True
                    ]

                    tag E_dp2 {
                        value = "E_dp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8016, 8328
                        hide_name = True
                        size = 60, 20
                    ]

                    junction Junction2 sp
                    [
                        position = 7856, 8152
                    ]

                    junction Junction3 sp
                    [
                        position = 8608, 8104
                    ]

                    connect Constant1.out Product1.in as Connection3
                    connect Constant2.out Product2.in as Connection6
                    connect Constant3.out Product3.in as Connection19
                    connect E_dp Junction3 as Connection28
                    connect E_dp1 Sum1.in as Connection1
                    connect E_dp2 Sum3.in2 as Connection9
                    connect Gain1.in Sum1.out as Connection23
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction3 as Connection26
                    connect Junction2 I_q_a as Connection21
                    connect Junction3 E_dp3 as Connection27
                    connect Product1.out Sum1.in1 as Connection2
                    connect Product2.out Sum2.in1 as Connection5
                    connect Product3.in1 Junction2 as Connection22
                    connect Product3.out Sum3.in1 as Connection8
                    connect Sum2.in Junction2 as Connection20
                    connect Sum2.out Product1.in1 as Connection4
                    connect Sum3.in Phi_2q_a as Connection15
                    connect Sum3.out Product2.in1 as Connection7
                }
                [
                    position = 8880, 8000
                    scale = -1, 1
                    size = 96, 88
                ]

                component Subsystem Exciter {
                    layout = dynamic
                    component gen_integrator Integrator2 {
                        show_reset = "either"
                    }
                    [
                        position = 8368, 8104
                        hide_name = True
                    ]

                    component gen_gain Gain4 {
                        gain = "1/T_F"
                    }
                    [
                        position = 8296, 8096
                        hide_name = True
                    ]

                    component gen_gain Gain8 {
                        gain = "K_A"
                    }
                    [
                        position = 8136, 8336
                        hide_name = True
                    ]

                    component gen_gain Gain2 {
                        gain = "K_E+S_E"
                    }
                    [
                        position = 8136, 7904
                        hide_name = True
                    ]

                    component gen_gain Gain7 {
                        gain = "K_A"
                    }
                    [
                        position = 8136, 8232
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "-+-+"
                    }
                    [
                        position = 8240, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain5 {
                        gain = "K_A*K_F/T_F"
                    }
                    [
                        position = 8136, 8296
                        hide_name = True
                    ]

                    component gen_gain Gain6 {
                        gain = "1/T_A"
                    }
                    [
                        position = 8296, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain3 {
                        gain = "K_F/T_F"
                    }
                    [
                        position = 8136, 8128
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_E"
                    }
                    [
                        position = 8296, 7936
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8240, 7936
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "-+"
                    }
                    [
                        position = 8240, 8096
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                        limit_lower = "-2"
                        limit_upper = "2"
                        show_reset = "either"
                    }
                    [
                        position = 8368, 7944
                        hide_name = True
                    ]

                    component gen_integrator Integrator3 {
                        limit_lower = "V_R_min"
                        limit_output = "True"
                        limit_upper = "V_R_max"
                        show_reset = "either"
                    }
                    [
                        position = 8368, 8272
                        hide_name = True
                    ]

                    component sys_signal_switch "|V|1" {
                        criterion = "ctrl != threshold"
                        threshold = "1"
                    }
                    [
                        position = 7976, 8360
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "0"
                    }
                    [
                        position = 7928, 8344
                        hide_name = True
                    ]

                    component gen_probe "Volt difference" {
                    }
                    [
                        position = 8136, 8384
                    ]

                    component gen_probe V_R_M {
                    }
                    [
                        position = 8560, 8216
                    ]

                    component gen_rate_limiter "Rate Limit" {
                        falling_limit = "V_fall"
                        rising_limit = "V_rise"
                    }
                    [
                        position = 8040, 8360
                        hide_name = True
                    ]

                    component gen_probe V_t_M {
                    }
                    [
                        position = 8560, 8408
                    ]

                    component gen_integrator Integrator4 {
                        show_reset = "either"
                    }
                    [
                        position = 8384, 8472
                        hide_name = True
                    ]

                    component gen_sum Sum5 {
                        signs = "-+"
                    }
                    [
                        position = 8232, 8464
                        hide_name = True
                    ]

                    component gen_gain Gain9 {
                        gain = "1/(T_R)"
                    }
                    [
                        position = 8304, 8464
                        hide_name = True
                    ]

                    component gen_probe R_F_M {
                    }
                    [
                        position = 8560, 8048
                    ]

                    component gen_digital_probe "exciter ON" {
                    }
                    [
                        position = 7880, 8232
                    ]

                    component gen_logic_op "Logical operator1" {
                        operator = "NOT"
                    }
                    [
                        position = 7792, 8176
                        rotation = right
                        hide_name = True
                        scale = 1, -1
                    ]

                    component gen_digital_probe "exciter OFF" {
                    }
                    [
                        position = 7880, 8128
                    ]

                    component Subsystem PI {
                        layout = dynamic
                        component gen_integrator Integrator1 {
                            limit_lower = "[\'-inf\']"
                            limit_upper = "[\'inf\']"
                            show_reset = "either"
                        }
                        [
                            position = 8216, 8232
                            hide_name = True
                        ]

                        component gen_gain Kp {
                            gain = "exc_Kp"
                        }
                        [
                            position = 7992, 8152
                        ]

                        component gen_sum Sum7 {
                        }
                        [
                            position = 8088, 8224
                            hide_name = True
                        ]

                        component gen_gain Kb {
                        }
                        [
                            position = 8216, 8312
                            scale = -1, 1
                        ]

                        component gen_sum Sum6 {
                            signs = "-+"
                        }
                        [
                            position = 8320, 8312
                            hide_name = True
                            scale = -1, 1
                        ]

                        component gen_gain Ki {
                            gain = "exc_Ki"
                        }
                        [
                            position = 7992, 8216
                        ]

                        component gen_sum Sum5 {
                        }
                        [
                            position = 8320, 8224
                            hide_name = True
                        ]

                        component gen_limiter Limit1 {
                            lower_limit = "-10"
                            upper_limit = "10"
                        }
                        [
                            position = 8408, 8224
                            hide_name = True
                        ]

                        port Out {
                            label = "Out"
                            position = right:1
                            kind = sp
                            direction =  in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8472, 8224
                        ]

                        port Reset {
                            label = "Reset"
                            position = top:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8144, 8264
                        ]

                        port In {
                            label = "In"
                            position = left:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7824, 8184
                        ]

                        junction Junction2 sp
                        [
                            position = 8368, 8224
                        ]

                        junction Junction3 sp
                        [
                            position = 8440, 8224
                        ]

                        junction Junction4 sp
                        [
                            position = 7928, 8184
                        ]

                        connect Integrator1.reset Reset as Connection2
                        connect Junction2 Limit1.in as Connection45
                        connect Junction3 Out as Connection48
                        connect Junction4 In as Connection57
                        connect Kb.in Sum6.out as Connection50
                        connect Ki.in Junction4 as Connection56
                        connect Ki.out Sum7.in as Connection54
                        connect Kp.in Junction4 as Connection58
                        connect Kp.out Sum5.in as Connection59
                        connect Limit1.out Junction3 as Connection47
                        connect Sum5.in1 Integrator1.out as Connection5
                        connect Sum5.out Junction2 as Connection44
                        connect Sum6.in Junction2 as Connection46
                        connect Sum6.in1 Junction3 as Connection49
                        connect Sum7.out Integrator1.in as Connection52
                        connect Sum7.in1 Kb.out as Connection53
                    }
                    [
                        position = 8504, 7944
                        size = 64, 48
                    ]

                    component gen_sum Sum6 {
                        signs = "++"
                    }
                    [
                        position = 7792, 8352
                        hide_name = True
                    ]

                    component gen_sum Sum4 {
                        signs = "+-"
                    }
                    [
                        position = 7880, 8376
                        hide_name = True
                    ]

                    port E_F4 {
                        label = "E_F"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8584, 7944
                    ]

                    port "|V|" {
                        label = "|V|"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8136, 8480
                    ]

                    port V_ref {
                        label = "V_ref"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7696, 8328
                    ]

                    tag R_F2 {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8232
                        hide_name = True
                    ]

                    tag E_F1 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 7904
                        hide_name = True
                    ]

                    tag V_R {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8272
                        hide_name = True
                    ]

                    tag E_F3 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8296
                        hide_name = True
                    ]

                    tag V_t {
                        value = "V_t"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8472
                        hide_name = True
                    ]

                    tag E_F {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8504, 8000
                        hide_name = True
                    ]

                    tag V_R1 {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 7960
                        hide_name = True
                    ]

                    tag R_F {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8104
                        hide_name = True
                    ]

                    tag V_R2 {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 8200
                        hide_name = True
                    ]

                    tag E_F2 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8128
                        hide_name = True
                    ]

                    tag R_F1 {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 8072
                        hide_name = True
                    ]

                    tag V_t1 {
                        value = "V_t"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 8440
                        hide_name = True
                    ]

                    tag dV {
                        value = "d|V|"
                        scope = global
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8240, 8360
                        hide_name = True
                    ]

                    tag V_t3 {
                        value = "del_V"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7696, 8376
                        hide_name = True
                    ]

                    tag V_t2 {
                        value = "V_t"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7792, 8400
                        hide_name = True
                    ]

                    tag V_t5 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 8320
                        hide_name = True
                    ]

                    tag V_t6 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8232, 8512
                        hide_name = True
                    ]

                    tag V_t7 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 8144
                        hide_name = True
                    ]

                    tag V_t8 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 7984
                        hide_name = True
                    ]

                    tag V_t9 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8440, 7880
                        hide_name = True
                    ]

                    tag V_t10 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7696, 8232
                        hide_name = True
                    ]

                    tag V_t11 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7880, 8296
                        hide_name = True
                    ]

                    junction Junction4 sp
                    [
                        position = 8512, 8272
                    ]

                    junction Junction10 sp
                    [
                        position = 8512, 8472
                    ]

                    junction Junction12 sp
                    [
                        position = 8504, 8104
                    ]

                    junction Junction18 sp
                    [
                        position = 8416, 7944
                    ]

                    junction Junction23 sp
                    [
                        position = 8072, 8360
                    ]

                    junction Junction24 sp
                    [
                        position = 8072, 8360
                    ]

                    junction Junction25 sp
                    [
                        position = 7792, 8232
                    ]

                    connect Constant1.out "|V|1.in" as Connection42
                    connect E_F Junction18 as Connection167
                    connect E_F1 Gain2.in as Connection4
                    connect E_F2 Gain3.in as Connection7
                    connect E_F3 Gain5.in as Connection12
                    connect Gain1.out Integrator1.in as Connection1
                    connect Gain1.in Sum1.out as Connection2
                    connect Gain2.out Sum1.in as Connection3
                    connect Gain3.out Sum2.in1 as Connection8
                    connect Gain4.out Integrator2.in as Connection9
                    connect Gain5.out Sum3.in2 as Connection21
                    [
                        breakpoints = 8192, 8288; 8192, 8272
                    ]
                    connect Gain6.out Integrator3.in as Connection16
                    connect Gain7.out Sum3.in1 as Connection20
                    [
                        breakpoints = 8192, 8232; 8192, 8256
                    ]
                    connect Gain8.out Sum3.in3 as Connection22
                    connect Integrator1.out Junction18 as Connection165
                    connect Integrator4.in Gain9.out as Connection60
                    connect Junction10 Integrator4.out as Connection123
                    connect Junction12 Integrator2.out as Connection138
                    connect Junction18 PI.In as Connection166
                    connect Junction4 Integrator3.out as Connection93
                    connect PI.Out E_F4 as Connection164
                    connect R_F Junction12 as Connection137
                    connect R_F1 Sum2.in as Connection6
                    connect R_F2 Gain7.in as Connection19
                    connect R_F_M.in Junction12 as Connection139
                    connect Sum2.out Gain4.in as Connection10
                    connect Sum3.out Gain6.in as Connection14
                    connect Sum5.out Gain9.in as Connection26
                    connect V_R Junction4 as Connection92
                    connect V_R1 Sum1.in1 as Connection5
                    connect V_R2 Sum3.in as Connection18
                    connect V_R_M.in Junction4 as Connection94
                    connect V_t Junction10 as Connection122
                    connect V_t1 Sum5.in as Connection25
                    connect V_t_M.in Junction10 as Connection124
                    connect "exciter OFF.in" "Logical operator1.out" as Connection155
                    connect "|V|" Sum5.in1 as Connection120
                    connect "|V|1.out" "Rate Limit.in" as Connection48
                    connect V_ref Sum6.in as Connection186
                    connect V_t2 Sum4.in1 as Connection75
                    connect Sum6.out Sum4.in as Connection191
                    connect Sum4.out "|V|1.in1" as Connection192
                    connect "Rate Limit.out" Junction23 as Connection194
                    connect Junction23 dV as Connection195
                    connect Gain8.in Junction24 as Connection197
                    connect Junction24 Junction23 as Connection198
                    connect "Volt difference.in" Junction24 as Connection199
                    connect V_t5 Integrator3.reset as Connection200
                    connect V_t6 Integrator4.reset as Connection201
                    connect V_t7 Integrator2.reset as Connection202
                    connect V_t8 Integrator1.reset as Connection203
                    connect V_t9 PI.Reset as Connection204
                    connect V_t10 Junction25 as Connection210
                    connect Junction25 "exciter ON.in" as Connection211
                    connect "Logical operator1.in" Junction25 as Connection212
                    connect V_t11 "|V|1.in2" as Connection213
                    connect V_t3 Sum6.in1 as Connection214
                }
                [
                    position = 8880, 8296
                    scale = -1, 1
                    size = 96, 64
                ]

                component Subsystem "Phi_q_a 2" {
                    layout = dynamic
                    component gen_product Product2 {
                    }
                    [
                        position = 8144, 8208
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+-"
                    }
                    [
                        position = 8256, 8208
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "(X_qpp-X_ls)/(X_qp-X_ls)"
                    }
                    [
                        position = 8040, 8288
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_qp-X_qpp)/(X_qp-X_ls)"
                    }
                    [
                        position = 8040, 8184
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8144, 8312
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "X_qpp"
                    }
                    [
                        position = 8136, 8128
                        hide_name = True
                    ]

                    port E_dp {
                        label = "E_dp"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8328
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8232
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8336, 8208
                    ]

                    port I_q_a {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8128
                    ]

                    connect Constant1.out Product1.in as Connection4
                    connect Constant2.out Product2.in as Connection5
                    connect E_dp Product1.in1 as Connection10
                    connect Phi_q_a Sum1.out as Connection13
                    connect Product2.in1 Phi_2q_a as Connection9
                    connect I_q_a Gain1.in as Connection16
                    connect Gain1.out Sum1.in as Connection17
                    connect Product2.out Sum1.in1 as Connection18
                    connect Product1.out Sum1.in2 as Connection19
                }
                [
                    position = 8432, 8056
                    scale = -1, 1
                    size = 128, 64
                ]

                component Subsystem "Phi_d_a 2" {
                    layout = dynamic
                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_dp-X_dpp)/(X_dp-X_ls)"
                    }
                    [
                        position = 8040, 8184
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "(X_dpp-X_ls)/(X_dp-X_ls)"
                    }
                    [
                        position = 8040, 8288
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8144, 8312
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-++"
                    }
                    [
                        position = 8256, 8208
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8144, 8208
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "X_dpp"
                    }
                    [
                        position = 8144, 8120
                        hide_name = True
                    ]

                    port E_qp {
                        label = "E_qp"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8328
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8232
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 8208
                    ]

                    port I_d_a {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8120
                    ]

                    connect Constant1.out Product1.in as Connection4
                    connect Constant2.out Product2.in as Connection5
                    connect E_qp Product1.in1 as Connection10
                    connect Phi_d_a Sum1.out as Connection13
                    connect Product2.in1 Phi_1d_a as Connection9
                    connect Product2.out Sum1.in1 as Connection14
                    connect Product1.out Sum1.in2 as Connection15
                    connect I_d_a Gain1.in as Connection16
                    connect Gain1.out Sum1.in as Connection17
                }
                [
                    position = 7968, 8056
                    size = 128, 64
                ]

                component Subsystem V_qG2 {
                    layout = dynamic
                    component gen_product Product3 {
                        signs = "*/"
                    }
                    [
                        position = 8184, 8176
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8280, 8224
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                    }
                    [
                        position = 8384, 8264
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "w_0"
                    }
                    [
                        position = 8112, 8208
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/w_0"
                    }
                    [
                        position = 8256, 8304
                        hide_name = True
                    ]

                    component gen_differentiator Differentiator1 {
                    }
                    [
                        position = 8304, 8304
                        hide_name = True
                    ]

                    component tm_delay "Unit Delay1" {
                    }
                    [
                        position = 8440, 8264
                        hide_name = True
                    ]

                    port w_e {
                        label = "w_e"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8112, 8144
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8208, 8232
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = left:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8208, 8304
                    ]

                    port V_qG {
                        label = "V_qG"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8488, 8264
                    ]

                    connect Constant2.out Product3.in1 as Connection5
                    connect Differentiator1.in Gain1.out as Connection19
                    connect Differentiator1.out Sum2.in1 as Connection21
                    connect Gain1.in Phi_q_a as Connection17
                    connect Product2.in1 Phi_d_a as Connection13
                    connect Product2.out Sum2.in as Connection22
                    connect Product3.out Product2.in as Connection4
                    connect Product3.in w_e as Connection11
                    connect Sum2.out "Unit Delay1.in" as Connection23
                    connect "Unit Delay1.out" V_qG as Connection24
                }
                [
                    position = 8096, 8304
                    size = 80, 80
                ]

                component Subsystem V_dG2 {
                    layout = dynamic
                    component gen_product Product3 {
                        signs = "*/"
                    }
                    [
                        position = 8032, 8216
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8128, 8264
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "-+"
                    }
                    [
                        position = 8304, 8288
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "w_0"
                    }
                    [
                        position = 7960, 8248
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/w_0"
                    }
                    [
                        position = 8176, 8312
                        hide_name = True
                    ]

                    component gen_differentiator Differentiator1 {
                    }
                    [
                        position = 8232, 8312
                        hide_name = True
                    ]

                    component tm_delay "Unit Delay1" {
                    }
                    [
                        position = 8360, 8288
                        hide_name = True
                    ]

                    port w_e {
                        label = "w_e"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8184
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8272
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = left:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8120, 8312
                    ]

                    port V_d_a {
                        label = "V_d_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8408, 8288
                    ]

                    connect Constant2.out Product3.in1 as Connection5
                    connect Differentiator1.in Gain1.out as Connection18
                    connect Gain1.in Phi_d_a as Connection16
                    connect Product2.in1 Phi_q_a as Connection13
                    connect Product2.out Sum2.in as Connection14
                    connect Product3.out Product2.in as Connection4
                    connect Product3.in w_e as Connection11
                    connect Sum2.in1 Differentiator1.out as Connection17
                    connect "Unit Delay1.in" Sum2.out as Connection20
                    connect V_d_a "Unit Delay1.out" as Connection19
                }
                [
                    position = 8096, 8448
                    size = 80, 80
                ]

                component "core/dq to abc" "dq to abc1" {
                    execution_rate = "inherit"
                }
                [
                    position = 8304, 8384
                    hide_name = True
                    size = 48, 80
                ]

                component gen_gain Gain2 {
                    gain = "-1"
                }
                [
                    position = 8232, 8368
                    hide_name = True
                ]

                component src_constant Constant1 {
                    execution_rate = "Ts"
                    value = "0"
                }
                [
                    position = 8184, 8400
                    hide_name = True
                ]

                component "core/Signal Controlled Voltage Source" Ea {
                }
                [
                    position = 7840, 8952
                    rotation = right
                    scale = -1, 1
                    size = 64, 32
                ]

                component "core/Signal Controlled Voltage Source" Eb {
                }
                [
                    position = 8344, 8992
                    rotation = right
                    scale = -1, 1
                    size = 64, 32
                ]

                component "core/Signal Controlled Voltage Source" Ec {
                }
                [
                    position = 8856, 9016
                    rotation = right
                    scale = -1, 1
                    size = 64, 32
                ]

                component pas_resistor Ra {
                    resistance = "Rs"
                }
                [
                    position = 7888, 8840
                ]

                component pas_resistor Rb {
                    resistance = "Rs"
                }
                [
                    position = 8408, 8904
                ]

                component pas_resistor Rc {
                    resistance = "Rs"
                }
                [
                    position = 8912, 8960
                ]

                component "core/Current Measurement" Ia1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 7984, 8840
                    size = 64, 32
                ]

                component "core/Current Measurement" Ib1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 8504, 8904
                    size = 64, 32
                ]

                component "core/Current Measurement" Ic1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 9008, 8960
                    size = 64, 32
                ]

                component "core/abc to dq" "abc to dq1" {
                }
                [
                    position = 8776, 8440
                    size = 48, 80
                ]

                component gen_gain Gain6 {
                    gain = "-1"
                }
                [
                    position = 8984, 8440
                    hide_name = True
                ]

                component gen_terminator Termination1 {
                }
                [
                    position = 9080, 8472
                    hide_name = True
                ]

                component gen_probe "|V|_M" {
                }
                [
                    position = 9008, 8568
                ]

                component "core/Voltage Measurement" Ea1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 8056, 8952
                    rotation = right
                    size = 64, 32
                ]

                component "core/Voltage Measurement" Eb1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 8568, 8984
                    rotation = right
                    size = 64, 32
                ]

                component "core/Voltage Measurement" Ec1 {
                    execution_rate = "Ts"
                    sig_output = "True"
                }
                [
                    position = 9120, 9016
                    rotation = right
                    size = 64, 32
                ]

                component gen_probe E_d {
                }
                [
                    position = 8888, 8680
                ]

                component gen_probe E_q {
                }
                [
                    position = 8888, 8568
                    rotation = down
                    scale = -1, 1
                ]

                component Subsystem magnitude {
                    layout = dynamic
                    component gen_math_fnc "Mathematical function1" {
                        mathematical_fn = "sqrt"
                    }
                    [
                        position = 8272, 8192
                        hide_name = True
                    ]

                    component gen_product Product5 {
                    }
                    [
                        position = 8112, 8128
                        hide_name = True
                    ]

                    component gen_product Product6 {
                    }
                    [
                        position = 8112, 8256
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                    }
                    [
                        position = 8192, 8192
                        hide_name = True
                    ]

                    port q {
                        label = "q"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8032, 8120
                    ]

                    port d {
                        label = "d"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8032, 8248
                    ]

                    port magnitude {
                        label = "magnitude"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8344, 8192
                    ]

                    junction Junction1 sp
                    [
                        position = 8064, 8248
                    ]

                    junction Junction2 sp
                    [
                        position = 8064, 8120
                    ]

                    connect Junction1 Product6.in as Connection149
                    connect Junction2 q as Connection152
                    connect "Mathematical function1.out" magnitude as Connection146
                    connect Product5.in Junction2 as Connection151
                    connect Product5.in1 Junction2 as Connection153
                    connect Product5.out Sum3.in as Connection56
                    connect Product6.in1 Junction1 as Connection150
                    connect Product6.out Sum3.in1 as Connection143
                    connect Sum3.out "Mathematical function1.in" as Connection58
                    connect d Junction1 as Connection148
                }
                [
                    position = 8888, 8624
                    hide_name = True
                    size = 80, 48
                ]

                component "core/Triple Pole Single Throw Contactor" S2 {
                    ctrl_src = "Model"
                }
                [
                    position = 9392, 8904
                    size = 64, 256
                ]

                component gen_gain Gain8 {
                    gain = "V_DQ"
                }
                [
                    position = 8184, 8304
                    hide_name = True
                ]

                component gen_gain Gain9 {
                    gain = "V_DQ"
                }
                [
                    position = 8184, 8368
                    hide_name = True
                ]

                component gen_gain Gain10 {
                    gain = "1/I_DQ"
                }
                [
                    position = 8880, 8408
                    hide_name = True
                ]

                component gen_gain Gain11 {
                    gain = "1/I_DQ"
                }
                [
                    position = 8880, 8440
                    hide_name = True
                ]

                component src_clock Clock1 {
                    execution_rate = "Ts"
                }
                [
                    position = 8096, 8552
                    hide_name = True
                ]

                component gen_product Product1 {
                }
                [
                    position = 8184, 8536
                    hide_name = True
                ]

                component gen_probe I_q_a1 {
                }
                [
                    position = 9136, 8352
                ]

                component gen_probe I_d_a1 {
                }
                [
                    position = 9136, 8424
                ]

                component "core/Voltage Measurement" Va_G1 {
                    execution_rate = "Ts"
                }
                [
                    position = 9568, 8904
                    rotation = right
                    size = 64, 32
                ]

                component gen_gain Gain7 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8560, 8576
                    hide_name = True
                ]

                component Subsystem Current_abc_to_dq3 {
                    layout = dynamic
                    component "core/abc to dq" "abc to dq1" {
                    }
                    [
                        position = 7856, 8008
                        size = 48, 80
                    ]

                    component gen_terminator Termination {
                    }
                    [
                        position = 7952, 8064
                    ]

                    port wt {
                        position = right:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8088
                    ]

                    port Ec {
                        position = right:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8040
                    ]

                    port Eq {
                        position = left:2
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 8016
                    ]

                    port Ea {
                        position = right:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 7960
                    ]

                    port Ed {
                        position = left:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 7976
                    ]

                    port Eb {
                        position = right:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8000
                    ]

                    connect Termination.in "abc to dq1.zero_axis" as Connection4
                    connect "abc to dq1.q_axis" Eq as Connection6
                    connect Ec "abc to dq1.vc" as Connection3
                    connect Ea "abc to dq1.va" as Connection1
                    connect Eb "abc to dq1.vb" as Connection2
                    connect "abc to dq1.d_axis" Ed as Connection5
                    connect wt "abc to dq1.wt" as Connection7
                }
                [
                    position = 8480, 8624
                    hide_name = True
                    scale = -1, 1
                    size = 64, 144
                ]

                component gen_gain Gain12 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8560, 8672
                    hide_name = True
                ]

                component gen_gain Gain13 {
                    gain = "-1"
                }
                [
                    position = 8728, 8648
                    hide_name = True
                ]

                port V_ref {
                    label = "V_ref"
                    position = left:3
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8992, 8272
                    scale = -1, 1
                ]

                port w_ref {
                    label = "w_ref"
                    position = left:5
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7240, 8512
                    rotation = down
                    scale = -1, 1
                ]

                port ground {
                    position = bottom:auto
                    kind = pe
                }
                [
                    position = 9488, 9096
                    scale = -1, 1
                ]

                port V_aG {
                    position = right:2
                    kind = pe
                }
                [
                    position = 9488, 8768
                    scale = -1, 1
                ]

                port V_bG {
                    position = right:2
                    kind = pe
                }
                [
                    position = 9488, 8904
                    scale = -1, 1
                ]

                port V_cG {
                    position = right:3
                    kind = pe
                }
                [
                    position = 9488, 9000
                    scale = -1, 1
                ]

                tag w_m2 {
                    value = "w_m"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7240, 8544
                    hide_name = True
                ]

                tag T_M1 {
                    value = "T_M"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7696, 8528
                    hide_name = True
                ]

                tag T_M {
                    value = "T_M"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7376, 8304
                    hide_name = True
                ]

                tag I_q_a2 {
                    value = "I_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9016, 7976
                    hide_name = True
                    scale = -1, 1
                ]

                tag w_m1 {
                    value = "w_m"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7744, 8352
                    hide_name = True
                ]

                tag E_F {
                    value = "E_F"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8296
                    hide_name = True
                    scale = -1, 1
                ]

                tag w_e1 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7744, 8400
                    hide_name = True
                ]

                tag "|V|2" {
                    value = "|V|"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8992, 8320
                    hide_name = True
                    scale = -1, 1
                ]

                tag Phi_d_a4 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7376, 8328
                    hide_name = True
                ]

                tag I_q_a6 {
                    value = "I_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9008, 8160
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_dp1 {
                    value = "E_dp"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8000
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_qp1 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7648, 8000
                    hide_name = True
                ]

                tag Phi_2q_a3 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9016, 8024
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_q_a {
                    value = "I_q_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9064, 8408
                    hide_name = True
                ]

                tag E_qp3 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7400, 8120
                    hide_name = True
                ]

                tag Phi_q_a4 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7376, 8400
                    hide_name = True
                ]

                tag I_d_a5 {
                    value = "I_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7376, 8376
                    hide_name = True
                ]

                tag E_F1 {
                    value = "E_F"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7384, 7968
                    hide_name = True
                ]

                tag Phi_2q_a1 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8144
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_d_a3 {
                    value = "I_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7384, 8000
                    hide_name = True
                ]

                tag Phi_1d_a3 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7384, 8032
                    hide_name = True
                ]

                tag E_dp3 {
                    value = "E_dp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 9008, 8128
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_d_a2 {
                    value = "I_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7400, 8152
                    hide_name = True
                ]

                tag I_q_a4 {
                    value = "I_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7376, 8352
                    hide_name = True
                ]

                tag Phi_1d_a1 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7664, 8136
                    hide_name = True
                ]

                tag I_d_a {
                    value = "I_d_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9064, 8440
                    hide_name = True
                ]

                tag Phi_d_a1 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8160, 8080
                    hide_name = True
                ]

                tag Phi_q_a1 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8248, 8080
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_dp4 {
                    value = "E_dp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8560, 8088
                    hide_name = True
                    scale = -1, 1
                ]

                tag Phi_2q_a4 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8560, 8056
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_qp4 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7840, 8088
                    hide_name = True
                ]

                tag Phi_1d_a4 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7840, 8056
                    hide_name = True
                ]

                tag I_q_a7 {
                    value = "I_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8560, 8024
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_d_a7 {
                    value = "I_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7840, 8024
                    hide_name = True
                ]

                tag w_e7 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8280
                    hide_name = True
                ]

                tag Phi_q_a6 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8328
                    hide_name = True
                ]

                tag Phi_d_a6 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8304
                    hide_name = True
                ]

                tag Phi_q_a5 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8448
                    hide_name = True
                ]

                tag w_e6 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8424
                    hide_name = True
                ]

                tag Phi_d_a5 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7976, 8472
                    hide_name = True
                ]

                tag V_a {
                    value = "E_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8408, 8344
                    hide_name = True
                ]

                tag V_b {
                    value = "E_b"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8408, 8384
                    hide_name = True
                ]

                tag V_c {
                    value = "E_c"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8408, 8424
                    hide_name = True
                ]

                tag V_a1 {
                    value = "E_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7760, 8952
                    hide_name = True
                ]

                tag V_b1 {
                    value = "E_b"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8264, 8992
                    hide_name = True
                ]

                tag V_c1 {
                    value = "E_c"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8776, 9016
                    hide_name = True
                ]

                tag I_a {
                    value = "I_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8040, 8800
                    hide_name = True
                ]

                tag I_b {
                    value = "I_b"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8576, 8864
                    hide_name = True
                ]

                tag I_c {
                    value = "I_c"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9080, 8928
                    hide_name = True
                ]

                tag I_a1 {
                    value = "I_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8672, 8400
                    hide_name = True
                ]

                tag I_b1 {
                    value = "I_b"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8672, 8424
                    hide_name = True
                ]

                tag I_c1 {
                    value = "I_c"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8672, 8456
                    hide_name = True
                ]

                tag "|V|1" {
                    value = "|V|"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 9008, 8624
                    hide_name = True
                ]

                tag Ea_G {
                    value = "Ea1"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8144, 8952
                ]

                tag Eb_G {
                    value = "Eb1"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8656, 8984
                ]

                tag Ec_G {
                    value = "Ec1"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9216, 9016
                ]

                tag Connect5 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 9280, 8760
                    hide_name = True
                ]

                tag w_e8 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8096, 8520
                    hide_name = True
                ]

                tag Goto28 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8656, 8672
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto29 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8656, 8576
                    hide_name = True
                    size = 60, 20
                ]

                tag From34 {
                    value = "Ec1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8384, 8640
                    hide_name = True
                    size = 60, 20
                ]

                tag From33 {
                    value = "Ea1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8384, 8576
                    hide_name = True
                    size = 60, 20
                ]

                tag From35 {
                    value = "Eb1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8384, 8608
                    hide_name = True
                    size = 60, 20
                ]

                tag theta_bus1 {
                    value = "theta_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8384, 8672
                    hide_name = True
                ]

                junction Junction7 sp
                [
                    position = 7600, 8000
                ]

                junction Junction9 sp
                [
                    position = 7656, 8528
                ]

                junction Junction10 sp
                [
                    position = 7608, 8136
                ]

                junction Junction11 sp
                [
                    position = 8800, 8144
                ]

                junction Junction15 sp
                [
                    position = 8800, 8296
                ]

                junction Junction19 sp
                [
                    position = 8800, 8000
                ]

                junction Junction20 sp
                [
                    position = 7632, 8352
                ]

                junction Junction21 sp
                [
                    position = 7632, 8352
                ]

                junction Junction26 sp
                [
                    position = 8112, 8056
                ]

                junction Junction27 sp
                [
                    position = 8296, 8056
                ]

                junction Junction37 pe
                [
                    position = 8056, 9072
                ]

                junction Junction38 pe
                [
                    position = 8344, 9072
                ]

                junction Junction39 pe
                [
                    position = 8568, 9072
                ]

                junction Junction40 pe
                [
                    position = 8856, 9072
                ]

                junction Junction41 pe
                [
                    position = 9120, 9072
                ]

                junction Junction46 sp
                [
                    position = 8960, 8624
                ]

                junction Junction47 pe
                [
                    position = 8568, 8904
                ]

                junction Junction48 pe
                [
                    position = 8056, 8840
                ]

                junction Junction49 pe
                [
                    position = 9120, 8960
                ]

                junction Junction52 sp
                [
                    position = 8264, 8536
                ]

                junction Junction53 sp
                [
                    position = 9016, 8440
                ]

                junction Junction54 sp
                [
                    position = 9016, 8408
                ]

                junction Junction55 pe
                [
                    position = 9456, 8808
                ]

                junction Junction56 pe
                [
                    position = 9456, 9072
                ]

                junction Junction60 sp
                [
                    position = 8600, 8672
                ]

                junction Junction61 sp
                [
                    position = 8600, 8576
                ]

                junction Junction62 sp
                [
                    position = 8792, 8600
                ]

                junction Junction63 sp
                [
                    position = 8792, 8648
                ]

                connect E_F Junction15 as Connection161
                connect E_F1 E_qp.E_F as Connection53
                connect E_F_M.in Junction15 as Connection163
                connect E_dp1 Junction19 as Connection173
                connect E_dp3 Phi_2q_a.E_dp as Connection32
                connect E_dp_M.in Junction19 as Connection175
                connect E_qp.E_qp3 Junction7 as Connection128
                connect E_qp3 Phi_1d_a.E_qp as Connection34
                connect E_qp_M.in Junction7 as Connection130
                connect Engine.T_M2 Junction9 as Connection134
                connect Gain1.out w_e1 as Connection18
                connect I_d_a2 Phi_1d_a.I_d_a as Connection43
                connect I_d_a3 E_qp.I_d_a as Connection44
                connect I_d_a5 w_m.I_d_a as Connection46
                connect I_q_a2 E_dp.I_q_a as Connection37
                connect I_q_a4 w_m.I_q_a as Connection39
                connect I_q_a6 Phi_2q_a.I_q_a as Connection41
                connect Junction10 Phi_1d_a1 as Connection138
                connect Junction11 Phi_2q_a.Phi_2q_a as Connection141
                connect Junction15 Exciter.E_F4 as Connection162
                connect Junction19 E_dp.E_dp3 as Connection174
                connect Junction20 Gain1.in as Connection180
                connect Junction21 Junction20 as Connection183
                connect Junction7 E_qp1 as Connection129
                connect Junction9 T_M1 as Connection135
                connect Phi_1d_a.Phi_1d_a Junction10 as Connection137
                connect Phi_1d_a3 E_qp.Phi_1d_a as Connection36
                connect Phi_1d_a_M.in Junction10 as Connection139
                connect Phi_2q_a1 Junction11 as Connection140
                connect Phi_2q_a3 E_dp.Phi_2q_a as Connection35
                connect Phi_2q_a_M.in Junction11 as Connection142
                connect Phi_d_a4 w_m.Phi_d_a as Connection30
                connect Phi_q_a4 w_m.Phi_q_a as Connection25
                connect T_M w_m.T_M as Connection52
                connect T_m_M.in Junction9 as Connection136
                connect w_m.w_m2 Junction20 as Connection179
                connect w_m1 Junction21 as Connection182
                connect w_m_M.in Junction21 as Connection184
                connect "|V|2" "Exciter.|V|" as Connection55
                connect E_dp4 "Phi_q_a 2.E_dp" as Connection89
                connect E_qp4 "Phi_d_a 2.E_qp" as Connection97
                connect Phi_1d_a4 "Phi_d_a 2.Phi_1d_a" as Connection96
                connect Phi_2q_a4 "Phi_q_a 2.Phi_2q_a" as Connection88
                connect "Phi_d_a 2.Phi_d_a" Junction26 as Connection198
                connect Junction26 Phi_d_a_M.in as Connection199
                [
                    breakpoints = 8112, 8056; 8112, 8016
                ]
                connect Phi_d_a1 Junction26 as Connection200
                connect "Phi_q_a 2.Phi_q_a" Junction27 as Connection202
                connect Junction27 Phi_q_a1 as Connection203
                connect Phi_q_a_M.in Junction27 as Connection204
                connect I_q_a7 "Phi_q_a 2.I_q_a" as Connection205
                connect I_d_a7 "Phi_d_a 2.I_d_a" as Connection206
                connect Phi_d_a6 V_qG2.Phi_d_a as Connection110
                connect Phi_q_a6 V_qG2.Phi_q_a as Connection109
                connect w_e7 V_qG2.w_e as Connection111
                connect Phi_d_a5 V_dG2.Phi_d_a as Connection106
                connect Phi_q_a5 V_dG2.Phi_q_a as Connection107
                connect w_e6 V_dG2.w_e as Connection108
                connect Gain2.out "dq to abc1.q_input" as Connection208
                connect Constant1.out "dq to abc1.zero_input" as Connection211
                connect V_b "dq to abc1.phase_b" as Connection212
                connect V_c "dq to abc1.phase_c" as Connection213
                connect V_a "dq to abc1.phase_a" as Connection214
                connect Ea.p_node Ra.p_node as Connection224
                connect Eb.p_node Rb.p_node as Connection225
                connect Ec.p_node Rc.p_node as Connection226
                connect Ia1.p_node Ra.n_node as Connection237
                connect Rb.n_node Ib1.p_node as Connection238
                connect Rc.n_node Ic1.p_node as Connection240
                connect I_a Ia1.out as Connection242
                connect I_c Ic1.out as Connection244
                connect "abc to dq1.zero_axis" Termination1.in as Connection248
                [
                    breakpoints = 8816, 8472; 8904, 8472
                ]
                connect I_a1 "abc to dq1.va" as Connection249
                connect I_b1 "abc to dq1.vb" as Connection250
                connect I_c1 "abc to dq1.vc" as Connection251
                connect Ib1.out I_b as Connection253
                connect Ea.n_node Junction37 as Connection277
                connect Ea1.n_node Junction37 as Connection279
                connect Junction37 Junction38 as Connection280
                connect Eb.n_node Junction38 as Connection282
                connect Junction38 Junction39 as Connection286
                [
                    breakpoints = 8344, 9072
                ]
                connect Junction39 Eb1.n_node as Connection287
                [
                    breakpoints = 8568, 9072
                ]
                connect Junction40 Junction39 as Connection290
                connect Ec.n_node Junction40 as Connection291
                connect Junction41 Junction40 as Connection293
                connect Ec1.n_node Junction41 as Connection294
                connect Ea_G Ea1.out as Connection295
                connect Eb_G Eb1.out as Connection296
                connect Ec_G Ec1.out as Connection297
                connect magnitude.magnitude Junction46 as Connection326
                connect Junction46 "|V|1" as Connection327
                connect "|V|_M.in" Junction46 as Connection328
                connect S2.b_out V_bG as Connection349
                connect V_cG S2.c_out as Connection350
                connect Eb1.p_node Junction47 as Connection352
                connect Junction47 Ib1.n_node as Connection353
                [
                    breakpoints = 8568, 8904
                ]
                connect S2.b_in Junction47 as Connection354
                connect Ia1.n_node Junction48 as Connection356
                connect Junction48 S2.a_in as Connection357
                [
                    breakpoints = 8056, 8832; 9344, 8832
                ]
                connect Ea1.p_node Junction48 as Connection358
                connect Ic1.n_node Junction49 as Connection360
                connect Junction49 S2.c_in as Connection361
                connect Ec1.p_node Junction49 as Connection362
                connect Connect5 S2.ctrl_in as Connection363
                connect w_ref Governor.w_ref as Connection364
                connect w_m2 Governor.w_m as Connection365
                connect Governor.P_SV Engine.P_SV as Connection367
                connect V_ref Exciter.V_ref as Connection368
                connect V_qG2.V_qG Gain8.in as Connection377
                connect Gain8.out "dq to abc1.d_input" as Connection378
                connect V_dG2.V_d_a Gain9.in as Connection379
                connect Gain9.out Gain2.in as Connection380
                connect "abc to dq1.q_axis" Gain11.in as Connection381
                connect Gain11.out Gain6.in as Connection382
                connect Gain10.in "abc to dq1.d_axis" as Connection385
                connect V_a1 Ea.in as Connection390
                connect V_b1 Eb.in as Connection391
                connect V_c1 Ec.in as Connection392
                connect w_e8 Product1.in as Connection401
                connect Clock1.out Product1.in1 as Connection402
                connect Product1.out Junction52 as Connection404
                connect Junction52 "dq to abc1.wt" as Connection405
                connect Gain6.out Junction53 as Connection407
                connect Junction53 I_d_a as Connection408
                connect I_d_a1.in Junction53 as Connection409
                [
                    breakpoints = 9104, 8424; 9016, 8424
                ]
                connect Gain10.out Junction54 as Connection410
                connect Junction54 I_q_a as Connection411
                connect I_q_a1.in Junction54 as Connection412
                connect V_aG Junction55 as Connection413
                connect Junction55 S2.a_out as Connection414
                connect Va_G1.p_node Junction55 as Connection415
                connect ground Junction56 as Connection416
                connect Junction56 Junction41 as Connection417
                connect Va_G1.n_node Junction56 as Connection418
                connect From34 Current_abc_to_dq3.Ec as Connection421
                connect From33 Current_abc_to_dq3.Ea as Connection278
                connect From35 Current_abc_to_dq3.Eb as Connection422
                connect Gain7.in Current_abc_to_dq3.Ed as Connection438
                [
                    breakpoints = 8528, 8576
                ]
                connect Current_abc_to_dq3.Eq Gain12.in as Connection439
                [
                    breakpoints = 8528, 8672
                ]
                connect Goto28 Junction60 as Connection441
                connect Junction60 Gain12.out as Connection442
                connect Gain13.in Junction60 as Connection443
                connect Goto29 Junction61 as Connection444
                connect Junction61 Gain7.out as Connection445
                connect magnitude.q Junction62 as Connection447
                [
                    breakpoints = 8832, 8600
                ]
                connect Junction62 Junction61 as Connection448
                [
                    breakpoints = 8600, 8600
                ]
                connect E_q.in Junction62 as Connection449
                connect Gain13.out Junction63 as Connection450
                connect Junction63 magnitude.d as Connection451
                connect E_d.in Junction63 as Connection452
                connect Junction52 "abc to dq1.wt" as Connection453
                [
                    breakpoints = 8264, 8536; 8264, 8536; 8264, 8536; 8736, 8536
                ]
                connect Current_abc_to_dq3.wt theta_bus1 as Connection454
            }
            [
                position = 8392, 8256
                size = 96, 160
            ]

            component Subsystem 25A_auto_sync {
                layout = dynamic
                component gen_product Product4 {
                }
                [
                    position = 7992, 8016
                    hide_name = True
                ]

                component gen_sign Sign1 {
                }
                [
                    position = 7992, 7976
                    hide_name = True
                ]

                component gen_c_function "proportional difference signal" {
                    in_terminal_dimensions = "inherit;inherit;inherit"
                    in_terminal_dimensions_str = "sign inherit;df inherit;max_pds inherit"
                    in_terminal_labels = "[(\'sign\', True), (\'df\', True), (\'max_pds\', True)]"
                    in_terminal_properties = "real sign;real df;real max_pds;"
                    init_fnc = "/*Begin code section*/
df = 0;
pds = 0;
sign=0;
max_pds=0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "pds inherit"
                    out_terminal_labels = "[(\'pds\', True)]"
                    out_terminal_properties = "real pds;"
                    output_fnc = "/*Begin code section*/
if (df >= (3.5*max_slip)) {
    pds = max_pds;
}
else if ((df < (3.5*max_slip)) && (df >= 0)) {
    pds = (max_pds*df /(4*max_slip)) + (0.125*max_pds);
}
else if ((df < 0) && (df >= (-1*min_slip))) {
    pds = (max_pds/(4*max_slip))*min_slip;
    }
else if ((df < (-1*min_slip)) && (df > (-0.5*max_slip))) {
    pds = 0;
    }
else if ((df <= (-0.5*max_slip)) && (df > (-4*max_slip))) {
    pds = sign*(max_pds/(4*max_slip))*df;
    }
else    {pds = sign*max_pds;}
/*End code section*/"
                    parameters = "real max_slip;real min_slip;"
                }
                [
                    position = 8144, 8016
                    size = 112, 80
                ]

                component src_scada_input "Difference signal" {
                    def_value = "4"
                    execution_rate = "Ts"
                    max = "max_pds"
                    min = "0"
                    unit = ""
                }
                [
                    position = 7824, 8072
                ]

                component gen_sum Sum1 {
                    signs = "-+"
                }
                [
                    position = 7680, 7768
                    hide_name = True
                ]

                component gen_rel_op "Relational operator1" {
                    relational_op = "<"
                }
                [
                    position = 8056, 7792
                    hide_name = True
                ]

                component src_constant Constant1 {
                    execution_rate = "Ts"
                    value = "0.0556*np.pi"
                }
                [
                    position = 7992, 7816
                    hide_name = True
                ]

                component gen_abs Abs1 {
                }
                [
                    position = 7992, 7768
                    hide_name = True
                ]

                component gen_rel_op "Relational operator2" {
                    relational_op = ">"
                }
                [
                    position = 8056, 7872
                    hide_name = True
                ]

                component gen_rel_op "Relational operator3" {
                    relational_op = "<"
                }
                [
                    position = 8056, 7936
                    hide_name = True
                    scale = 1, -1
                ]

                component src_constant Constant2 {
                    execution_rate = "Ts"
                    value = "-1*max_slip"
                }
                [
                    position = 7992, 7888
                    hide_name = True
                ]

                component src_constant Constant3 {
                    execution_rate = "Ts"
                    value = "0"
                }
                [
                    position = 7992, 7920
                    hide_name = True
                ]

                component gen_logic_op "Logical operator1" {
                    inputs = "3"
                }
                [
                    position = 8208, 7832
                    hide_name = True
                ]

                component gen_abs Abs2 {
                }
                [
                    position = 7992, 7704
                    hide_name = True
                ]

                component gen_rel_op "Relational operator4" {
                    relational_op = "<"
                }
                [
                    position = 8056, 7680
                    hide_name = True
                    scale = 1, -1
                ]

                component src_constant Constant4 {
                    execution_rate = "Ts"
                    value = "0.005"
                }
                [
                    position = 7992, 7656
                    hide_name = True
                ]

                component gen_probe dtheta {
                }
                [
                    position = 8056, 7736
                ]

                component gen_product Product5 {
                }
                [
                    position = 7992, 8064
                    hide_name = True
                ]

                component gen_c_function confine_phase {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "dtheta inherit"
                    in_terminal_labels = "[(\'dtheta\', True)]"
                    in_terminal_properties = "real dtheta;"
                    init_fnc = "/*Begin code section*/
dtheta = 0;
dtheta_confined = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "dtheta_confined inherit"
                    out_terminal_labels = "[(\'dtheta_confined\', True)]"
                    out_terminal_properties = "real dtheta_confined;"
                    output_fnc = "/*Begin code section*/
if (dtheta > 3.14159265359) {//confine theta to +/- 2*pi;
    dtheta_confined = dtheta - 6.28318530718;
}
else{
    if (dtheta < -3.14159265359){
        dtheta_confined = dtheta + 6.28318530718;
    }
    else{
        dtheta_confined = dtheta;
    }
}
/*End code section*/"
                }
                [
                    position = 7832, 7768
                    size = 216, 48
                ]

                component gen_digital_probe V_diff {
                }
                [
                    position = 8208, 7664
                ]

                component gen_digital_probe theta_diff {
                }
                [
                    position = 8208, 7736
                ]

                component gen_digital_probe f_diff {
                }
                [
                    position = 8208, 7904
                ]

                component gen_logic_op "Logical operator2" {
                }
                [
                    position = 8128, 7904
                    hide_name = True
                ]

                port df {
                    label = "df"
                    position = left:4
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7824, 7928
                ]

                port pds {
                    label = "pds"
                    position = right:auto
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8320, 8016
                ]

                port Synch {
                    label = "Synch"
                    position = right:auto
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8272, 7832
                ]

                tag Connect5 {
                    value = "auto_sync"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7840, 8024
                    hide_name = True
                ]

                tag theta_bus1 {
                    value = "theta_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7592, 7792
                    hide_name = True
                ]

                tag theta_G {
                    value = "theta_G"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7592, 7744
                    hide_name = True
                ]

                tag dV {
                    value = "d|V|"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7592, 7704
                    hide_name = True
                ]

                junction Junction31 sp
                [
                    position = 7936, 7976
                ]

                junction Junction32 sp
                [
                    position = 7936, 7976
                ]

                junction Junction33 sp
                [
                    position = 7936, 7944
                ]

                junction Junction34 sp
                [
                    position = 7952, 7768
                ]

                junction Junction35 sp
                [
                    position = 7936, 8024
                ]

                junction Junction36 sp
                [
                    position = 8104, 7680
                ]

                junction Junction37 sp
                [
                    position = 8088, 7792
                ]

                junction Junction38 sp
                [
                    position = 8168, 7904
                ]

                connect Abs1.in Junction34 as Connection264
                connect Abs1.out "Relational operator1.in" as Connection238
                connect Abs2.out "Relational operator4.in" as Connection237
                connect Abs2.in dV as Connection236
                connect Connect5 Junction35 as Connection275
                connect Constant1.out "Relational operator1.in1" as Connection223
                connect Constant2.out "Relational operator2.in1" as Connection231
                connect Constant3.out "Relational operator3.in1" as Connection232
                connect Constant4.out "Relational operator4.in1" as Connection239
                connect "Difference signal.out" Product5.in1 as Connection274
                connect Junction31 df as Connection255
                connect Junction32 Junction31 as Connection258
                connect Junction33 Junction32 as Connection261
                connect Junction34 confine_phase.dtheta_confined as Connection267
                connect Junction35 Product4.in1 as Connection276
                connect Product4.in Junction32 as Connection257
                connect Product5.in Junction35 as Connection277
                connect "Relational operator2.in" Junction33 as Connection260
                connect "Relational operator3.in" Junction33 as Connection262
                connect Sign1.in Junction31 as Connection254
                connect Synch "Logical operator1.out" as Connection235
                connect confine_phase.dtheta Sum1.out as Connection268
                connect dtheta.in Junction34 as Connection266
                connect pds "proportional difference signal.pds" as Connection278
                connect "proportional difference signal.df" Product4.out as Connection269
                connect "proportional difference signal.max_pds" Product5.out as Connection273
                connect "proportional difference signal.sign" Sign1.out as Connection216
                connect theta_G Sum1.in as Connection39
                connect theta_bus1 Sum1.in1 as Connection40
                connect "Relational operator4.out" Junction36 as Connection279
                connect Junction36 "Logical operator1.in" as Connection280
                connect V_diff.in Junction36 as Connection281
                connect "Relational operator1.out" Junction37 as Connection282
                connect Junction37 "Logical operator1.in1" as Connection283
                [
                    breakpoints = 8088, 7792; 8088, 7832
                ]
                connect theta_diff.in Junction37 as Connection284
                connect "Logical operator2.in" "Relational operator2.out" as Connection289
                [
                    breakpoints = 8088, 7896; 8088, 7872
                ]
                connect "Logical operator2.in1" "Relational operator3.out" as Connection290
                connect "Logical operator2.out" Junction38 as Connection292
                connect Junction38 "Logical operator1.in2" as Connection293
                connect f_diff.in Junction38 as Connection294
            }
            [
                position = 8344, 7928
                size = 64, 64
            ]

            component src_sine "Sinusoidal Source1" {
                execution_rate = "Ts"
                frequency = "60"
            }
            [
                position = 7456, 8096
                hide_name = True
            ]

            component src_sine "Sinusoidal Source2" {
                execution_rate = "Ts"
                frequency = "60"
                phase = "-120"
            }
            [
                position = 7456, 8152
                hide_name = True
            ]

            component src_sine "Sinusoidal Source3" {
                execution_rate = "Ts"
                frequency = "60"
                phase = "120"
            }
            [
                position = 7456, 8200
                hide_name = True
            ]

            component "core/Signal Controlled Voltage Source" Va_G {
            }
            [
                position = 8592, 8216
                rotation = right
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Vb_G {
            }
            [
                position = 8472, 8264
                rotation = right
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Vc_G {
            }
            [
                position = 8336, 8312
                rotation = right
                size = 64, 32
            ]

            component gen_gain Gain3 {
                gain = "V_DQ"
            }
            [
                position = 7544, 8096
                hide_name = True
            ]

            component gen_gain Gain4 {
                gain = "V_DQ"
            }
            [
                position = 7544, 8152
                hide_name = True
            ]

            component gen_gain Gain5 {
                gain = "V_DQ"
            }
            [
                position = 7544, 8200
                hide_name = True
            ]

            component Subsystem "BE1-25A Synchronizer" {
                layout = dynamic
                component gen_trigonometric "Trigonometric function2" {
                    trigonometric_fn = "atan2"
                }
                [
                    position = 7456, 8104
                    hide_name = True
                ]

                component gen_math_fnc "Mathematical function1" {
                    mathematical_fn = "sqrt"
                }
                [
                    position = 8312, 8224
                    hide_name = True
                ]

                component gen_limiter Limit2 {
                    lower_limit = "1e-12"
                }
                [
                    position = 7384, 8120
                    hide_name = True
                ]

                component src_constant Constant9 {
                    execution_rate = "Ts"
                    value = "5e-2"
                }
                [
                    position = 8456, 8224
                    hide_name = True
                ]

                component gen_c_function "BE1-25A Synchronizer1" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "dV inherit"
                    in_terminal_labels = "[(\'dV\', True)]"
                    in_terminal_properties = "real dV;"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "del_V inherit"
                    out_terminal_labels = "[(\'del_V\', True)]"
                    out_terminal_properties = "real del_V;"
                    output_fnc = "/*Begin code section*/
if (dV>max_slip)
{
    del_V = maxV_pds;
}
else if ((dV<=max_slip) && (dV>0))
{
    del_V = maxV_pds*dV/max_slip;
}
else if ((dV<=0) && (dV>-1*(max_slip-min_slip)))
{
    del_V = 0;
    //del_V = maxV_pds*dV/min_slip;
}
else if ((dV <= (-1*(max_slip-min_slip)))&&(dV > (-1*max_slip)))
{
    del_V= maxV_pds*(dV+(max_slip-min_slip))/min_slip;
}
else if (dV <= (-1*max_slip))
{
    del_V = -1*maxV_pds;
}
/*End code section*/"
                    parameters = "real Ts;real max_slip;real min_slip;real maxV_pds;"
                }
                [
                    position = 8336, 8616
                    hide_name = True
                    size = 96, 96
                ]

                component tm_delay "Unit Delay4" {
                    signal_out_type = "real"
                }
                [
                    position = 8664, 8664
                    hide_name = True
                ]

                component gen_abs Abs2 {
                }
                [
                    position = 8456, 8192
                    hide_name = True
                ]

                component gen_gain Gain4 {
                    gain = "1/w_0"
                }
                [
                    position = 7736, 8152
                    hide_name = True
                ]

                component src_scada_input "Connect MT" {
                    def_value = "1"
                    execution_rate = "Ts"
                    format = "uint"
                    max = "1"
                    min = "0"
                    signal_type = "uint"
                    unit = ""
                }
                [
                    position = 8688, 8152
                ]

                component gen_terminator Termination1 {
                }
                [
                    position = 7440, 8600
                    hide_name = True
                ]

                component gen_trigonometric "Trigonometric function1" {
                    trigonometric_fn = "atan2"
                }
                [
                    position = 7456, 8016
                    hide_name = True
                ]

                component gen_c_function "BE1-25A Synchronizer" {
                    in_terminal_dimensions = "inherit;inherit"
                    in_terminal_dimensions_str = "df inherit;angle_slip inherit"
                    in_terminal_labels = "[(\'df\', True), (\'angle_slip\', True)]"
                    in_terminal_properties = "real df;real angle_slip;"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "del_w inherit"
                    out_terminal_labels = "[(\'del_w\', True)]"
                    out_terminal_properties = "real del_w;"
                    output_fnc = "/*Begin code section*/
if (df>max_slip)
{
    del_w = 1.125*maxw_pds;
}
else if ((df<=max_slip) && (df>0))
{
    del_w = maxw_pds*df/max_slip + (0.125*maxw_pds);
    //del_w = maxw_pds*(df+1e-4)/max_slip + (angle_slip);
}
else if ((df<=0) && (df > (-min_slip)))
{
    del_w = (0.125*maxw_pds)*(df)/min_slip + (0.125*maxw_pds);
    //del_w = maxw_pds*((-1*df)+1e-4)/min_slip  + (angle_slip);
}
else if ((df <= (-1*min_slip))&&(df > (-1*max_slip)))
{
    del_w = 0;
    //del_w = maxw_pds*((min_slip)+1e-4)/min_slip  + (angle_slip);
}
else if (df <= (-1*max_slip))
{
    del_w = (max_slip+df)*maxw_pds/max_slip;
}
/*End code section*/"
                    parameters = "real Ts;real maxw_pds;real max_slip;real min_slip;"
                }
                [
                    position = 8120, 8392
                    hide_name = True
                    scale = 1, -1
                    size = 128, 112
                ]

                component gen_product Product1 {
                }
                [
                    position = 8160, 8192
                    hide_name = True
                ]

                component gen_c_function "Hold after connect" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit;MT_sync inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True), (\'MT_sync\', True)]"
                    in_terminal_properties = "real in;int connect;inherit MT_sync;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if ((connect==0)&&(MT_sync==1))
    var = in;
/*else
    var =0;*/
/*End code section*/"
                }
                [
                    position = 8336, 8416
                    hide_name = True
                    size = 96, 96
                ]

                component gen_sum Sum4 {
                }
                [
                    position = 8240, 8224
                    hide_name = True
                ]

                component gen_c_function "Hold after connect1" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit;inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit;MT_sync inherit;exc_state inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True), (\'MT_sync\', True), (\'exc_state\', True)]"
                    in_terminal_properties = "real in;int connect;inherit MT_sync;inherit exc_state;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if ((connect==0)&&(exc_state==1)&&(MT_sync==1))
    var = in;
/*else
    var =0;*/
/*End code section*/"
                }
                [
                    position = 8560, 8664
                    hide_name = True
                    size = 96, 136
                ]

                component gen_c_function "confine phase" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "in inherit"
                    in_terminal_labels = "[(\'in\', True)]"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
if (in > 0)
{
    if (in > (6.283185307179586/2))
        out = in - 6.283185307179586;
    else
        out = in;
}
if (in < 0)
{
    if (in < (-6.283185307179586/2))
        out = in + 6.283185307179586;
    else
        out = in;
}
/*End code section*/"
                }
                [
                    position = 7824, 8064
                    size = 56, 48
                ]

                component gen_sum Sum5 {
                }
                [
                    position = 7344, 8352
                    hide_name = True
                ]

                component gen_probe frequency_diff3 {
                }
                [
                    position = 7912, 8128
                    scale = -1, 1
                ]

                component gen_product Product4 {
                }
                [
                    position = 7264, 8384
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe3" {
                    override_signal_name = "True"
                    signal_name = "ang_sync3"
                }
                [
                    position = 8616, 7944
                    hide_name = True
                ]

                component src_constant Constant7 {
                    execution_rate = "Ts"
                    value = "1e-3"
                }
                [
                    position = 8088, 8112
                    hide_name = True
                ]

                component gen_sum Sum1 {
                    signs = "-+"
                }
                [
                    position = 7736, 8064
                    hide_name = True
                ]

                component gen_c_function "confine phase2" {
                    global_variables = "real x;real floor_in;"
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "in inherit"
                    in_terminal_labels = "[(\'in\', True)]"
                    init_fnc = "/*Begin code section*/
floor_in = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
x = in/6.283185307179586;
floor_in = floor(x);
out = in - (6.283185307179586*floor_in);
/*End code section*/"
                }
                [
                    position = 7640, 8104
                    hide_name = True
                    size = 56, 48
                ]

                component gen_product Product3 {
                }
                [
                    position = 7264, 8320
                    hide_name = True
                ]

                component tm_delay "Unit Delay2" {
                }
                [
                    position = 7608, 8624
                    rotation = right
                    hide_name = True
                ]

                component gen_sum Sum2 {
                    signs = "-+"
                }
                [
                    position = 7824, 8176
                    hide_name = True
                ]

                component gen_rel_op "Relational operator1" {
                    relational_op = ">"
                }
                [
                    position = 8160, 8056
                    hide_name = True
                ]

                component gen_rel_op "Relational operator4" {
                    relational_op = "<"
                }
                [
                    position = 8520, 8208
                    hide_name = True
                ]

                component gen_abs Abs4 {
                }
                [
                    position = 7904, 8064
                    hide_name = True
                ]

                component gen_gain Gain3 {
                    gain = "1/w_0"
                }
                [
                    position = 7736, 8200
                    hide_name = True
                ]

                component gen_probe volt_diff3 {
                }
                [
                    position = 8336, 8512
                ]

                component src_constant Constant6 {
                    execution_rate = "Ts"
                    value = "1e-3"
                }
                [
                    position = 8064, 8032
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe1" {
                    override_signal_name = "True"
                    signal_name = "gridconnect2"
                }
                [
                    position = 9016, 8200
                    hide_name = True
                ]

                component gen_logic_op "Logical operator2" {
                    inputs = "4"
                    operator = "NOT"
                }
                [
                    position = 8944, 8240
                    rotation = right
                    hide_name = True
                ]

                component gen_product Product2 {
                }
                [
                    position = 8160, 8256
                    hide_name = True
                ]

                component gen_gain Gain6 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7376, 8576
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe4" {
                    override_signal_name = "True"
                    signal_name = "freq_sync3"
                }
                [
                    position = 8616, 7992
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe5" {
                    override_signal_name = "True"
                    signal_name = "volt_sync3"
                }
                [
                    position = 8616, 8040
                    hide_name = True
                ]

                component gen_logic_op "Logical operator1" {
                    inputs = "3"
                }
                [
                    position = 8616, 8120
                    hide_name = True
                ]

                component gen_abs Abs5 {
                }
                [
                    position = 8056, 8128
                    hide_name = True
                ]

                component gen_probe angle_diff3 {
                }
                [
                    position = 8064, 7968
                ]

                component gen_sum Sum3 {
                    signs = "-+"
                }
                [
                    position = 8392, 8192
                    hide_name = True
                    scale = 1, -1
                ]

                component gen_gain Gain5 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7336, 8552
                    hide_name = True
                ]

                component tm_delay "Unit Delay3" {
                    signal_out_type = "real"
                }
                [
                    position = 8432, 8416
                    hide_name = True
                ]

                component gen_rel_op "Relational operator2" {
                    relational_op = ">"
                }
                [
                    position = 8160, 8120
                    hide_name = True
                ]

                component gen_c_function "confine phase1" {
                    global_variables = "real x;real floor_in;"
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "in inherit"
                    in_terminal_labels = "[(\'in\', True)]"
                    init_fnc = "/*Begin code section*/
floor_in = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
x = in/6.283185307179586;
floor_in = floor(x);
out = in - (6.283185307179586*floor_in);
/*End code section*/"
                }
                [
                    position = 7640, 8016
                    hide_name = True
                    size = 56, 48
                ]

                component Subsystem PLL {
                    layout = dynamic
                    component gen_pid_controller "PID controller1" {
                        controller_type = "PI"
                        enb_anti_windup_out = "True"
                        enb_output_limit_out = "True"
                        int_init_value = "2*np.pi*60"
                        ki = "2"
                        lower_sat_lim = "2*np.pi*59.5"
                        upper_sat_lim = "2*np.pi*60.5"
                    }
                    [
                        position = 8192, 8152
                        hide_name = True
                    ]

                    component gen_c_function "C function1" {
                        global_variables = "real var;"
                        in_terminal_dimensions = "inherit"
                        in_terminal_dimensions_str = "in inherit"
                        in_terminal_labels = "[(\'in\', True)]"
                        init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                        no_feed_inputs = "[\'\']"
                        no_feed_outputs = "[\'\']"
                        out_terminal_dimensions = "inherit"
                        out_terminal_dimensions_str = "out inherit"
                        out_terminal_labels = "[(\'out\', True)]"
                        output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                        parameters = "real Ts;"
                        update_fnc = "/*Begin code section*/
var += (Ts*in);
/*End code section*/"
                    }
                    [
                        position = 8304, 8152
                        hide_name = True
                        size = 80, 48
                    ]

                    component gen_c_function "confine phase" {
                        global_variables = "real x;real floor_in;"
                        in_terminal_dimensions = "inherit"
                        in_terminal_dimensions_str = "in inherit"
                        in_terminal_labels = "[(\'in\', True)]"
                        init_fnc = "/*Begin code section*/
floor_in = 0;
/*End code section*/"
                        no_feed_inputs = "[\'\']"
                        no_feed_outputs = "[\'\']"
                        out_terminal_dimensions = "inherit"
                        out_terminal_dimensions_str = "out inherit"
                        out_terminal_labels = "[(\'out\', True)]"
                        output_fnc = "/*Begin code section*/
x = in/6.283185307179586;
floor_in = floor(x);
out = in - (6.283185307179586*floor_in);
/*End code section*/"
                    }
                    [
                        position = 8408, 8152
                        size = 56, 48
                    ]

                    port wt {
                        label = "wt"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8496, 8152
                    ]

                    port w {
                        label = "w"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8304, 8208
                    ]

                    port q {
                        label = "q"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8064, 8152
                    ]

                    junction Junction1 sp
                    [
                        position = 8240, 8152
                    ]

                    connect w Junction1 as Connection19
                    connect "C function1.in" Junction1 as Connection17
                    connect wt "confine phase.out" as Connection14
                    connect "confine phase.in" "C function1.out" as Connection16
                    connect Junction1 "PID controller1.out" as Connection18
                    connect q "PID controller1.in" as Connection20
                }
                [
                    position = 7544, 8576
                    scale = 1, -1
                    size = 96, 56
                ]

                component gen_limiter Limit1 {
                    lower_limit = "1e-12"
                }
                [
                    position = 7384, 8032
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe6" {
                    override_signal_name = "True"
                    signal_name = "griddisconnect2"
                }
                [
                    position = 9016, 8272
                    hide_name = True
                ]

                component "core/abc to dq" "abc to dq1" {
                }
                [
                    position = 7264, 8576
                    size = 48, 80
                ]

                component gen_math_fnc "Mathematical function2" {
                    mathematical_fn = "sqrt"
                }
                [
                    position = 7416, 8352
                    hide_name = True
                ]

                component gen_probe Vd_G {
                }
                [
                    position = 7328, 8480
                    scale = -1, 1
                ]

                component gen_probe Vq_G {
                }
                [
                    position = 7432, 8472
                    scale = -1, 1
                ]

                component gen_probe del_w {
                }
                [
                    position = 8512, 8360
                ]

                component gen_probe del_V {
                }
                [
                    position = 8776, 8600
                ]

                component gen_c_function "stay connected1" {
                    global_variables = "real connect;"
                    in_terminal_dimensions = "inherit;inherit;inherit"
                    in_terminal_dimensions_str = "ready inherit;connectMT inherit;MTsync inherit"
                    in_terminal_labels = "[(\'ready\', True), (\'connectMT\', True), (\'MTsync\', True)]"
                    in_terminal_properties = "inherit ready;inherit connectMT;inherit MTsync;"
                    init_fnc = "/*Begin code section*/
connect = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    out_terminal_properties = "int out;"
                    output_fnc = "/*Begin code section*/
out = connect;
/*End code section*/"
                    parameters = "real Ts;"
                    update_fnc = "/*Begin code section*/
if ((ready==1)&&(connectMT==1)&&(MTsync==1)){
    connect = 1;
}
else if((connectMT==0)||(MTsync==0)){
    connect = 0;
}
/*End code section*/"
                }
                [
                    position = 8832, 8152
                    hide_name = True
                    size = 160, 104
                ]

                component src_constant Constant10 {
                    execution_rate = "Ts"
                    value = "0"
                }
                [
                    position = 8696, 8728
                    hide_name = True
                    scale = 1, -1
                ]

                tag From39 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8072, 8264
                    hide_name = True
                ]

                tag Connect3 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8440, 8648
                    hide_name = True
                ]

                tag From43 {
                    value = "Vd_G"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8312
                    hide_name = True
                ]

                tag w_bus1 {
                    value = "w_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7656, 8568
                    hide_name = True
                ]

                tag Vb_G1 {
                    value = "VbG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8560
                    hide_name = True
                ]

                tag "|V|1" {
                    value = "|V| bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7512, 8352
                    hide_name = True
                ]

                tag theta_bus {
                    value = "theta_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7656, 8656
                    hide_name = True
                ]

                tag theta_bus5 {
                    value = "dV"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8192, 8616
                    hide_name = True
                ]

                tag Goto2 {
                    value = "del_w"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8512, 8416
                    hide_name = True
                ]

                tag From42 {
                    value = "Vq_G"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8392
                    hide_name = True
                ]

                tag Goto32 {
                    value = "Vq_G"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7544, 8536
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto31 {
                    value = "del_V"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8776, 8664
                    hide_name = True
                ]

                tag Connect2 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8224, 8416
                    hide_name = True
                    size = 42, 20
                ]

                tag From44 {
                    value = "Vd_G"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8120
                    hide_name = True
                ]

                tag From45 {
                    value = "Vq_G"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8088
                    hide_name = True
                ]

                tag Goto30 {
                    value = "dV"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8504, 8160
                    hide_name = True
                ]

                tag Goto33 {
                    value = "Vd_G"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7440, 8552
                    hide_name = True
                    size = 60, 20
                ]

                tag Vc_G1 {
                    value = "VcG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8584
                    hide_name = True
                ]

                tag From41 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8032
                    hide_name = True
                ]

                tag Va_G1 {
                    value = "VaG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8536
                    hide_name = True
                ]

                tag From36 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8072, 8184
                    hide_name = True
                ]

                tag theta_bus2 {
                    value = "w_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7640, 8200
                    hide_name = True
                ]

                tag Connect1 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9008, 8152
                    hide_name = True
                ]

                tag From1 {
                    value = "|V| bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8312, 8184
                    hide_name = True
                ]

                tag From40 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8000
                    hide_name = True
                ]

                tag V_t9 {
                    value = "exc_state"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8440, 8712
                    hide_name = True
                ]

                tag MT_ON2 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8224, 8440
                    hide_name = True
                ]

                tag MT_ON3 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8440, 8680
                    hide_name = True
                ]

                tag MT_ON4 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8688, 8200
                    hide_name = True
                ]

                tag w_e7 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7640, 8152
                    hide_name = True
                ]

                junction Junction41 sp
                [
                    position = 7480, 8576
                ]

                junction Junction38 sp
                [
                    position = 8304, 8120
                ]

                junction Junction26 sp
                [
                    position = 8112, 8184
                ]

                junction Junction42 sp
                [
                    position = 7216, 8392
                ]

                junction Junction43 sp
                [
                    position = 7216, 8312
                ]

                junction Junction28 sp
                [
                    position = 8112, 8264
                ]

                junction Junction45 sp
                [
                    position = 7608, 8656
                ]

                junction Junction49 sp
                [
                    position = 7872, 8064
                ]

                junction Junction46 sp
                [
                    position = 7976, 8176
                ]

                junction Junction35 sp
                [
                    position = 8424, 8192
                ]

                junction Junction50 sp
                [
                    position = 8000, 8064
                ]

                junction Junction47 sp
                [
                    position = 7976, 8128
                ]

                junction Junction56 sp
                [
                    position = 8248, 8616
                ]

                junction Junction57 sp
                [
                    position = 7480, 8536
                ]

                junction Junction58 sp
                [
                    position = 7368, 8552
                ]

                junction Junction62 sp
                [
                    position = 8464, 8416
                ]

                junction Junction63 sp
                [
                    position = 8944, 8152
                ]

                junction Junction64 sp
                [
                    position = 8944, 8200
                ]

                junction Junction66 sp
                [
                    position = 8552, 8136
                ]

                junction Junction67 sp
                [
                    position = 8576, 8056
                ]

                junction Junction68 sp
                [
                    position = 8704, 8664
                ]

                connect "Digital Probe4.in" Junction38 as Connection366
                connect "confine phase2.out" Sum1.in1 as Connection399
                connect "Mathematical function2.out" "|V|1" as Connection436
                [
                    breakpoints = 7456, 8352
                ]
                connect From39 Junction28 as Connection259
                connect "abc to dq1.q_axis" Gain6.in as Connection319
                connect From41 Limit1.in as Connection285
                connect Sum3.in1 From1 as Connection81
                connect theta_bus2 Gain3.in as Connection241
                connect Vc_G1 "abc to dq1.vc" as Connection222
                connect angle_diff3.in Junction49 as Connection430
                connect Product2.out Sum4.in1 as Connection251
                connect Abs2.out "Relational operator4.in" as Connection84
                connect Connect2 "Hold after connect.connect" as Connection156
                connect Goto30 Junction35 as Connection308
                connect Gain3.out Sum2.in1 as Connection64
                connect "Mathematical function1.out" Sum3.in as Connection253
                connect Va_G1 "abc to dq1.va" as Connection224
                connect theta_bus Junction45 as Connection404
                connect Termination1.in "abc to dq1.zero_axis" as Connection29
                connect Junction50 Abs4.out as Connection432
                connect From45 "Trigonometric function2.in" as Connection401
                connect Junction47 Abs5.in as Connection421
                [
                    breakpoints = 7976, 8128; 7976, 8128
                ]
                connect Sum4.out "Mathematical function1.in" as Connection252
                connect "Hold after connect1.out" "Unit Delay4.in" as Connection355
                connect Product2.in Junction28 as Connection261
                connect Junction28 Product2.in1 as Connection260
                connect Constant7.out "Relational operator2.in" as Connection70
                connect Junction49 Abs4.in as Connection429
                connect Abs2.in Junction35 as Connection306
                connect From44 Limit2.in as Connection402
                connect "Hold after connect.in" "BE1-25A Synchronizer.del_w" as Connection408
                connect "Digital Probe6.in" "Logical operator2.out" as Connection454
                connect Junction26 From36 as Connection248
                connect Product1.in Junction26 as Connection247
                connect Junction46 "BE1-25A Synchronizer.df" as Connection414
                [
                    breakpoints = 7976, 8176
                ]
                connect Limit2.out "Trigonometric function2.in1" as Connection398
                connect Product3.out Sum5.in as Connection390
                connect Junction38 "Relational operator2.out" as Connection365
                [
                    breakpoints = 8288, 8120; 8288, 8120
                ]
                connect Product3.in Junction43 as Connection386
                connect Limit1.out "Trigonometric function1.in1" as Connection286
                connect From40 "Trigonometric function1.in" as Connection284
                connect Vb_G1 "abc to dq1.vb" as Connection223
                connect Sum2.out Junction46 as Connection413
                [
                    breakpoints = 7864, 8176
                ]
                connect "BE1-25A Synchronizer.angle_slip" Junction50 as Connection433
                connect "Relational operator2.in1" Abs5.out as Connection357
                connect From42 Junction42 as Connection384
                connect Junction43 From43 as Connection389
                connect Sum5.out "Mathematical function2.in" as Connection387
                connect Product3.in1 Junction43 as Connection391
                connect Gain6.out Junction41 as Connection381
                connect Junction35 Sum3.out as Connection307
                connect "confine phase.in" Sum1.out as Connection146
                connect Product4.out Sum5.in1 as Connection388
                connect "confine phase1.out" Sum1.in as Connection400
                connect Constant9.out "Relational operator4.in1" as Connection85
                connect PLL.w w_bus1 as Connection233
                connect Product4.in Junction42 as Connection385
                connect "confine phase.out" Junction49 as Connection428
                connect Junction45 "abc to dq1.wt" as Connection405
                connect Gain4.out Sum2.in as Connection62
                connect Product1.in1 Junction26 as Connection249
                connect "Hold after connect.out" "Unit Delay3.in" as Connection291
                connect Junction41 PLL.q as Connection382
                connect Connect3 "Hold after connect1.connect" as Connection354
                connect Constant6.out "Relational operator1.in" as Connection69
                connect Product1.out Sum4.in as Connection250
                connect Junction46 Junction47 as Connection420
                [
                    breakpoints = 7976, 8176; 7976, 8176
                ]
                connect "Unit Delay2.out" Junction45 as Connection406
                connect Junction42 Product4.in1 as Connection392
                connect "Logical operator1.in1" Junction38 as Connection364
                [
                    breakpoints = 8576, 8120
                ]
                connect "Relational operator1.in1" Junction50 as Connection431
                connect frequency_diff3.in Junction47 as Connection422
                connect Gain5.in "abc to dq1.d_axis" as Connection318
                connect theta_bus5 Junction56 as Connection464
                connect Junction56 "BE1-25A Synchronizer1.dV" as Connection465
                connect volt_diff3.in Junction56 as Connection466
                connect Goto32 Junction57 as Connection468
                connect Junction57 Junction41 as Connection469
                connect Vq_G.in Junction57 as Connection470
                connect Goto33 Junction58 as Connection471
                connect Junction58 Gain5.out as Connection472
                connect Vd_G.in Junction58 as Connection473
                connect PLL.wt "Unit Delay2.in" as Connection474
                connect MT_ON2 "Hold after connect.MT_sync" as Connection492
                connect V_t9 "Hold after connect1.exc_state" as Connection493
                connect MT_ON3 "Hold after connect1.MT_sync" as Connection494
                connect "Hold after connect1.in" "BE1-25A Synchronizer1.del_V" as Connection495
                connect "Unit Delay3.out" Junction62 as Connection499
                connect Junction62 Goto2 as Connection500
                [
                    breakpoints = 8472, 8416
                ]
                connect del_w.in Junction62 as Connection501
                connect "Connect MT.out" "stay connected1.connectMT" as Connection504
                connect Junction63 "stay connected1.out" as Connection507
                connect Connect1 Junction63 as Connection508
                connect "Logical operator2.in" Junction64 as Connection509
                connect Junction64 Junction63 as Connection510
                connect "Digital Probe1.in" Junction64 as Connection511
                connect MT_ON4 "stay connected1.MTsync" as Connection512
                connect w_e7 Gain4.in as Connection513
                connect "Logical operator1.in2" Junction66 as Connection530
                connect Junction66 "Relational operator4.out" as Connection531
                connect "Digital Probe5.in" Junction66 as Connection532
                connect "Relational operator1.out" Junction67 as Connection534
                connect Junction67 "Logical operator1.in" as Connection535
                connect "Digital Probe3.in" Junction67 as Connection536
                connect "Logical operator1.out" "stay connected1.ready" as Connection537
                connect Goto31 Junction68 as Connection539
                connect Junction68 "Unit Delay4.out" as Connection540
                connect del_V.in Junction68 as Connection541
                connect "Trigonometric function2.out" "confine phase2.in" as Connection542
                connect "Trigonometric function1.out" "confine phase1.in" as Connection543
            }
            [
                position = 8152, 7944
                size = 112, 144
            ]

            component sys_signal_switch "Signal switch2" {
                criterion = "ctrl != threshold"
                threshold = "1"
            }
            [
                position = 7976, 8096
                hide_name = True
                scale = 1, -1
            ]

            tag w_bus2 {
                value = "w_bus"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 7896, 8208
                hide_name = True
                scale = 1, -1
            ]

            tag V_d_a {
                value = "VbG"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 8552, 8264
                hide_name = True
                scale = -1, 1
            ]

            tag V_q_a {
                value = "VaG"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 8672, 8216
                hide_name = True
                scale = -1, 1
            ]

            tag V_d_a1 {
                value = "VbG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7640, 8152
                hide_name = True
            ]

            tag V_q_a1 {
                value = "VaG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7640, 8096
                hide_name = True
            ]

            tag V_q_a2 {
                value = "VcG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7640, 8200
                hide_name = True
            ]

            tag V_d_a2 {
                value = "VcG"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 8416, 8312
                hide_name = True
                scale = -1, 1
            ]

            tag From1 {
                value = "|V| bus"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 7896, 8080
                hide_name = True
            ]

            tag Connect6 {
                value = "MT_sync"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7576, 7888
                hide_name = True
            ]

            tag MT_ON1 {
                value = "MT_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 7896, 8272
                hide_name = True
            ]

            tag MT_ON2 {
                value = "MT_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 7896, 8144
                hide_name = True
            ]

            junction Junction45 pe
            [
                position = 8472, 8368
            ]

            junction Junction46 pe
            [
                position = 8336, 8368
            ]

            junction Junction47 sp
            [
                position = 7504, 7888
            ]

            junction Junction48 sp
            [
                position = 7504, 7888
            ]

            connect "MT_sync OFF.in" "Logical operator1.out" as Connection155
            connect Va_G.p_node "qd0(PU).V_aG" as Connection291
            connect Vb_G.p_node "qd0(PU).V_bG" as Connection293
            connect Va_G.n_node Junction45 as Connection294
            [
                breakpoints = 8592, 8368; 8472, 8368
            ]
            connect Vb_G.n_node Junction45 as Connection296
            connect Vc_G.p_node "qd0(PU).V_cG" as Connection297
            connect Junction45 Junction46 as Connection298
            [
                breakpoints = 8472, 8368
            ]
            connect Junction46 "qd0(PU).ground" as Connection299
            [
                breakpoints = 8184, 8368
            ]
            connect Vc_G.n_node Junction46 as Connection300
            connect V_q_a Va_G.in as Connection312
            connect V_d_a Vb_G.in as Connection313
            connect V_d_a2 Vc_G.in as Connection314
            connect V_q_a1 Gain3.out as Connection315
            connect V_d_a1 Gain4.out as Connection317
            connect V_q_a2 Gain5.out as Connection319
            connect "Sinusoidal Source2.out" Gain4.in as Connection325
            [
                breakpoints = 7504, 8152
            ]
            connect "Sinusoidal Source3.out" Gain5.in as Connection327
            [
                breakpoints = 7504, 8200
            ]
            connect "Sinusoidal Source1.out" Gain3.in as Connection328
            connect "Signal switch2.out" "qd0(PU).V_ref" as Connection333
            connect MT_sync.out Junction47 as Connection342
            connect Junction47 Connect6 as Connection343
            connect "Logical operator1.in" Junction48 as Connection345
            connect Junction48 Junction47 as Connection346
            connect "MT_sync ON.in" Junction48 as Connection347
            connect "Signal switch1.out" "qd0(PU).w_ref" as Connection351
            connect Constant1.out "Signal switch2.in" as Connection360
            connect From1 "Signal switch2.in1" as Connection361
            connect Constant2.out "Signal switch1.in" as Connection362
            connect w_bus2 "Signal switch1.in1" as Connection363
            connect MT_ON1 "Signal switch1.in2" as Connection365
            connect MT_ON2 "Signal switch2.in2" as Connection366

            maxV_pds = "1e-2"
            max_slip = "1e-4"
            maxw_pds = "1e-2"
            min_slip = "0.5e-4"

            mask {
                description = "<html><head><meta name=\"qrichtext\" content=\"1\"></meta><style type=\"text/css\">p, li { white-space: pre-wrap; }</style></head><body style=\"\"><p style=\"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\"><br></br></p></body></html>"

                S {
                    label = "Rated Power"
                    widget = edit
                    type = generic
                    default_value = "835e+6"
                    unit = "VA"
                    group = "1. Synchronous Machine"
                }

                V_ABC {
                    label = "Rated RMS Voltage"
                    widget = edit
                    type = generic
                    default_value = "26e+3/np.sqrt(3)"
                    unit = "V"
                    group = "1. Synchronous Machine"
                }

                w_0 {
                    label = "Nominal Frequency"
                    widget = edit
                    type = generic
                    default_value = "2*np.pi*60"
                    unit = "rad/s"
                    group = "1. Synchronous Machine"
                }

                pms {
                    label = "Pole-pairs"
                    widget = edit
                    type = generic
                    default_value = "1"
                    group = "1. Synchronous Machine"
                }

                Jm {
                    label = "Moment of Inertia"
                    widget = edit
                    type = generic
                    default_value = "0.0658e+6"
                    unit = "kg.m^2"
                    group = "1. Synchronous Machine"
                }

                Fc {
                    label = "Friction Coefficient"
                    widget = edit
                    type = generic
                    default_value = "0.5720"
                    unit = "N.m.s"
                    group = "1. Synchronous Machine"
                }

                R_g {
                    label = "Resistance"
                    widget = edit
                    type = generic
                    default_value = "0.2565"
                    unit = ""
                    group = "2. Electrical Line"
                }

                L_g {
                    label = "Inductance"
                    widget = edit
                    type = generic
                    default_value = "10e-3"
                    unit = "H"
                    group = "2. Electrical Line"
                }

                Rs {
                    label = "Armature Resistance"
                    widget = edit
                    type = generic
                    default_value = "2.43e-3"
                    unit = ""
                    group = "3. Windings"
                }

                Lls {
                    label = "Armature Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "4.0797e-04"
                    unit = "H"
                    group = "3. Windings"
                }

                Rf {
                    label = "Field Resistance"
                    widget = edit
                    type = generic
                    default_value = "7.5e-4"
                    unit = ""
                    group = "3. Windings"
                }

                Llfd {
                    label = "Field Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "3.0372e-04"
                    unit = "H"
                    group = "3. Windings"
                }

                Rkq1 {
                    label = "Damper q1 Resistance"
                    widget = edit
                    type = generic
                    default_value = "1.44e-3"
                    unit = ""
                    group = "3. Windings"
                }

                Llkq1 {
                    label = "Damper q1 Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0017"
                    unit = "H"
                    group = "3. Windings"
                }

                Rkq2 {
                    label = "Damper q2 Resistance"
                    widget = edit
                    type = generic
                    default_value = "6.81e-3"
                    unit = ""
                    group = "3. Windings"
                }

                Llkq2 {
                    label = "Damper q2 Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "2.0165e-04"
                    unit = "H"
                    group = "3. Windings"
                }

                Rkd {
                    label = "Damper d Resistance"
                    widget = edit
                    type = generic
                    default_value = "1.08e-2"
                    unit = ""
                    group = "3. Windings"
                }

                Llkd {
                    label = "Damper d Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "1.7446e-04"
                    unit = "H"
                    group = "3. Windings"
                }

                Lmq {
                    label = "q Mutual Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0035"
                    unit = "H"
                    group = "3. Windings"
                }

                Lmd {
                    label = "q Mutual Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0035"
                    unit = "H"
                    group = "3. Windings"
                }

                gov_Kp {
                    label = "Governor gain (gov_Kp)"
                    widget = edit
                    type = generic
                    default_value = "0.75"
                    group = "4. Governor and Engine"
                }

                K {
                    label = "Governor gain (K)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    group = "4. Governor and Engine"
                }

                R_D {
                    label = "Governor Droop"
                    widget = edit
                    type = generic
                    default_value = "0.1"
                    group = "4. Governor and Engine"
                }

                T_CH {
                    label = "Engine time constant"
                    widget = edit
                    type = generic
                    default_value = "24e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T1 {
                    label = "Time constant 1"
                    widget = edit
                    type = generic
                    default_value = "1.0e-4"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T2 {
                    label = "Time constant 2"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T3 {
                    label = "Time constant 3"
                    widget = edit
                    type = generic
                    default_value = "0.5001"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T4 {
                    label = "Time constant 4"
                    widget = edit
                    type = generic
                    default_value = "25e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T5 {
                    label = "Time constant 5"
                    widget = edit
                    type = generic
                    default_value = "9e-4"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T6 {
                    label = "Time constant 6"
                    widget = edit
                    type = generic
                    default_value = "5.74e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                K_A {
                    label = "Gain 1 (K_A)"
                    widget = edit
                    type = generic
                    default_value = "1"
                    group = "5. Exciter and Voltage Regulator"
                }

                K_E {
                    label = "Gain 2 (K_E)"
                    widget = edit
                    type = generic
                    default_value = "1"
                    group = "5. Exciter and Voltage Regulator"
                }

                K_F {
                    label = "Gain 3 (K_F)"
                    widget = edit
                    type = generic
                    default_value = "0.01"
                    group = "5. Exciter and Voltage Regulator"
                }

                S_E {
                    label = "Gain 4 (S_E)"
                    widget = edit
                    type = generic
                    default_value = "0"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_R_max {
                    label = "Saturation upper limit"
                    widget = edit
                    type = generic
                    default_value = "10"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_R_min {
                    label = "Saturation lower limit"
                    widget = edit
                    type = generic
                    default_value = "-10"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_A {
                    label = "Time constant 1 (T_A)"
                    widget = edit
                    type = generic
                    default_value = "2e-3"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_E {
                    label = "Time constant 2 (T_E)"
                    widget = edit
                    type = generic
                    default_value = "10e-6"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_F {
                    label = "Time constant 3 (T_F)"
                    widget = edit
                    type = generic
                    default_value = "200e-6"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_R {
                    label = "Time constant 4 (T_R)"
                    widget = edit
                    type = generic
                    default_value = "200e-6"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                Ts {
                    label = "Execution rate"
                    widget = edit
                    type = generic
                    default_value = "20e-6"
                    unit = "s"
                    group = "1. Synchronous Machine"
                }

                inner_w_rise {
                    label = "Governor (inner_w_rise)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    unit = "pu/s"
                    group = "4. Governor and Engine"
                }

                inner_w_fall {
                    label = "Governor (inner_w_fall)"
                    widget = edit
                    type = generic
                    default_value = "-10"
                    unit = "pu/s"
                    group = "4. Governor and Engine"
                }

                V_rise {
                    label = "Exciter (V_rise)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    unit = "pu/s"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_fall {
                    label = "Exciter (V_fall)"
                    widget = edit
                    type = generic
                    default_value = "-10"
                    unit = "pu/s"
                    group = "5. Exciter and Voltage Regulator"
                }

                exc_Kp {
                    label = "Exciter proportional gain"
                    widget = edit
                    type = generic
                    default_value = "0.01"
                    group = "5. Exciter and Voltage Regulator"
                }

                exc_Ki {
                    label = "Exciter integral gain"
                    widget = edit
                    type = generic
                    default_value = "0.1"
                    group = "5. Exciter and Voltage Regulator"
                }

                max_slip {
                    label = "Maximum slip"
                    widget = edit
                    type = generic
                    default_value = "1.6e-3"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                min_slip {
                    label = "Minimum slip"
                    widget = edit
                    type = generic
                    default_value = "1.6e-4"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                maxV_pds {
                    label = "Maximum difference signal (voltage)"
                    widget = edit
                    type = generic
                    default_value = "1e-1"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                maxw_pds {
                    label = "Maximum difference signal (frequency)"
                    widget = edit
                    type = generic
                    default_value = "1e-1"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                CODE open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE

                CODE init
                    S = mdl.get_property_value(mdl.prop(item_handle, "S"))
                    V_ABC = mdl.get_property_value(mdl.prop(item_handle, "V_ABC"))
                    w_0 = mdl.get_property_value(mdl.prop(item_handle, "w_0"))
                    pms = mdl.get_property_value(mdl.prop(item_handle, "pms"))
                    Jm = mdl.get_property_value(mdl.prop(item_handle, "Jm"))
                    Fc = mdl.get_property_value(mdl.prop(item_handle, "Fc"))
                    R_g = mdl.get_property_value(mdl.prop(item_handle, "R_g"))
                    L_g = mdl.get_property_value(mdl.prop(item_handle, "L_g"))
                    Rs = mdl.get_property_value(mdl.prop(item_handle, "Rs"))
                    Lls = mdl.get_property_value(mdl.prop(item_handle, "Lls"))
                    Rf = mdl.get_property_value(mdl.prop(item_handle, "Rf"))
                    Llfd = mdl.get_property_value(mdl.prop(item_handle, "Llfd"))
                    Rkq1 = mdl.get_property_value(mdl.prop(item_handle, "Rkq1"))
                    Llkq1 = mdl.get_property_value(mdl.prop(item_handle, "Llkq1"))
                    Rkq2 = mdl.get_property_value(mdl.prop(item_handle, "Rkq2"))
                    Llkq2 = mdl.get_property_value(mdl.prop(item_handle, "Llkq2"))
                    Rkd = mdl.get_property_value(mdl.prop(item_handle, "Rkd"))
                    Llkd = mdl.get_property_value(mdl.prop(item_handle, "Llkd"))
                    Lmq = mdl.get_property_value(mdl.prop(item_handle, "Lmq"))
                    Lmd = mdl.get_property_value(mdl.prop(item_handle, "Lmd"))
                    gov_Kp = mdl.get_property_value(mdl.prop(item_handle, "gov_Kp"))
                    K = mdl.get_property_value(mdl.prop(item_handle, "K"))
                    R_D = mdl.get_property_value(mdl.prop(item_handle, "R_D"))
                    T_CH = mdl.get_property_value(mdl.prop(item_handle, "T_CH"))
                    T1 = mdl.get_property_value(mdl.prop(item_handle, "T1"))
                    T2 = mdl.get_property_value(mdl.prop(item_handle, "T2"))
                    T3 = mdl.get_property_value(mdl.prop(item_handle, "T3"))
                    T4 = mdl.get_property_value(mdl.prop(item_handle, "T4"))
                    T5 = mdl.get_property_value(mdl.prop(item_handle, "T5"))
                    T6 = mdl.get_property_value(mdl.prop(item_handle, "T6"))
                    K_A = mdl.get_property_value(mdl.prop(item_handle, "K_A"))
                    K_E = mdl.get_property_value(mdl.prop(item_handle, "K_E"))
                    K_F = mdl.get_property_value(mdl.prop(item_handle, "K_F"))
                    S_E = mdl.get_property_value(mdl.prop(item_handle, "S_E"))
                    V_R_max = mdl.get_property_value(mdl.prop(item_handle, "V_R_max"))
                    V_R_min = mdl.get_property_value(mdl.prop(item_handle, "V_R_min"))
                    T_A = mdl.get_property_value(mdl.prop(item_handle, "T_A"))
                    T_E = mdl.get_property_value(mdl.prop(item_handle, "T_E"))
                    T_F = mdl.get_property_value(mdl.prop(item_handle, "T_F"))
                    T_R = mdl.get_property_value(mdl.prop(item_handle, "T_R"))
                    Ts = mdl.get_property_value(mdl.prop(item_handle, "Ts"))
                    inner_w_rise = mdl.get_property_value(mdl.prop(item_handle, "inner_w_rise"))
                    inner_w_fall = mdl.get_property_value(mdl.prop(item_handle, "inner_w_fall"))
                    V_rise = mdl.get_property_value(mdl.prop(item_handle, "V_rise"))
                    V_fall = mdl.get_property_value(mdl.prop(item_handle, "V_fall"))
                    exc_Kp = mdl.get_property_value(mdl.prop(item_handle, "exc_Kp"))
                    exc_Ki = mdl.get_property_value(mdl.prop(item_handle, "exc_Ki"))
                    max_slip = mdl.get_property_value(mdl.prop(item_handle, "max_slip"))
                    min_slip = mdl.get_property_value(mdl.prop(item_handle, "min_slip"))
                    maxV_pds = mdl.get_property_value(mdl.prop(item_handle, "maxV_pds"))
                    maxw_pds = mdl.get_property_value(mdl.prop(item_handle, "maxw_pds"))
                    
                    w_m = w_0/pms
                    
                    V_DQ = V_ABC*np.sqrt(2)
                    T_nom = S/w_m
                    I_DQ = (2*S)/(3*V_DQ)
                    Z_DQ = V_DQ/I_DQ
                    X_q = w_0*(Lls+Lmq)/Z_DQ
                    X_d = w_0*(Lls+Lmd)/Z_DQ
                    X_ls = w_0*Lls/Z_DQ
                    X_lfd = w_0*Llfd/Z_DQ
                    X_lkd = w_0*Llkd/Z_DQ
                    X_lkq1 = w_0*Llkq1/Z_DQ
                    X_lkq2 = w_0*Llkq2/Z_DQ
                    X_md = w_0*Lmd/Z_DQ
                    X_mq = w_0*Lmq/Z_DQ
                    X_fd = w_0*(Llfd+Lmd)/Z_DQ
                    X_kd = w_0*(Llkd+Lmd)/Z_DQ
                    X_kq1 = w_0*(Llkq1+Lmq)/Z_DQ
                    X_kq2 = w_0*(Llkq2+Lmq)/Z_DQ
                    R_fd = Rf/Z_DQ
                    R_kd = Rkd/Z_DQ
                    R_kq1 = Rkq1/Z_DQ
                    R_kq2 = Rkq2/Z_DQ
                    R_s = Rs/Z_DQ
                    
                    L_DQ = Z_DQ/w_0
                    C_DQ = 1/(Z_DQ*w_0)
                    
                    R_G = R_g/Z_DQ
                    X_G = L_g/L_DQ
                    
                    H = 0.5*Jm*(w_0*(2/pms))**2/S
                    D_FW = Fc*(w_m/T_nom)
                    
                    X_dp = X_d - (X_md**2/X_fd)
                    X_qp = X_q - (X_mq**2/X_kq1)
                    T_dop = X_fd/(w_0*R_fd)
                    T_qop = X_kq1/(w_0*R_kq1)
                    
                    X_dpp = X_ls + (X_md*(X_lkd*X_lfd/(X_lkd+X_lfd)))/(X_md+(X_lkd*X_lfd/(X_lkd+X_lfd)))
                    X_qpp = X_ls + (X_mq*X_lkq1*X_lkq2/(X_mq+X_lkq1+X_lkq2))
                    T_dopp = (1/(w_0*R_kd))*(X_lkd+(X_md*X_lfd/(X_md+X_lfd)))
                    T_qopp = (1/(w_0*R_kq1))*( X_lkq2+(X_mq*X_lkq1/(X_mq+X_lkq1)) )
                ENDCODE
            }
        }
        [
            position = 6544, 7976
            size = 400, 168
        ]
    }

    logically_deleted {
        "Microturbine.25A_auto_sync"
        "Microturbine.BE1-25A Synchronizer.Constant10"
    }

    default {
        gen_abs {
            execution_rate = "inherit"
        }

        gen_c_function {
            in_terminal_properties = "real in;"
            in_terminal_labels = ""
            out_terminal_properties = "real out;"
            out_terminal_labels = ""
            no_feed_inputs = ""
            no_feed_outputs = ""
            in_terminal_dimensions = ""
            in_terminal_dimensions_str = ""
            out_terminal_dimensions = ""
            out_terminal_dimensions_str = ""
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            execution_rate = "inherit"
        }

        gen_comparator {
            execution_rate = "inherit"
        }

        gen_differentiator {
            execution_rate = "inherit"
        }

        gen_digital_probe {
            override_signal_name = "False"
            signal_name = ""
            streaming_en = "False"
            addr = "0"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        gen_gain {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            execution_rate = "inherit"
        }

        gen_integrator {
            show_reset = "none"
            reset_type = "asynchronous"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }

        gen_limiter {
            upper_limit = "[\'inf\']"
            lower_limit = "[\'-inf\']"
            execution_rate = "inherit"
        }

        gen_logic_op {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }

        gen_math_fnc {
            mathematical_fn = "exponential"
            execution_rate = "inherit"
        }

        gen_pid_controller {
            controller_type = "PID"
            kp = "1"
            kp_source = "internal"
            ki = "1"
            ki_source = "internal"
            kd = "0"
            kd_source = "internal"
            filt_coef = "100"
            int_init_value = "0"
            filt_init_value = "0"
            enb_output_limit_out = "False"
            upper_sat_lim = "1"
            lower_sat_lim = "-1"
            enb_anti_windup_out = "False"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        gen_probe {
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            streaming_en = "False"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        gen_product {
            signs = "2"
            execution_rate = "inherit"
        }

        gen_rate_limiter {
            rising_limit = "1"
            falling_limit = "-1"
            execution_rate = "inherit"
        }

        gen_rel_op {
            relational_op = "=="
            execution_rate = "inherit"
        }

        gen_sign {
            execution_rate = "inherit"
        }

        gen_sum {
            signs = "2"
            execution_rate = "inherit"
        }

        gen_terminator {
            execution_rate = "inherit"
        }

        gen_trigonometric {
            trigonometric_fn = "sin"
            execution_rate = "inherit"
        }

        gen_z_domain_transfer {
            domain = "Z-domain"
            method = "Zero-order hold"
            b_coeff = "[1]"
            a_coeff = "[1,-1]"
            init_states = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        pas_resistor {
            resistance = "1"
        }

        src_clock {
            execution_rate = "100e-6"
        }

        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }

        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }

        src_scada_input {
            addr = "0"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }

        src_sine {
            amplitude = "1"
            dc_offset = "0"
            frequency = "50"
            phase = "0"
            execution_rate = "100e-6"
        }

        sys_signal_switch {
            criterion = "ctrl >= threshold"
            threshold = "0"
            execution_rate = "inherit"
        }

        tm_delay {
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        "core/Current Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/Signal Controlled Voltage Source" {
            execution_rate = "inherit"
        }

        "core/Triple Pole Single Throw Contactor" {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            enable_fb_out = "False"
            fb_out_type = "real"
            execution_rate = "inherit"
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
        }

        "core/Voltage Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/abc to dq" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            disable_filter = "True"
            initial_filter_output = "0"
            wn_LPFdq = "1000"
            execution_rate = "inherit"
        }

        "core/dq to abc" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            execution_rate = "0"
        }
    }
}
