version = 4.2

//
// Saved by sw version: 2020.1 SP2
// Save timestamp: 13-Jul-2020 @ 12:08:37 PM
//

model "mt_HO_salientrotor2_sauer_exciterERR" {
    configuration {
        hil_device = "HIL603"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = 2e-6
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = True
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "external memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "double precision"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
    }

    component Subsystem Root {
        component "core/Signal Controlled Voltage Source" Va_G {
        }
        [
            position = 7816, 8064
            rotation = right
            size = 64, 32
        ]

        component "core/Signal Controlled Voltage Source" Vb_G {
        }
        [
            position = 7712, 8112
            rotation = right
            size = 64, 32
        ]

        component "core/Signal Controlled Voltage Source" Vc_G {
        }
        [
            position = 7608, 8160
            rotation = right
            size = 64, 32
        ]

        component "core/RL Section" RL {
            inductance_per_l_mile = "1.6e-3"
            length_mile = "2"
            resistance_per_l_mile = "0.57"
        }
        [
            position = 7400, 7976
            size = 256, 56
        ]

        component "core/Constant Impedance Load" "Constant Impedance Load1" {
            SAB = "1000.0/3"
            SAn = "1000.0/3"
            SBC = "1000.0/3"
            SBn = "1000.0/3"
            SCA = "1000.0/3"
            SCn = "1000.0/3"
            Sn_3ph = "1.0e3"
            VAB = "V_G"
            VAn = "V_G/(3**0.5)"
            VBC = "V_G"
            VBn = "V_G/(3**0.5)"
            VCA = "V_G"
            VCn = "V_G/(3**0.5)"
            Vn_3ph = "V_G"
            enable_neutral = "True"
            pfA = "0.85"
            pfB = "0.85"
            pfC = "0.85"
            pf_3ph = "0.85"
        }
        [
            position = 6832, 8176
            hide_name = True
            size = 104, 152
        ]

        component src_sine "Sinusoidal Source1" {
            execution_rate = "Ts"
            frequency = "60"
        }
        [
            position = 7344, 8064
            hide_name = True
        ]

        component src_sine "Sinusoidal Source2" {
            execution_rate = "Ts"
            frequency = "60"
            phase = "-120"
        }
        [
            position = 7344, 8112
            hide_name = True
        ]

        component src_sine "Sinusoidal Source3" {
            execution_rate = "Ts"
            frequency = "60"
            phase = "120"
        }
        [
            position = 7344, 8160
            hide_name = True
        ]

        component gen_gain Gain3 {
            gain = "V_G*np.sqrt(2)/np.sqrt(3)"
        }
        [
            position = 7432, 8064
            hide_name = True
        ]

        component gen_gain Gain4 {
            gain = "V_G*np.sqrt(2)/np.sqrt(3)"
        }
        [
            position = 7432, 8160
            hide_name = True
        ]

        component gen_gain Gain5 {
            gain = "V_G*np.sqrt(2)/np.sqrt(3)"
        }
        [
            position = 7432, 8112
            hide_name = True
        ]

        component src_ground gnd1 {
        }
        [
            position = 7816, 8352
        ]

        component "core/Current Measurement" Ia1 {
        }
        [
            position = 6800, 8056
            rotation = right
            size = 64, 32
        ]

        component "core/Voltage Measurement" Va1 {
        }
        [
            position = 7920, 8136
            rotation = right
            size = 64, 32
        ]

        component gen_terminator Termination1 {
        }
        [
            position = 6496, 8216
        ]

        component "core/Triple Pole Single Throw Contactor" S2 {
            ctrl_src = "Model"
        }
        [
            position = 7112, 7976
            hide_name = True
            size = 64, 256
        ]

        component gen_logic_op "Logical operator1" {
            operator = "NOT"
        }
        [
            position = 6976, 7832
            rotation = right
            hide_name = True
        ]

        component gen_digital_probe "grid_connect OFF" {
        }
        [
            position = 7008, 7880
        ]

        component gen_digital_probe "grid_connect ON" {
        }
        [
            position = 7008, 7768
            rotation = down
            scale = -1, 1
        ]

        component src_scada_input grid_connect {
            execution_rate = "Ts"
            format = "int"
            max = "1"
            min = "0"
            signal_type = "int"
            unit = ""
        }
        [
            position = 6912, 7792
        ]

        component Subsystem Microturbine {
            layout = dynamic
            component src_constant Constant1 {
                execution_rate = "Ts"
            }
            [
                position = 5920, 7960
                hide_name = True
            ]

            component sys_signal_switch "Signal switch1" {
                criterion = "ctrl != threshold"
                threshold = "1"
            }
            [
                position = 6000, 8072
                hide_name = True
                scale = 1, -1
            ]

            component src_constant Constant2 {
                execution_rate = "Ts"
            }
            [
                position = 5920, 8088
                hide_name = True
            ]

            component sys_signal_switch "Signal switch2" {
                criterion = "ctrl != threshold"
                threshold = "1"
            }
            [
                position = 6000, 7944
                hide_name = True
                scale = 1, -1
            ]

            component "core/Signal Controlled Voltage Source" Ea {
            }
            [
                position = 5992, 8328
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Eb {
            }
            [
                position = 6568, 8368
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Ec {
            }
            [
                position = 7088, 8400
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component pas_resistor Ra {
                resistance = "Rs"
            }
            [
                position = 6072, 8216
            ]

            component pas_resistor Rb {
                resistance = "Rs"
            }
            [
                position = 6632, 8280
            ]

            component pas_resistor Rc {
                resistance = "Rs"
            }
            [
                position = 7144, 8336
            ]

            component "core/Current Measurement" Ia1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 6256, 8216
                size = 64, 32
            ]

            component "core/Current Measurement" Ib1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 6808, 8280
                size = 64, 32
            ]

            component "core/Current Measurement" Ic1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7312, 8336
                size = 64, 32
            ]

            component "core/Voltage Measurement" Ea1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 6312, 8328
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" Eb1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 6880, 8360
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" Ec1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7424, 8392
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" Ea_phi {
                execution_rate = "Ts"
            }
            [
                position = 5856, 8328
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" Eb_phi {
                execution_rate = "Ts"
            }
            [
                position = 6432, 8368
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" Ec_phi {
                execution_rate = "Ts"
            }
            [
                position = 6952, 8400
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" Va_G1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8392, 8232
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" Vb_G1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8280, 8328
                rotation = right
                size = 64, 32
            ]

            component "core/Voltage Measurement" Vc_G1 {
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8168, 8416
                rotation = right
                size = 64, 32
            ]

            component Subsystem "Three-phase Meter1" {
                layout = dynamic
                component gen_PQ_transform "Power Meter" {
                    enable_inst_ports = "False"
                    filter_order = "second order"
                }
                [
                    position = 7808, 8288
                ]

                component gen_probe POWER_P {
                }
                [
                    position = 8720, 7928
                ]

                component gen_probe POWER_Q {
                }
                [
                    position = 8720, 8008
                ]

                component gen_probe POWER_S {
                }
                [
                    position = 8720, 8088
                ]

                component gen_probe POWER_PF {
                }
                [
                    position = 8720, 8168
                ]

                component gen_product Product2 {
                }
                [
                    position = 8184, 8208
                    hide_name = True
                ]

                component gen_product Product3 {
                }
                [
                    position = 8184, 8288
                    hide_name = True
                ]

                component gen_sum Sum1 {
                    signs = "+-"
                }
                [
                    position = 8296, 8248
                    hide_name = True
                ]

                component gen_probe P_pu {
                }
                [
                    position = 8376, 8248
                ]

                component gen_product Product4 {
                }
                [
                    position = 8184, 8360
                    hide_name = True
                ]

                component gen_product Product5 {
                }
                [
                    position = 8184, 8440
                    hide_name = True
                ]

                component gen_sum Sum2 {
                    signs = "++"
                }
                [
                    position = 8296, 8400
                    hide_name = True
                ]

                component gen_probe Q_pu {
                }
                [
                    position = 8376, 8400
                ]

                tag Vb_G1 {
                    value = "VbG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8248
                    hide_name = True
                ]

                tag Vc_G1 {
                    value = "VcG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8272
                    hide_name = True
                ]

                tag Va_G1 {
                    value = "VaG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8224
                    hide_name = True
                ]

                tag I_a1 {
                    value = "I_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8304
                    hide_name = True
                ]

                tag I_b1 {
                    value = "I_b"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8328
                    hide_name = True
                ]

                tag I_c1 {
                    value = "I_c"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7704, 8352
                    hide_name = True
                ]

                tag fromPF4 {
                    value = "POWER_PF"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8624, 8168
                    size = 0, 0
                ]

                tag fromS4 {
                    value = "POWER_S"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8624, 8088
                    size = 0, 0
                ]

                tag fromP4 {
                    value = "POWER_P"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8624, 7928
                    size = 0, 0
                ]

                tag fromQ4 {
                    value = "POWER_Q"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8624, 8008
                    size = 0, 0
                ]

                tag GoToP {
                    value = "POWER_P"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7888, 8168
                    rotation = left
                ]

                tag GoToQ {
                    value = "POWER_Q"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7920, 8208
                    rotation = left
                ]

                tag GoToS {
                    value = "POWER_S"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7920, 8424
                    rotation = right
                ]

                tag GoToPF {
                    value = "POWER_PF"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7888, 8384
                    rotation = right
                ]

                tag From43 {
                    value = "Vd_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8096, 8192
                    hide_name = True
                ]

                tag From42 {
                    value = "Vq_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8080, 8272
                    hide_name = True
                ]

                tag I_d_a8 {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8072, 8304
                    hide_name = True
                ]

                tag I_q_a8 {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8088, 8224
                    hide_name = True
                ]

                junction Junction1 sp
                [
                    position = 8144, 8200
                ]

                junction Junction2 sp
                [
                    position = 8120, 8304
                ]

                junction Junction3 sp
                [
                    position = 8128, 8280
                ]

                junction Junction4 sp
                [
                    position = 8136, 8224
                ]

                connect Vb_G1 "Power Meter.vb" as Connection1
                connect "Power Meter.vc" Vc_G1 as Connection2
                connect "Power Meter.va" Va_G1 as Connection3
                connect I_a1 "Power Meter.ia" as Connection4
                connect I_b1 "Power Meter.ib" as Connection5
                connect I_c1 "Power Meter.ic" as Connection6
                connect "Power Meter.Pdc" GoToP as ConnPMPdc
                connect "Power Meter.Qdc" GoToQ as ConnPMQdc
                connect "Power Meter.apparent" GoToS as ConnPMS
                connect "Power Meter.k_factor" GoToPF as ConnPMPF
                connect fromP4 POWER_P.in as ConnPprobe
                connect fromQ4 POWER_Q.in as ConnQprobe
                connect fromS4 POWER_S.in as ConnSprobe
                connect fromPF4 POWER_PF.in as ConnPFprobe
                connect Product2.out Sum1.in as Connection809
                connect Product3.out Sum1.in1 as Connection810
                connect Sum1.out P_pu.in as Connection811
                connect Product4.out Sum2.in as Connection812
                connect Product5.out Sum2.in1 as Connection813
                connect Sum2.out Q_pu.in as Connection814
                connect Product2.in Junction1 as Connection835
                connect Junction1 From43 as Connection836
                connect Product4.in Junction1 as Connection837
                connect Product3.in1 Junction2 as Connection838
                connect Junction2 I_d_a8 as Connection839
                connect Product4.in1 Junction2 as Connection840
                connect Product3.in Junction3 as Connection841
                connect Junction3 From42 as Connection842
                connect Product5.in Junction3 as Connection843
                connect Product2.in1 Junction4 as Connection844
                connect Junction4 I_q_a8 as Connection845
                connect Product5.in1 Junction4 as Connection846
            }
            [
                position = 8320, 8120
                size = 48, 48
            ]

            component src_scada_input "Connect MT" {
                def_value = "1"
                execution_rate = "Ts"
                max = "1"
                min = "0"
                unit = ""
            }
            [
                position = 7592, 8072
            ]

            component src_scada_input "Connect MCB" {
                def_value = "1"
                execution_rate = "Ts"
                max = "1"
                min = "0"
                unit = ""
            }
            [
                position = 7592, 8136
            ]

            component Subsystem "qd0(PU)" {
                layout = dynamic
                component gen_gain Gain1 {
                    gain = "pms"
                }
                [
                    position = 7664, 8400
                    hide_name = True
                ]

                component gen_probe E_qp_M {
                }
                [
                    position = 7648, 7920
                ]

                component gen_probe Phi_1d_a_M {
                }
                [
                    position = 7664, 8088
                ]

                component gen_probe Phi_2q_a_M {
                }
                [
                    position = 8744, 8096
                    scale = -1, 1
                ]

                component gen_probe E_F_M {
                }
                [
                    position = 8744, 8232
                    scale = -1, 1
                ]

                component Subsystem Phi_1d_a {
                    layout = dynamic
                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_dp-X_ls"
                    }
                    [
                        position = 8024, 8224
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_dopp"
                    }
                    [
                        position = 8288, 8152
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8096, 8232
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8352, 8152
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+-"
                    }
                    [
                        position = 8208, 8152
                        hide_name = True
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8424, 8152
                    ]

                    port E_qp {
                        label = "E_qp"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8136, 8152
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8264
                    ]

                    junction Junction1 sp
                    [
                        position = 8392, 8152
                    ]

                    connect Constant1.out Product1.in as Connection26
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction1 as Connection31
                    connect Junction1 Phi_1d_a as Connection32
                    connect Product1.in1 I_d_a as Connection29
                    connect Product1.out Sum1.in2 as Connection27
                    connect Sum1.in1 E_qp as Connection30
                    connect Sum1.out Gain1.in as Connection25
                    connect Sum1.in Junction1 as Connection33
                    [
                        breakpoints = 8168, 8096; 8392, 8096
                    ]
                }
                [
                    position = 7528, 8136
                    size = 96, 64
                ]

                component Subsystem Phi_2q_a {
                    layout = dynamic
                    component gen_gain Gain1 {
                        gain = "1/T_qopp"
                    }
                    [
                        position = 8288, 8152
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8352, 8152
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "--"
                    }
                    [
                        position = 8208, 8152
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8096, 8232
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_qp-X_ls"
                    }
                    [
                        position = 8024, 8224
                        hide_name = True
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8424, 8152
                    ]

                    port I_q_a {
                        label = "I_q_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8264
                    ]

                    junction Junction1 sp
                    [
                        position = 8392, 8152
                    ]

                    connect Constant1.out Product1.in as Connection26
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction1 as Connection31
                    connect Junction1 Phi_2q_a as Connection32
                    connect Product1.in1 I_q_a as Connection29
                    connect Sum1.out Gain1.in as Connection25
                    connect Sum1.in Junction1 as Connection33
                    [
                        breakpoints = 8168, 8096; 8392, 8096
                    ]
                    connect Product1.out Sum1.in1 as Connection34
                }
                [
                    position = 8880, 8144
                    scale = -1, 1
                    size = 96, 64
                ]

                component Subsystem w_m {
                    layout = dynamic
                    component gen_product Product3 {
                    }
                    [
                        position = 8032, 8096
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8376, 8144
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8112, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain2 {
                        gain = "w_0/(2*H)"
                    }
                    [
                        position = 8312, 8144
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "+-"
                    }
                    [
                        position = 8112, 8144
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "pms/w_0"
                    }
                    [
                        position = 8032, 8248
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+--"
                    }
                    [
                        position = 8248, 8144
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "D_FW"
                    }
                    [
                        position = 7968, 8248
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8032, 8184
                        hide_name = True
                    ]

                    component gen_probe Tm {
                    }
                    [
                        position = 8272, 8056
                    ]

                    component gen_probe Te {
                    }
                    [
                        position = 8176, 8088
                    ]

                    port w_m2 {
                        label = "w_m"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8448, 8144
                    ]

                    port T_M {
                        label = "T_M"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8112, 8056
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8040
                    ]

                    port I_q_a {
                        label = "I_q_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8096
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = left:5
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8144
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7960, 8192
                    ]

                    tag w_m1 {
                        value = "w_m"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7968, 8280
                        hide_name = True
                    ]

                    tag w_m {
                        value = "w_m"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8456, 8240
                        hide_name = True
                    ]

                    junction Junction1 sp
                    [
                        position = 8416, 8144
                    ]

                    junction Junction2 sp
                    [
                        position = 8208, 8056
                    ]

                    junction Junction3 sp
                    [
                        position = 8144, 8144
                    ]

                    connect Constant1.out Gain1.in as Connection1
                    connect Gain1.out Product1.in as Connection2
                    connect Gain2.out Integrator1.in as Connection8
                    connect Integrator1.out Junction1 as Connection16
                    connect Junction1 w_m2 as Connection17
                    connect Product1.out Sum2.in2 as Connection6
                    connect Product2.in1 I_d_a as Connection10
                    connect Product2.in Phi_q_a as Connection13
                    connect Product2.out Sum1.in1 as Connection3
                    connect Product3.in1 I_q_a as Connection14
                    connect Product3.in Phi_d_a as Connection11
                    connect Product3.out Sum1.in as Connection4
                    connect Sum2.out Gain2.in as Connection7
                    connect w_m Junction1 as Connection18
                    connect w_m1 Product1.in1 as Connection9
                    connect Sum2.in Junction2 as Connection19
                    [
                        breakpoints = 8208, 8128; 8208, 8112; 8208, 8112; 8208, 8056; 8208, 8056
                    ]
                    connect Junction2 T_M as Connection20
                    [
                        breakpoints = 8208, 8056
                    ]
                    connect Tm.in Junction2 as Connection21
                    connect Sum1.out Junction3 as Connection22
                    connect Junction3 Sum2.in1 as Connection23
                    connect Te.in Junction3 as Connection24
                    [
                        breakpoints = 8144, 8112; 8144, 8144
                    ]
                }
                [
                    position = 7520, 8352
                    size = 160, 96
                ]

                component Subsystem E_qp {
                    layout = dynamic
                    component gen_product Product3 {
                    }
                    [
                        position = 8016, 8272
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "X_d-X_dp"
                    }
                    [
                        position = 8272, 8088
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8192, 8224
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "++-"
                    }
                    [
                        position = 8096, 8272
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_dp-X_dpp)/(X_dp-X_ls)**2"
                    }
                    [
                        position = 8096, 8200
                        hide_name = True
                    ]

                    component src_constant Constant3 {
                        execution_rate = "Ts"
                        value = "X_dp-X_ls"
                    }
                    [
                        position = 7936, 8248
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "--+"
                    }
                    [
                        position = 8448, 8112
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+-"
                    }
                    [
                        position = 8272, 8160
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8352, 8112
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8568, 8112
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_dop"
                    }
                    [
                        position = 8512, 8112
                        hide_name = True
                    ]

                    port E_qp3 {
                        label = "E_qp"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8632, 8112
                        hide_name = True
                    ]

                    port E_F {
                        label = "E_F"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8352, 8176
                    ]

                    port I_d_a {
                        label = "I_d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7816, 8152
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8024, 8208
                    ]

                    tag E_qp1 {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8352, 8056
                        hide_name = True
                    ]

                    tag E_qp2 {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8016, 8328
                        hide_name = True
                        size = 60, 20
                    ]

                    tag E_qp {
                        value = "E_qp"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8656, 8192
                        hide_name = True
                    ]

                    junction Junction2 sp
                    [
                        position = 7856, 8152
                    ]

                    junction Junction3 sp
                    [
                        position = 8600, 8112
                    ]

                    connect Constant1.out Product1.in as Connection3
                    connect Constant2.out Product2.in as Connection6
                    connect Constant3.out Product3.in as Connection19
                    connect E_qp Junction3 as Connection29
                    connect E_qp1 Sum1.in as Connection1
                    connect E_qp2 Sum3.in2 as Connection9
                    connect Gain1.in Sum1.out as Connection26
                    [
                        breakpoints = 8480, 8112
                    ]
                    connect Integrator1.in Gain1.out as Connection24
                    connect Integrator1.out Junction3 as Connection27
                    connect Junction2 I_d_a as Connection21
                    connect Junction3 E_qp3 as Connection28
                    connect Product1.out Sum1.in1 as Connection2
                    connect Product2.out Sum2.in1 as Connection5
                    connect Product3.in1 Junction2 as Connection22
                    connect Product3.out Sum3.in1 as Connection8
                    connect Sum1.in2 E_F as Connection13
                    connect Sum2.in Junction2 as Connection20
                    connect Sum2.out Product1.in1 as Connection4
                    connect Sum3.in Phi_1d_a as Connection15
                    connect Sum3.out Product2.in1 as Connection7
                }
                [
                    position = 7520, 8000
                    size = 96, 88
                ]

                component Subsystem Engine {
                    layout = dynamic
                    component gen_integrator Integrator1 {
                    }
                    [
                        position = 8272, 8192
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8112, 8192
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_CH"
                    }
                    [
                        position = 8192, 8192
                        hide_name = True
                    ]

                    port T_M2 {
                        label = "T_M"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8344, 8192
                    ]

                    port P_SV {
                        label = "P_SV"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8016, 8216
                    ]

                    tag T_M {
                        value = "T_M"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8368, 8264
                    ]

                    tag T_M1 {
                        value = "T_M"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8016, 8152
                        hide_name = True
                    ]

                    junction Junction1 sp
                    [
                        position = 8312, 8192
                    ]

                    connect Gain1.out Integrator1.in as Connection2
                    connect Integrator1.out Junction1 as Connection6
                    connect Junction1 T_M2 as Connection7
                    connect Sum1.out Gain1.in as Connection1
                    connect Sum1.in1 P_SV as Connection5
                    connect T_M Junction1 as Connection8
                    connect T_M1 Sum1.in as Connection3
                }
                [
                    position = 8440, 8272
                    size = 80, 56
                ]

                component Subsystem Exciter {
                    layout = dynamic
                    component gen_integrator Integrator2 {
                        show_reset = "either"
                    }
                    [
                        position = 8368, 8104
                        hide_name = True
                    ]

                    component gen_gain Gain4 {
                        gain = "1/T_F"
                    }
                    [
                        position = 8296, 8096
                        hide_name = True
                    ]

                    component gen_gain Gain8 {
                        gain = "K_A"
                    }
                    [
                        position = 8136, 8336
                        hide_name = True
                    ]

                    component gen_gain Gain2 {
                        gain = "K_E+S_E"
                    }
                    [
                        position = 8136, 7904
                        hide_name = True
                    ]

                    component gen_gain Gain7 {
                        gain = "K_A"
                    }
                    [
                        position = 8136, 8232
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "-+-+"
                    }
                    [
                        position = 8240, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain5 {
                        gain = "K_A*K_F/T_F"
                    }
                    [
                        position = 8136, 8296
                        hide_name = True
                    ]

                    component gen_gain Gain6 {
                        gain = "1/T_A"
                    }
                    [
                        position = 8296, 8264
                        hide_name = True
                    ]

                    component gen_gain Gain3 {
                        gain = "K_F/T_F"
                    }
                    [
                        position = 8136, 8128
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "1/T_E"
                    }
                    [
                        position = 8296, 7936
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8240, 7936
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "-+"
                    }
                    [
                        position = 8240, 8096
                        hide_name = True
                    ]

                    component gen_integrator Integrator1 {
                        limit_lower = "-2"
                        limit_upper = "2"
                        show_reset = "either"
                    }
                    [
                        position = 8368, 7944
                        hide_name = True
                    ]

                    component gen_integrator Integrator3 {
                        limit_lower = "V_R_min"
                        limit_output = "True"
                        limit_upper = "V_R_max"
                        show_reset = "either"
                    }
                    [
                        position = 8368, 8272
                        hide_name = True
                    ]

                    component sys_signal_switch "|V|1" {
                        criterion = "ctrl != threshold"
                        threshold = "1"
                    }
                    [
                        position = 7976, 8360
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "0"
                    }
                    [
                        position = 7872, 8344
                        hide_name = True
                    ]

                    component gen_probe V_R_M {
                    }
                    [
                        position = 8560, 8216
                    ]

                    component gen_rate_limiter "Rate Limit" {
                        falling_limit = "V_fall"
                        rising_limit = "V_rise"
                    }
                    [
                        position = 8024, 8360
                        hide_name = True
                    ]

                    component gen_probe E_t_M {
                    }
                    [
                        position = 8560, 8432
                    ]

                    component gen_integrator Integrator4 {
                        show_reset = "either"
                    }
                    [
                        position = 8368, 8496
                        hide_name = True
                    ]

                    component gen_sum Sum5 {
                        signs = "-+"
                    }
                    [
                        position = 8216, 8488
                        hide_name = True
                    ]

                    component gen_gain Gain9 {
                        gain = "1/(T_R)"
                    }
                    [
                        position = 8288, 8488
                        hide_name = True
                    ]

                    component gen_probe R_F_M {
                    }
                    [
                        position = 8560, 8048
                    ]

                    component gen_digital_probe "exciter ON" {
                    }
                    [
                        position = 7872, 8224
                    ]

                    component gen_logic_op "Logical operator1" {
                        operator = "NOT"
                    }
                    [
                        position = 7768, 8184
                        rotation = right
                        hide_name = True
                        scale = 1, -1
                    ]

                    component gen_digital_probe "exciter OFF" {
                    }
                    [
                        position = 7872, 8144
                    ]

                    component gen_sum Sum4 {
                        signs = "+-"
                    }
                    [
                        position = 7872, 8392
                        hide_name = True
                    ]

                    component gen_probe E_f_M {
                    }
                    [
                        position = 8448, 8032
                    ]

                    component Subsystem PI {
                        layout = dynamic
                        component gen_integrator Integrator1 {
                            limit_lower = "[\'-inf\']"
                            limit_upper = "[\'inf\']"
                            show_reset = "either"
                        }
                        [
                            position = 8216, 8232
                            hide_name = True
                        ]

                        component gen_gain Kp {
                            gain = "exc_Kp"
                        }
                        [
                            position = 7992, 8152
                        ]

                        component gen_sum Sum7 {
                        }
                        [
                            position = 8088, 8224
                            hide_name = True
                        ]

                        component gen_gain Kb {
                        }
                        [
                            position = 8216, 8312
                            scale = -1, 1
                        ]

                        component gen_sum Sum6 {
                            signs = "-+"
                        }
                        [
                            position = 8320, 8312
                            hide_name = True
                            scale = -1, 1
                        ]

                        component gen_gain Ki {
                            gain = "exc_Ki"
                        }
                        [
                            position = 7992, 8216
                        ]

                        component gen_sum Sum5 {
                        }
                        [
                            position = 8320, 8224
                            hide_name = True
                        ]

                        component gen_limiter Limit1 {
                            lower_limit = "-3"
                            upper_limit = "3"
                        }
                        [
                            position = 8408, 8224
                            hide_name = True
                        ]

                        port Out {
                            label = "Out"
                            position = right:1
                            kind = sp
                            direction =  in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8472, 8224
                        ]

                        port Reset {
                            label = "Reset"
                            position = top:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8144, 8264
                        ]

                        port In {
                            label = "In"
                            position = left:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7824, 8184
                        ]

                        junction Junction2 sp
                        [
                            position = 8368, 8224
                        ]

                        junction Junction3 sp
                        [
                            position = 8440, 8224
                        ]

                        junction Junction4 sp
                        [
                            position = 7928, 8184
                        ]

                        connect Integrator1.reset Reset as Connection2
                        connect Junction2 Limit1.in as Connection45
                        connect Junction3 Out as Connection48
                        connect Junction4 In as Connection57
                        connect Kb.in Sum6.out as Connection50
                        connect Ki.in Junction4 as Connection56
                        connect Ki.out Sum7.in as Connection54
                        connect Kp.in Junction4 as Connection58
                        connect Kp.out Sum5.in as Connection59
                        connect Limit1.out Junction3 as Connection47
                        connect Sum5.in1 Integrator1.out as Connection5
                        connect Sum5.out Junction2 as Connection44
                        connect Sum6.in Junction2 as Connection46
                        connect Sum6.in1 Junction3 as Connection49
                        connect Sum7.out Integrator1.in as Connection52
                        connect Sum7.in1 Kb.out as Connection53
                    }
                    [
                        position = 8504, 7944
                        size = 64, 48
                    ]

                    component gen_probe voltage_diff {
                    }
                    [
                        position = 8192, 8400
                    ]

                    port E_F4 {
                        label = "E_F"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8584, 7944
                    ]

                    port "|E|" {
                        label = "|E|"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8080, 8520
                        rotation = down
                        scale = -1, 1
                    ]

                    port E_ref {
                        label = "E_ref"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7776, 8368
                    ]

                    tag R_F2 {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8232
                        hide_name = True
                    ]

                    tag E_F1 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 7904
                        hide_name = True
                    ]

                    tag V_R {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8272
                        hide_name = True
                    ]

                    tag E_F3 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8296
                        hide_name = True
                    ]

                    tag V_t {
                        value = "E_t"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8496
                        hide_name = True
                    ]

                    tag E_F {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8504, 8000
                        hide_name = True
                    ]

                    tag V_R1 {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 7960
                        hide_name = True
                    ]

                    tag R_F {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8560, 8104
                        hide_name = True
                    ]

                    tag V_R2 {
                        value = "V_R"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 8200
                        hide_name = True
                    ]

                    tag E_F2 {
                        value = "E_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8040, 8128
                        hide_name = True
                    ]

                    tag R_F1 {
                        value = "R_F"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8136, 8072
                        hide_name = True
                    ]

                    tag V_t1 {
                        value = "E_t"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8080, 8456
                        hide_name = True
                    ]

                    tag V_t2 {
                        value = "E_t"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7776, 8416
                        hide_name = True
                    ]

                    tag V_t5 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 8320
                        hide_name = True
                    ]

                    tag V_t6 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8216, 8536
                        hide_name = True
                    ]

                    tag V_t7 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 8144
                        hide_name = True
                    ]

                    tag V_t8 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8240, 7984
                        hide_name = True
                    ]

                    tag V_t10 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7680, 8224
                        hide_name = True
                    ]

                    tag V_t11 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7872, 8312
                        hide_name = True
                    ]

                    tag V_t9 {
                        value = "exc_state"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8440, 7880
                        hide_name = True
                    ]

                    junction Junction4 sp
                    [
                        position = 8512, 8272
                    ]

                    junction Junction10 sp
                    [
                        position = 8512, 8496
                    ]

                    junction Junction12 sp
                    [
                        position = 8504, 8104
                    ]

                    junction Junction25 sp
                    [
                        position = 7768, 8224
                    ]

                    junction Junction26 sp
                    [
                        position = 8416, 8000
                    ]

                    junction Junction27 sp
                    [
                        position = 8416, 7944
                    ]

                    junction Junction28 sp
                    [
                        position = 8096, 8360
                    ]

                    connect Constant1.out "|V|1.in" as Connection42
                    connect E_F1 Gain2.in as Connection4
                    connect E_F2 Gain3.in as Connection7
                    connect E_F3 Gain5.in as Connection12
                    connect Gain1.out Integrator1.in as Connection1
                    connect Gain1.in Sum1.out as Connection2
                    connect Gain2.out Sum1.in as Connection3
                    connect Gain3.out Sum2.in1 as Connection8
                    connect Gain4.out Integrator2.in as Connection9
                    connect Gain5.out Sum3.in2 as Connection21
                    [
                        breakpoints = 8192, 8288; 8192, 8272
                    ]
                    connect Gain6.out Integrator3.in as Connection16
                    connect Gain7.out Sum3.in1 as Connection20
                    [
                        breakpoints = 8192, 8232; 8192, 8256
                    ]
                    connect Gain8.out Sum3.in3 as Connection22
                    connect Integrator4.in Gain9.out as Connection60
                    connect Junction10 Integrator4.out as Connection123
                    connect Junction12 Integrator2.out as Connection138
                    connect Junction4 Integrator3.out as Connection93
                    connect R_F Junction12 as Connection137
                    connect R_F1 Sum2.in as Connection6
                    connect R_F2 Gain7.in as Connection19
                    connect R_F_M.in Junction12 as Connection139
                    connect Sum2.out Gain4.in as Connection10
                    connect Sum3.out Gain6.in as Connection14
                    connect Sum5.out Gain9.in as Connection26
                    connect V_R Junction4 as Connection92
                    connect V_R1 Sum1.in1 as Connection5
                    connect V_R2 Sum3.in as Connection18
                    connect V_R_M.in Junction4 as Connection94
                    connect V_t Junction10 as Connection122
                    connect V_t1 Sum5.in as Connection25
                    connect E_t_M.in Junction10 as Connection124
                    connect "exciter OFF.in" "Logical operator1.out" as Connection155
                    connect V_t2 Sum4.in1 as Connection75
                    connect V_t5 Integrator3.reset as Connection200
                    connect V_t6 Integrator4.reset as Connection201
                    connect V_t7 Integrator2.reset as Connection202
                    connect V_t8 Integrator1.reset as Connection203
                    connect V_t10 Junction25 as Connection210
                    connect Junction25 "exciter ON.in" as Connection211
                    connect "Logical operator1.in" Junction25 as Connection212
                    connect V_t11 "|V|1.in2" as Connection213
                    connect Sum4.out "|V|1.in1" as Connection816
                    connect "|V|1.out" "Rate Limit.in" as Connection817
                    [
                        breakpoints = 8008, 8360
                    ]
                    connect E_F Junction26 as Connection818
                    connect E_f_M.in Junction26 as Connection820
                    connect Sum4.in E_ref as Connection1243
                    [
                        breakpoints = 7832, 8368
                    ]
                    connect "|E|" Sum5.in1 as Connection1244
                    connect V_t9 PI.Reset as Connection204
                    connect Integrator1.out Junction27 as Connection1251
                    connect Junction27 Junction26 as Connection1252
                    [
                        breakpoints = 8416, 7944; 8416, 7944; 8416, 8000
                    ]
                    connect PI.In Junction27 as Connection1253
                    connect PI.Out E_F4 as Connection1254
                    connect "Rate Limit.out" Junction28 as Connection1255
                    connect Junction28 Gain8.in as Connection1256
                    connect voltage_diff.in Junction28 as Connection1257
                }
                [
                    position = 8864, 8280
                    scale = -1, 1
                    size = 96, 64
                ]

                component "core/dq to abc" "dq to abc1" {
                    execution_rate = "inherit"
                }
                [
                    position = 8496, 8528
                    hide_name = True
                    size = 48, 80
                ]

                component gen_gain Gain2 {
                    gain = "-1"
                }
                [
                    position = 8288, 8512
                    hide_name = True
                ]

                component src_constant Constant1 {
                    execution_rate = "Ts"
                    value = "0"
                }
                [
                    position = 8224, 8544
                    hide_name = True
                ]

                component "core/abc to dq" "abc to dq1" {
                }
                [
                    position = 8832, 8584
                    size = 48, 80
                ]

                component gen_gain Gain6 {
                    gain = "-1"
                }
                [
                    position = 8968, 8584
                    hide_name = True
                ]

                component gen_terminator Termination1 {
                }
                [
                    position = 8904, 8624
                    hide_name = True
                ]

                component gen_gain Gain8 {
                    gain = "V_DQ"
                }
                [
                    position = 8288, 8448
                    hide_name = True
                ]

                component gen_gain Gain9 {
                    gain = "V_DQ"
                }
                [
                    position = 8224, 8512
                    hide_name = True
                ]

                component gen_gain Gain10 {
                    gain = "1/I_DQ"
                }
                [
                    position = 8904, 8552
                    hide_name = True
                ]

                component gen_gain Gain11 {
                    gain = "1/I_DQ"
                }
                [
                    position = 8904, 8584
                    hide_name = True
                ]

                component src_clock Clock1 {
                    execution_rate = "Ts"
                }
                [
                    position = 8128, 8696
                    hide_name = True
                ]

                component gen_product Product1 {
                }
                [
                    position = 8240, 8680
                    hide_name = True
                ]

                component gen_probe I_q_a1 {
                }
                [
                    position = 9056, 8504
                ]

                component gen_probe I_d_a1 {
                }
                [
                    position = 9056, 8584
                ]

                component sys_signal_switch "|V|3" {
                    criterion = "ctrl != threshold"
                    threshold = "1"
                }
                [
                    position = 9040, 8264
                    hide_name = True
                    scale = -1, 1
                ]

                component sys_signal_switch "|V|4" {
                    criterion = "ctrl != threshold"
                    threshold = "1"
                }
                [
                    position = 8064, 8256
                    hide_name = True
                ]

                component Subsystem Governor {
                    layout = dynamic
                    component gen_gain Gain36 {
                        gain = "1/T1"
                    }
                    [
                        position = 8248, 8160
                        hide_name = True
                    ]

                    component gen_sum Sum10 {
                        signs = "++"
                    }
                    [
                        position = 8160, 8248
                        hide_name = True
                    ]

                    component gen_gain Gain30 {
                        gain = "1/T1"
                    }
                    [
                        position = 8248, 8248
                        hide_name = True
                    ]

                    component gen_integrator Integrator12 {
                    }
                    [
                        position = 8680, 8456
                        hide_name = True
                    ]

                    component gen_gain Gain28 {
                        gain = "pms/w_0"
                    }
                    [
                        position = 7800, 8376
                        hide_name = True
                    ]

                    component gen_rate_limiter "Rate Limiter1" {
                        falling_limit = "inner_w_fall"
                        rising_limit = "inner_w_rise"
                    }
                    [
                        position = 7800, 8312
                        hide_name = True
                    ]

                    component Subsystem "Exciter Activation" {
                        layout = dynamic
                        component gen_abs Abs1 {
                        }
                        [
                            position = 8192, 8208
                            hide_name = True
                        ]

                        component gen_comparator Comparator1 {
                        }
                        [
                            position = 8264, 8232
                            hide_name = True
                            scale = 1, -1
                        ]

                        component src_constant Constant1 {
                            execution_rate = "Ts"
                            value = "4*maxw_slip"
                        }
                        [
                            position = 8192, 8256
                            hide_name = True
                        ]

                        component gen_probe Exc_state {
                        }
                        [
                            position = 8480, 8232
                        ]

                        component gen_probe "speed difference" {
                        }
                        [
                            position = 8096, 8144
                        ]

                        component gen_c_function "Activate Exciter" {
                            in_terminal_dimensions = "inherit"
                            in_terminal_dimensions_str = "boolean inherit"
                            in_terminal_labels = "[(\'boolean\', True)]"
                            in_terminal_properties = "inherit boolean;"
                            init_fnc = "/*Begin code section*/
Activate = 0;
/*End code section*/"
                            no_feed_inputs = "[\'\']"
                            no_feed_outputs = "[\'\']"
                            out_terminal_dimensions = "inherit"
                            out_terminal_dimensions_str = "Activate inherit"
                            out_terminal_labels = "[(\'Activate\', True)]"
                            out_terminal_properties = "int Activate;"
                            output_fnc = "/*Begin code section*/
if(boolean==1){
    Activate = 1;
}
/*End code section*/"
                        }
                        [
                            position = 8360, 8232
                            size = 112, 48
                        ]

                        component gen_sum Sum1 {
                            signs = "+-"
                        }
                        [
                            position = 8008, 8144
                            hide_name = True
                        ]

                        component src_constant Constant2 {
                            execution_rate = "Ts"
                        }
                        [
                            position = 7936, 8120
                            hide_name = True
                        ]

                        port w_PU {
                            label = "w_PU"
                            position = left:1
                            kind = sp
                            direction =  out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 7936, 8168
                        ]

                        tag V_t4 {
                            value = "exc_state"
                            scope = masked_subsystem
                            kind = sp
                            direction = in
                        }
                        [
                            position = 8480, 8176
                            hide_name = True
                        ]

                        junction Junction14 sp
                        [
                            position = 8048, 8144
                        ]

                        junction Junction15 sp
                        [
                            position = 8432, 8232
                        ]

                        connect Abs1.out Comparator1.in2 as Connection105
                        connect Constant1.out Comparator1.in1 as Connection18
                        connect w_PU Sum1.in1 as Connection199
                        connect "speed difference.in" Junction14 as Connection195
                        connect Junction14 Sum1.out as Connection196
                        connect Abs1.in Junction14 as Connection197
                        connect Constant2.out Sum1.in as Connection201
                        connect Exc_state.in Junction15 as Connection203
                        connect Junction15 "Activate Exciter.Activate" as Connection204
                        [
                            breakpoints = 8440, 8232; 8440, 8232
                        ]
                        connect V_t4 Junction15 as Connection205
                        connect Comparator1.out "Activate Exciter.boolean" as Connection206
                    }
                    [
                        position = 7896, 8376
                        size = 88, 48
                    ]

                    component gen_sum Sum7 {
                        signs = "+-"
                    }
                    [
                        position = 7896, 8320
                        hide_name = True
                    ]

                    component gen_sum Sum2 {
                        signs = "+-"
                    }
                    [
                        position = 7896, 8224
                        hide_name = True
                    ]

                    component gen_gain Gain29 {
                        gain = "R_D"
                    }
                    [
                        position = 7992, 8224
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                        signs = "-+"
                    }
                    [
                        position = 8376, 8240
                        hide_name = True
                    ]

                    component gen_gain Gain31 {
                        gain = "T3"
                    }
                    [
                        position = 7992, 8048
                        hide_name = True
                    ]

                    component gen_sum Sum4 {
                    }
                    [
                        position = 8072, 7992
                        hide_name = True
                    ]

                    component gen_gain Gain32 {
                        gain = "K*gov_Kp"
                    }
                    [
                        position = 8176, 7992
                        hide_name = True
                    ]

                    component gen_sum Sum5 {
                        signs = "+-"
                    }
                    [
                        position = 8288, 7976
                        hide_name = True
                    ]

                    component gen_gain Gain33 {
                        gain = "1/(T5+T6)"
                    }
                    [
                        position = 8408, 7976
                        hide_name = True
                    ]

                    component gen_sum Sum8 {
                        signs = "--"
                    }
                    [
                        position = 8512, 7952
                        hide_name = True
                    ]

                    component gen_gain Gain34 {
                        gain = "(T5+T6)/(T5*T6)"
                    }
                    [
                        position = 8608, 7952
                        hide_name = True
                    ]

                    component gen_gain Gain35 {
                        gain = "T4"
                    }
                    [
                        position = 7992, 7784
                        hide_name = True
                    ]

                    component gen_sum Sum9 {
                    }
                    [
                        position = 8064, 7760
                        hide_name = True
                    ]

                    component gen_integrator Integrator9 {
                    }
                    [
                        position = 8680, 8376
                        hide_name = True
                    ]

                    component gen_integrator Integrator10 {
                    }
                    [
                        position = 8696, 7952
                        hide_name = True
                    ]

                    component gen_integrator Integrator11 {
                    }
                    [
                        position = 8288, 7760
                        hide_name = True
                    ]

                    component src_scada_input AGC {
                        def_value = "0.05"
                        execution_rate = "Ts"
                        max = "2"
                        min = "-2"
                        unit = ""
                    }
                    [
                        position = 7768, 8216
                    ]

                    component gen_probe P_b2 {
                    }
                    [
                        position = 8568, 8480
                        scale = -1, 1
                    ]

                    component gen_probe P_a2 {
                    }
                    [
                        position = 8568, 8400
                        scale = -1, 1
                    ]

                    component gen_probe P_a1 {
                    }
                    [
                        position = 8776, 8400
                    ]

                    component gen_probe P_b1 {
                    }
                    [
                        position = 8776, 8480
                    ]

                    component gen_probe P_sv {
                    }
                    [
                        position = 8800, 7816
                    ]

                    component gen_probe frequency_diff {
                    }
                    [
                        position = 8376, 8320
                    ]

                    port w_ref {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7736, 8312
                    ]

                    port w_m3 {
                        label = "w_m"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7744, 8376
                    ]

                    port P_SV {
                        position = auto:auto
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8800, 7760
                    ]

                    tag From13 {
                        value = "P_b2"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8568, 8456
                        hide_name = True
                    ]

                    tag Goto6 {
                        value = "P_b1"
                        scope = masked_subsystem
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8776, 8456
                        hide_name = True
                    ]

                    tag From1 {
                        value = "P_SV"
                        scope = local
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7768, 8264
                        hide_name = True
                        size = 54, 20
                    ]

                    tag From3 {
                        value = "P_b1"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8160, 8160
                        hide_name = True
                    ]

                    tag Goto1 {
                        value = "P_b2"
                        scope = masked_subsystem
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8648, 8240
                        hide_name = True
                    ]

                    tag From5 {
                        value = "P_a2"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8568, 8376
                        hide_name = True
                    ]

                    tag Goto2 {
                        value = "P_a1"
                        scope = masked_subsystem
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8776, 8376
                        hide_name = True
                    ]

                    tag From6 {
                        value = "P_b2"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7888, 8048
                        hide_name = True
                    ]

                    tag From7 {
                        value = "P_b1"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7888, 7944
                        hide_name = True
                    ]

                    tag From8 {
                        value = "P_a1"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8176, 7928
                        hide_name = True
                    ]

                    tag From9 {
                        value = "P_a2"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 8400, 7928
                        hide_name = True
                    ]

                    tag Goto4 {
                        value = "P_a2"
                        scope = masked_subsystem
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8800, 7952
                        hide_name = True
                    ]

                    tag From10 {
                        value = "P_a2"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7888, 7784
                        hide_name = True
                    ]

                    tag From11 {
                        value = "P_a1"
                        scope = masked_subsystem
                        kind = sp
                        direction = out
                    }
                    [
                        position = 7888, 7736
                        hide_name = True
                    ]

                    tag Goto5 {
                        value = "P_SV"
                        scope = local
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8400, 7848
                        hide_name = True
                    ]

                    junction Junction3 sp
                    [
                        position = 7832, 8376
                    ]

                    junction Junction4 sp
                    [
                        position = 8352, 7760
                    ]

                    junction Junction5 sp
                    [
                        position = 8624, 8456
                    ]

                    junction Junction6 sp
                    [
                        position = 8624, 8376
                    ]

                    junction Junction7 sp
                    [
                        position = 8728, 8376
                    ]

                    junction Junction8 sp
                    [
                        position = 8728, 8456
                    ]

                    junction Junction9 sp
                    [
                        position = 8728, 7760
                    ]

                    junction Junction10 sp
                    [
                        position = 8120, 8320
                    ]

                    connect From3 Gain36.in as Connection748
                    connect Gain36.out Sum3.in as Connection749
                    connect Gain30.in Sum10.out as Connection751
                    connect Gain30.out Sum3.in1 as Connection752
                    connect Gain29.out Sum10.in as Connection753
                    connect Gain28.in w_m3 as Connection7
                    connect Sum2.out Gain29.in as Connection207
                    [
                        breakpoints = 7944, 8224
                    ]
                    connect From6 Gain31.in as Connection19
                    connect From7 Sum4.in as Connection21
                    connect Gain31.out Sum4.in1 as Connection22
                    connect Sum4.out Gain32.in as Connection23
                    connect Gain32.out Sum5.in1 as Connection24
                    connect From8 Sum5.in as Connection742
                    connect Sum5.out Gain33.in as Connection26
                    connect Gain33.out Sum8.in1 as Connection27
                    connect From9 Sum8.in as Connection28
                    connect Sum8.out Gain34.in as Connection29
                    connect Gain35.in From10 as Connection33
                    connect Gain35.out Sum9.in1 as Connection743
                    connect Sum9.in From11 as Connection744
                    [
                        breakpoints = 8024, 7736; 7936, 7736
                    ]
                    connect Integrator10.out Goto4 as Connection222
                    connect Gain34.out Integrator10.in as Connection223
                    connect Sum9.out Integrator11.in as Connection226
                    connect AGC.out Sum2.in as Connection230
                    connect From1 Sum2.in1 as Connection231
                    connect Sum3.out Goto1 as Connection788
                    connect Gain28.out Junction3 as Connection799
                    connect Junction3 Sum7.in1 as Connection800
                    [
                        breakpoints = 7832, 8376; 7832, 8344
                    ]
                    connect "Exciter Activation.w_PU" Junction3 as Connection801
                    connect Integrator11.out Junction4 as Connection821
                    connect Junction4 Goto5 as Connection822
                    [
                        breakpoints = 8352, 7760
                    ]
                    connect From13 Junction5 as Connection824
                    connect Junction5 Integrator12.in as Connection825
                    connect P_b2.in Junction5 as Connection826
                    connect From5 Junction6 as Connection827
                    connect Junction6 Integrator9.in as Connection828
                    connect P_a2.in Junction6 as Connection829
                    connect Integrator9.out Junction7 as Connection830
                    connect Junction7 Goto2 as Connection831
                    connect P_a1.in Junction7 as Connection832
                    connect Integrator12.out Junction8 as Connection833
                    connect Junction8 Goto6 as Connection834
                    connect P_b1.in Junction8 as Connection835
                    connect P_SV Junction9 as Connection836
                    connect Junction9 Junction4 as Connection837
                    connect P_sv.in Junction9 as Connection838
                    connect Sum7.in "Rate Limiter1.out" as Connection839
                    connect w_ref "Rate Limiter1.in" as Connection840
                    connect Sum7.out Junction10 as Connection841
                    connect Junction10 Sum10.in1 as Connection842
                    connect frequency_diff.in Junction10 as Connection843
                }
                [
                    position = 8264, 8272
                    size = 128, 72
                ]

                component gen_probe "|E|" {
                }
                [
                    position = 7648, 8488
                ]

                component Subsystem magnitude {
                    layout = dynamic
                    component gen_math_fnc "Mathematical function1" {
                        mathematical_fn = "sqrt"
                    }
                    [
                        position = 8272, 8192
                        hide_name = True
                    ]

                    component gen_product Product5 {
                    }
                    [
                        position = 8112, 8128
                        hide_name = True
                    ]

                    component gen_product Product6 {
                    }
                    [
                        position = 8112, 8256
                        hide_name = True
                    ]

                    component gen_sum Sum3 {
                    }
                    [
                        position = 8192, 8192
                        hide_name = True
                    ]

                    port q {
                        label = "q"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8032, 8120
                    ]

                    port d {
                        label = "d"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8032, 8248
                    ]

                    port magnitude {
                        label = "magnitude"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8344, 8192
                    ]

                    junction Junction1 sp
                    [
                        position = 8064, 8248
                    ]

                    junction Junction2 sp
                    [
                        position = 8064, 8120
                    ]

                    connect Junction1 Product6.in as Connection149
                    connect Junction2 q as Connection152
                    connect "Mathematical function1.out" magnitude as Connection146
                    connect Product5.in Junction2 as Connection151
                    connect Product5.in1 Junction2 as Connection153
                    connect Product5.out Sum3.in as Connection56
                    connect Product6.in1 Junction1 as Connection150
                    connect Product6.out Sum3.in1 as Connection143
                    connect Sum3.out "Mathematical function1.in" as Connection58
                    connect d Junction1 as Connection148
                }
                [
                    position = 7512, 8544
                    hide_name = True
                    size = 80, 48
                ]

                component gen_probe Ed_phi {
                }
                [
                    position = 8224, 8616
                    rotation = down
                    scale = -1, 1
                ]

                component gen_probe Eq_phi {
                }
                [
                    position = 8224, 8408
                ]

                component src_scada_input Vref {
                    def_value = "1"
                    execution_rate = "Ts"
                    max = "2"
                    min = "0.8"
                    unit = "pu"
                }
                [
                    position = 9112, 8296
                    scale = -1, 1
                ]

                component src_scada_input wref {
                    def_value = "1"
                    execution_rate = "Ts"
                    max = "1.3"
                    min = "0.7"
                    unit = "rad/s"
                }
                [
                    position = 8000, 8288
                ]

                component gen_probe w_M {
                }
                [
                    position = 7744, 8296
                ]

                component gen_gain Gain16 {
                    gain = "60/(2*np.pi)"
                }
                [
                    position = 7664, 8296
                    hide_name = True
                ]

                component gen_probe "|V|" {
                }
                [
                    position = 8984, 8384
                ]

                component gen_gain Gain17 {
                    gain = "V_ABC*np.sqrt(3)/1000"
                }
                [
                    position = 8936, 8336
                    rotation = right
                    hide_name = True
                ]

                component src_constant Constant3 {
                    execution_rate = "Ts"
                    value = "0"
                }
                [
                    position = 9176, 8584
                    hide_name = True
                ]

                component Subsystem Eq_phi1 {
                    layout = dynamic
                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_dp-X_dpp)/(X_dp-X_ls)"
                    }
                    [
                        position = 8080, 8152
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "(X_dpp-X_ls)/(X_dp-X_ls)"
                    }
                    [
                        position = 8080, 8256
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8192, 8280
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "++"
                    }
                    [
                        position = 8304, 8224
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8192, 8176
                        hide_name = True
                    ]

                    port E_qp {
                        label = "E_qp"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8080, 8296
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8080, 8200
                    ]

                    port Eq_phi {
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8376, 8224
                    ]

                    connect Constant1.out Product1.in as Connection4
                    connect Constant2.out Product2.in as Connection5
                    connect E_qp Product1.in1 as Connection10
                    connect Product2.in1 Phi_1d_a as Connection9
                    connect Sum1.out Eq_phi as Connection18
                    connect Product2.out Sum1.in as Connection19
                    connect Product1.out Sum1.in1 as Connection20
                }
                [
                    position = 8080, 8032
                    size = 112, 72
                ]

                component Subsystem Ed_phi1 {
                    layout = dynamic
                    component gen_product Product2 {
                    }
                    [
                        position = 8144, 8224
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8272, 8272
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_qp-X_qpp)/(X_qp-X_ls)"
                    }
                    [
                        position = 8048, 8192
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "X_qpp-X_dpp"
                    }
                    [
                        position = 8144, 8320
                        hide_name = True
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8048, 8240
                    ]

                    port Ed_phi {
                        label = "Ed_phi"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8352, 8272
                    ]

                    port I_q_a {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8048, 8320
                    ]

                    connect Constant2.out Product2.in as Connection5
                    connect Ed_phi Sum1.out as Connection13
                    connect Product2.in1 Phi_2q_a as Connection9
                    connect I_q_a Gain1.in as Connection16
                    connect Product2.out Sum1.in as Connection17
                    connect Gain1.out Sum1.in1 as Connection18
                }
                [
                    position = 8544, 8032
                    scale = -1, 1
                    size = 112, 72
                ]

                component gen_probe Phi_d_a_M {
                }
                [
                    position = 8272, 7872
                ]

                component gen_probe Phi_q_a_M {
                }
                [
                    position = 8360, 7872
                    scale = -1, 1
                ]

                component Subsystem "Phi_q_a 2" {
                    layout = dynamic
                    component gen_product Product2 {
                    }
                    [
                        position = 8144, 8208
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-+"
                    }
                    [
                        position = 8256, 8168
                        hide_name = True
                    ]

                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_qp-X_qpp)/(X_qp-X_ls)"
                    }
                    [
                        position = 8040, 8184
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "X_qpp"
                    }
                    [
                        position = 8136, 8128
                        hide_name = True
                    ]

                    port Phi_2q_a {
                        label = "Phi_2q_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8232
                    ]

                    port Phi_q_a {
                        label = "Phi_q_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8336, 8168
                    ]

                    port I_q_a {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8128
                    ]

                    connect Constant2.out Product2.in as Connection5
                    connect Phi_q_a Sum1.out as Connection13
                    connect Product2.in1 Phi_2q_a as Connection9
                    connect I_q_a Gain1.in as Connection16
                    connect Gain1.out Sum1.in as Connection17
                    connect Product2.out Sum1.in1 as Connection18
                }
                [
                    position = 8544, 7912
                    scale = -1, 1
                    size = 128, 64
                ]

                component Subsystem "Phi_d_a 2" {
                    layout = dynamic
                    component src_constant Constant2 {
                        execution_rate = "Ts"
                        value = "(X_dp-X_dpp)/(X_dp-X_ls)"
                    }
                    [
                        position = 8040, 8184
                        hide_name = True
                    ]

                    component src_constant Constant1 {
                        execution_rate = "Ts"
                        value = "(X_dpp-X_ls)/(X_dp-X_ls)"
                    }
                    [
                        position = 8040, 8288
                        hide_name = True
                    ]

                    component gen_product Product1 {
                    }
                    [
                        position = 8144, 8312
                        hide_name = True
                    ]

                    component gen_sum Sum1 {
                        signs = "-++"
                    }
                    [
                        position = 8256, 8208
                        hide_name = True
                    ]

                    component gen_product Product2 {
                    }
                    [
                        position = 8144, 8208
                        hide_name = True
                    ]

                    component gen_gain Gain1 {
                        gain = "X_dpp"
                    }
                    [
                        position = 8144, 8120
                        hide_name = True
                    ]

                    port E_qp {
                        label = "E_qp"
                        position = left:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8328
                    ]

                    port Phi_1d_a {
                        label = "Phi_1d_a"
                        position = left:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8232
                    ]

                    port Phi_d_a {
                        label = "Phi_d_a"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 8208
                    ]

                    port I_d_a {
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8040, 8120
                    ]

                    connect Constant1.out Product1.in as Connection4
                    connect Constant2.out Product2.in as Connection5
                    connect E_qp Product1.in1 as Connection10
                    connect Phi_d_a Sum1.out as Connection13
                    connect Product2.in1 Phi_1d_a as Connection9
                    connect Product2.out Sum1.in1 as Connection14
                    connect Product1.out Sum1.in2 as Connection15
                    connect I_d_a Gain1.in as Connection16
                    connect Gain1.out Sum1.in as Connection17
                }
                [
                    position = 8080, 7912
                    size = 128, 64
                ]

                component gen_z_domain_transfer "Discrete Transfer Function1" {
                    a_coeff = "[1e-3,1]"
                    b_coeff = "[1 ]"
                    domain = "S-domain"
                }
                [
                    position = 7736, 8400
                    hide_name = True
                ]

                port w_ref {
                    label = "w_ref"
                    position = left:5
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8000, 8240
                ]

                port V_ref {
                    label = "V_ref"
                    position = left:3
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 9112, 8232
                    scale = -1, 1
                ]

                port "Reference control" {
                    label = "Ref_ctrl"
                    position = top:3
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7880, 8208
                ]

                tag w_m2 {
                    value = "w_m"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8120, 8288
                    hide_name = True
                ]

                tag T_M1 {
                    value = "T_M"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8544, 8272
                    hide_name = True
                ]

                tag T_M {
                    value = "T_M"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8304
                    hide_name = True
                ]

                tag w_m1 {
                    value = "w_m"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7744, 8352
                    hide_name = True
                ]

                tag E_F {
                    value = "E_F"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8280
                    hide_name = True
                    scale = -1, 1
                ]

                tag w_e1 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7824, 8400
                    hide_name = True
                ]

                tag "|V|2" {
                    value = "|E|"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8984, 8296
                    hide_name = True
                    scale = -1, 1
                ]

                tag Phi_d_a4 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8328
                    hide_name = True
                ]

                tag I_q_a6 {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 9040, 8144
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_qp1 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7648, 8000
                    hide_name = True
                ]

                tag I_q_a {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9056, 8552
                    hide_name = True
                ]

                tag E_qp3 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7424, 8120
                    hide_name = True
                ]

                tag Phi_q_a4 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8400
                    hide_name = True
                ]

                tag I_d_a5 {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8376
                    hide_name = True
                ]

                tag E_F1 {
                    value = "E_F"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7408, 7968
                    hide_name = True
                ]

                tag Phi_2q_a1 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8744, 8144
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_d_a3 {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7408, 8000
                    hide_name = True
                ]

                tag Phi_1d_a3 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7408, 8032
                    hide_name = True
                ]

                tag I_d_a2 {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7424, 8152
                    hide_name = True
                ]

                tag I_q_a4 {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8352
                    hide_name = True
                ]

                tag Phi_1d_a1 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 7664, 8136
                    hide_name = True
                ]

                tag I_d_a {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9056, 8632
                    hide_name = True
                ]

                tag Phi_2q_a4 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8672, 8048
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_q_a7 {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8672, 8016
                    hide_name = True
                    scale = -1, 1
                ]

                tag V_a {
                    value = "E_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8600, 8488
                    hide_name = True
                ]

                tag V_b {
                    value = "E_b"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8600, 8528
                    hide_name = True
                ]

                tag V_c {
                    value = "E_c"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8600, 8568
                    hide_name = True
                ]

                tag I_a1 {
                    value = "I_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8728, 8544
                    hide_name = True
                ]

                tag I_b1 {
                    value = "I_b"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8728, 8568
                    hide_name = True
                ]

                tag I_c1 {
                    value = "I_c"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8728, 8600
                    hide_name = True
                ]

                tag w_e8 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8136, 8656
                    hide_name = True
                ]

                tag "|V|5" {
                    value = "|E|"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7648, 8544
                    hide_name = True
                ]

                tag From41 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8520
                    hide_name = True
                ]

                tag From40 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7368, 8568
                    hide_name = True
                ]

                tag Phi_1d_a5 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7936, 8016
                    hide_name = True
                ]

                tag E_qp5 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7936, 8048
                    hide_name = True
                ]

                tag Eq_phi2 {
                    value = "Eq_phi"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8200, 8032
                    hide_name = True
                ]

                tag Ed_phi2 {
                    value = "Ed_phi"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8416, 8032
                    hide_name = True
                    scale = -1, 1
                ]

                tag Ed_phi3 {
                    value = "Ed_phi"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8096, 8512
                ]

                tag Eq_phi3 {
                    value = "Eq_phi"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8096, 8448
                ]

                tag Phi_d_a1 {
                    value = "Phi_d_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8272, 7936
                    hide_name = True
                ]

                tag Phi_q_a1 {
                    value = "Phi_q_a"
                    scope = local
                    kind = sp
                    direction = in
                }
                [
                    position = 8360, 7936
                    hide_name = True
                    scale = -1, 1
                ]

                tag Phi_2q_a5 {
                    value = "Phi_2q_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 8744, 7928
                    hide_name = True
                    scale = -1, 1
                ]

                tag E_qp4 {
                    value = "E_qp"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7872, 7944
                    hide_name = True
                ]

                tag Phi_1d_a4 {
                    value = "Phi_1d_a"
                    scope = local
                    kind = sp
                    direction = out
                }
                [
                    position = 7872, 7912
                    hide_name = True
                ]

                tag I_q_a8 {
                    value = "I_q_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8744, 7896
                    hide_name = True
                    scale = -1, 1
                ]

                tag I_d_a7 {
                    value = "I_d_a"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7872, 7880
                    hide_name = True
                ]

                junction Junction7 sp
                [
                    position = 7600, 8000
                ]

                junction Junction10 sp
                [
                    position = 7608, 8136
                ]

                junction Junction11 sp
                [
                    position = 8800, 8144
                ]

                junction Junction15 sp
                [
                    position = 8800, 8280
                ]

                junction Junction20 sp
                [
                    position = 7632, 8352
                ]

                junction Junction46 sp
                [
                    position = 7600, 8544
                ]

                junction Junction75 sp
                [
                    position = 7632, 8352
                ]

                junction Junction76 sp
                [
                    position = 8936, 8296
                ]

                junction Junction77 sp
                [
                    position = 8064, 8208
                ]

                junction Junction81 sp
                [
                    position = 8456, 8680
                ]

                junction Junction82 sp
                [
                    position = 8936, 8552
                ]

                junction Junction83 sp
                [
                    position = 9000, 8584
                ]

                junction Junction84 sp
                [
                    position = 8160, 8448
                ]

                junction Junction85 sp
                [
                    position = 8160, 8512
                ]

                junction Junction26 sp
                [
                    position = 8224, 7912
                ]

                junction Junction27 sp
                [
                    position = 8408, 7912
                ]

                connect E_F Junction15 as Connection161
                connect E_F1 E_qp.E_F as Connection53
                connect E_F_M.in Junction15 as Connection163
                connect E_qp.E_qp3 Junction7 as Connection128
                connect E_qp3 Phi_1d_a.E_qp as Connection34
                connect E_qp_M.in Junction7 as Connection130
                connect Junction10 Phi_1d_a1 as Connection138
                connect Junction11 Phi_2q_a.Phi_2q_a as Connection141
                connect Junction15 Exciter.E_F4 as Connection162
                connect Junction20 Gain1.in as Connection180
                connect Junction7 E_qp1 as Connection129
                connect Phi_1d_a.Phi_1d_a Junction10 as Connection137
                connect Phi_1d_a3 E_qp.Phi_1d_a as Connection36
                connect Phi_1d_a_M.in Junction10 as Connection139
                connect Phi_2q_a1 Junction11 as Connection140
                connect Phi_2q_a_M.in Junction11 as Connection142
                connect Phi_d_a4 w_m.Phi_d_a as Connection30
                connect Phi_q_a4 w_m.Phi_q_a as Connection25
                connect T_M w_m.T_M as Connection52
                connect w_m.w_m2 Junction20 as Connection179
                connect V_b "dq to abc1.phase_b" as Connection212
                connect V_c "dq to abc1.phase_c" as Connection213
                connect V_a "dq to abc1.phase_a" as Connection214
                connect I_a1 "abc to dq1.va" as Connection249
                connect I_b1 "abc to dq1.vb" as Connection250
                connect I_c1 "abc to dq1.vc" as Connection251
                connect Gain11.out Gain6.in as Connection382
                connect Clock1.out Product1.in1 as Connection402
                connect Termination1.in "abc to dq1.zero_axis" as Connection494
                connect V_ref "|V|3.in" as Connection531
                connect "|V|3.out" Exciter.E_ref as Connection532
                connect w_ref "|V|4.in" as Connection535
                connect Gain10.in "abc to dq1.d_axis" as Connection539
                connect Gain11.in "abc to dq1.q_axis" as Connection540
                connect I_d_a3 E_qp.I_d_a as Connection731
                connect I_d_a2 Phi_1d_a.I_d_a as Connection732
                connect I_q_a4 w_m.I_q_a as Connection735
                connect I_d_a5 w_m.I_d_a as Connection736
                connect Phi_2q_a.I_q_a I_q_a6 as Connection737
                connect Engine.P_SV Governor.P_SV as Connection742
                connect Governor.w_m3 w_m2 as Connection743
                connect Governor.w_ref "|V|4.out" as Connection744
                connect magnitude.magnitude Junction46 as Connection326
                connect Junction46 "|V|5" as Connection327
                connect "|E|.in" Junction46 as Connection328
                connect From41 magnitude.d as Connection745
                connect From40 magnitude.q as Connection746
                connect Gain2.in Gain9.out as Connection774
                connect Vref.out "|V|3.in1" as Connection775
                connect wref.out "|V|4.in1" as Connection776
                connect Gain16.out w_M.in as Connection777
                connect Junction20 Junction75 as Connection778
                connect Junction75 w_m1 as Connection779
                [
                    breakpoints = 7632, 8352; 7632, 8352
                ]
                connect Gain16.in Junction75 as Connection780
                connect "|V|2" Junction76 as Connection781
                connect Junction76 "Exciter.|E|" as Connection782
                connect "|V|.in" Gain17.out as Connection783
                connect Gain17.in Junction76 as Connection784
                connect Engine.T_M2 T_M1 as Connection785
                [
                    breakpoints = 8504, 8272
                ]
                connect "Reference control" Junction77 as Connection787
                connect Junction77 "|V|4.in2" as Connection788
                connect Junction77 "|V|3.in2" as Connection817
                [
                    breakpoints = 8064, 8208; 9040, 8208
                ]
                connect "abc to dq1.wt" Junction81 as Connection863
                [
                    breakpoints = 8792, 8680
                ]
                connect Junction81 Product1.out as Connection864
                [
                    breakpoints = 8320, 8680; 8320, 8680; 8320, 8680; 8320, 8680
                ]
                connect "dq to abc1.wt" Junction81 as Connection865
                connect "dq to abc1.zero_input" Constant1.out as Connection866
                [
                    breakpoints = 8456, 8544; 8256, 8544
                ]
                connect w_e8 Product1.in as Connection1256
                connect Gain8.out "dq to abc1.d_input" as Connection1257
                connect Gain2.out "dq to abc1.q_input" as Connection1258
                connect I_q_a1.in Junction82 as Connection1259
                connect Junction82 Gain10.out as Connection1260
                [
                    breakpoints = 8936, 8552; 8936, 8552; 8936, 8552; 8936, 8552
                ]
                connect I_q_a Junction82 as Connection1261
                connect I_d_a1.in Junction83 as Connection1262
                connect Junction83 Gain6.out as Connection1263
                [
                    breakpoints = 9008, 8584
                ]
                connect I_d_a Junction83 as Connection1264
                connect I_q_a7 Ed_phi1.I_q_a as Connection1267
                connect Phi_2q_a4 Ed_phi1.Phi_2q_a as Connection1268
                connect Phi_1d_a5 Eq_phi1.Phi_1d_a as Connection1269
                connect E_qp5 Eq_phi1.E_qp as Connection1270
                connect Eq_phi1.Eq_phi Eq_phi2 as Connection1271
                connect Ed_phi2 Ed_phi1.Ed_phi as Connection1272
                connect Eq_phi3 Junction84 as Connection1275
                connect Junction84 Gain8.in as Connection1276
                connect Eq_phi.in Junction84 as Connection1277
                connect Ed_phi3 Junction85 as Connection1278
                connect Junction85 Gain9.in as Connection1279
                connect Ed_phi.in Junction85 as Connection1280
                connect E_qp4 "Phi_d_a 2.E_qp" as Connection97
                connect Phi_1d_a4 "Phi_d_a 2.Phi_1d_a" as Connection96
                connect Phi_2q_a5 "Phi_q_a 2.Phi_2q_a" as Connection88
                connect "Phi_d_a 2.Phi_d_a" Junction26 as Connection198
                connect Junction26 Phi_d_a_M.in as Connection199
                [
                    breakpoints = 8224, 7912; 8224, 7872
                ]
                connect Phi_d_a1 Junction26 as Connection200
                connect "Phi_q_a 2.Phi_q_a" Junction27 as Connection202
                connect Junction27 Phi_q_a1 as Connection203
                connect Phi_q_a_M.in Junction27 as Connection204
                connect I_q_a8 "Phi_q_a 2.I_q_a" as Connection734
                connect I_d_a7 "Phi_d_a 2.I_d_a" as Connection738
                connect Gain1.out "Discrete Transfer Function1.in" as Connection1281
                connect "Discrete Transfer Function1.out" w_e1 as Connection1282
            }
            [
                position = 6120, 8008
                size = 96, 160
            ]

            component src_scada_input ref_ctrl {
                execution_rate = "Ts"
                format = "int"
                max = "1"
                min = "0"
                signal_type = "int"
                unit = ""
            }
            [
                position = 5920, 7816
            ]

            component Subsystem "BE1-25A Synchronizer" {
                layout = dynamic
                component gen_trigonometric "Trigonometric function2" {
                    trigonometric_fn = "atan2"
                }
                [
                    position = 7456, 8088
                    hide_name = True
                ]

                component gen_math_fnc "Mathematical function1" {
                    mathematical_fn = "sqrt"
                }
                [
                    position = 8312, 8224
                    hide_name = True
                ]

                component gen_limiter Limit2 {
                    lower_limit = "1e-12"
                }
                [
                    position = 7384, 8104
                    hide_name = True
                ]

                component src_constant Constant9 {
                    execution_rate = "Ts"
                    value = "5e-2"
                }
                [
                    position = 8456, 8224
                    hide_name = True
                ]

                component gen_c_function "BE1-25A Synchronizer1" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "dV inherit"
                    in_terminal_labels = "[(\'dV\', True)]"
                    in_terminal_properties = "real dV;"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "del_V inherit"
                    out_terminal_labels = "[(\'del_V\', True)]"
                    out_terminal_properties = "real del_V;"
                    output_fnc = "/*Begin code section*/
if (dV>maxV_slip)
{
    del_V = maxV_pds;
}
else if ((dV<=maxV_slip) && (dV>0))
{
    del_V = maxV_pds*dV/maxV_slip;
}
else if ((dV<=0) && (dV>-1*(maxV_slip-minV_slip)))
{
    del_V = 0;
    //del_V = maxV_pds*dV/min_slip;
}
else if ((dV <= (-1*(maxV_slip-minV_slip)))&&(dV > (-1*maxV_slip)))
{
    del_V= maxV_pds*(dV+((maxV_slip-minV_slip)*1))/minV_slip;
}
else if (dV <= (-1*maxV_slip))
{
    del_V = -1*maxV_pds;
}
/*End code section*/"
                    parameters = "real Ts;real maxV_slip;real minV_slip;real maxV_pds;"
                }
                [
                    position = 8352, 8616
                    hide_name = True
                    size = 96, 96
                ]

                component gen_abs Abs2 {
                }
                [
                    position = 8456, 8192
                    hide_name = True
                ]

                component gen_gain Gain4 {
                    gain = "1/w_0"
                }
                [
                    position = 7736, 8176
                    hide_name = True
                ]

                component gen_terminator Termination1 {
                }
                [
                    position = 7440, 8600
                    hide_name = True
                ]

                component gen_trigonometric "Trigonometric function1" {
                    trigonometric_fn = "atan2"
                }
                [
                    position = 7456, 8000
                    hide_name = True
                ]

                component gen_product Product1 {
                }
                [
                    position = 8160, 8192
                    hide_name = True
                ]

                component gen_c_function "Hold after connect" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit;MT_sync inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True), (\'MT_sync\', True)]"
                    in_terminal_properties = "real in;int connect;inherit MT_sync;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if ((connect==0)&&(MT_sync==1))
    var = in;
else if (MT_sync==0)
    var =0;
/*End code section*/"
                }
                [
                    position = 8352, 8416
                    hide_name = True
                    size = 96, 96
                ]

                component gen_sum Sum4 {
                }
                [
                    position = 8240, 8224
                    hide_name = True
                ]

                component gen_c_function "Hold after connect1" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit;inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit;MT_sync inherit;exc_state inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True), (\'MT_sync\', True), (\'exc_state\', True)]"
                    in_terminal_properties = "real in;int connect;inherit MT_sync;inherit exc_state;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if ((connect==0)&&(exc_state==1)&&(MT_sync==1))
    var = in;
else if (MT_sync==0)
    var =0;
/*End code section*/"
                }
                [
                    position = 8576, 8664
                    hide_name = True
                    size = 96, 136
                ]

                component gen_c_function "confine phase" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "in inherit"
                    in_terminal_labels = "[(\'in\', True)]"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
if (in > 0)
{
    if (in > (6.283185307179586/2))
        out = in - 6.283185307179586;
    else
        out = in;
}
if (in < 0)
{
    if (in < (-6.283185307179586/2))
        out = in + 6.283185307179586;
    else
        out = in;
}
/*End code section*/"
                }
                [
                    position = 7824, 8048
                    size = 56, 48
                ]

                component gen_sum Sum5 {
                }
                [
                    position = 7344, 8352
                    hide_name = True
                ]

                component gen_probe frequency_diff3 {
                }
                [
                    position = 7920, 8128
                    scale = -1, 1
                ]

                component gen_product Product4 {
                }
                [
                    position = 7264, 8384
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe3" {
                    override_signal_name = "True"
                    signal_name = "ang_sync3"
                }
                [
                    position = 8616, 8040
                    hide_name = True
                ]

                component src_constant Constant7 {
                    execution_rate = "Ts"
                    value = "1e-3"
                }
                [
                    position = 8088, 8112
                    hide_name = True
                ]

                component gen_sum Sum1 {
                    signs = "-+"
                }
                [
                    position = 7736, 8048
                    hide_name = True
                ]

                component gen_product Product3 {
                }
                [
                    position = 7264, 8320
                    hide_name = True
                ]

                component tm_delay "Unit Delay2" {
                }
                [
                    position = 7608, 8624
                    rotation = right
                    hide_name = True
                ]

                component gen_sum Sum2 {
                    signs = "-+"
                }
                [
                    position = 7824, 8200
                    hide_name = True
                ]

                component gen_rel_op "Relational operator1" {
                    relational_op = ">"
                }
                [
                    position = 8160, 8040
                    hide_name = True
                ]

                component gen_rel_op "Relational operator4" {
                    relational_op = "<"
                }
                [
                    position = 8520, 8208
                    hide_name = True
                ]

                component gen_abs Abs4 {
                }
                [
                    position = 7920, 8048
                    hide_name = True
                ]

                component gen_probe volt_diff3 {
                }
                [
                    position = 8352, 8512
                ]

                component src_constant Constant6 {
                    execution_rate = "Ts"
                    value = "1e-3"
                }
                [
                    position = 8056, 8024
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe1" {
                    override_signal_name = "True"
                    signal_name = "gridconnect2"
                }
                [
                    position = 9104, 8208
                    hide_name = True
                ]

                component gen_logic_op "Logical operator2" {
                    inputs = "4"
                    operator = "NOT"
                }
                [
                    position = 9040, 8248
                    rotation = right
                    hide_name = True
                ]

                component gen_product Product2 {
                }
                [
                    position = 8160, 8256
                    hide_name = True
                ]

                component gen_gain Gain6 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7376, 8576
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe4" {
                    override_signal_name = "True"
                    signal_name = "freq_sync3"
                }
                [
                    position = 8616, 8008
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe5" {
                    override_signal_name = "True"
                    signal_name = "volt_sync3"
                }
                [
                    position = 8616, 8072
                    hide_name = True
                ]

                component gen_logic_op "Logical operator1" {
                    inputs = "3"
                }
                [
                    position = 8616, 8120
                    hide_name = True
                ]

                component gen_abs Abs5 {
                }
                [
                    position = 8056, 8128
                    hide_name = True
                ]

                component gen_probe angle_diff3 {
                }
                [
                    position = 8056, 7952
                ]

                component gen_sum Sum3 {
                    signs = "-+"
                }
                [
                    position = 8392, 8192
                    hide_name = True
                    scale = 1, -1
                ]

                component gen_gain Gain5 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7336, 8552
                    hide_name = True
                ]

                component gen_rel_op "Relational operator2" {
                    relational_op = ">"
                }
                [
                    position = 8160, 8120
                    hide_name = True
                ]

                component Subsystem PLL {
                    layout = dynamic
                    component gen_pid_controller "PID controller1" {
                        controller_type = "PI"
                        enb_anti_windup_out = "True"
                        enb_output_limit_out = "True"
                        int_init_value = "w_0"
                        ki = "Ki_PLL"
                        kp = "Kp_PLL"
                        lower_sat_lim = "PLL_min"
                        upper_sat_lim = "PLL_max"
                    }
                    [
                        position = 8192, 8152
                        hide_name = True
                    ]

                    component gen_c_function "C function1" {
                        global_variables = "real var;"
                        in_terminal_dimensions = "inherit"
                        in_terminal_dimensions_str = "in inherit"
                        in_terminal_labels = "[(\'in\', True)]"
                        init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                        no_feed_inputs = "[\'\']"
                        no_feed_outputs = "[\'\']"
                        out_terminal_dimensions = "inherit"
                        out_terminal_dimensions_str = "out inherit"
                        out_terminal_labels = "[(\'out\', True)]"
                        output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                        parameters = "real Ts;"
                        update_fnc = "/*Begin code section*/
var += (Ts*in);
/*End code section*/"
                    }
                    [
                        position = 8304, 8152
                        hide_name = True
                        size = 80, 48
                    ]

                    component gen_c_function "confine phase" {
                        global_variables = "real x;real floor_in;"
                        in_terminal_dimensions = "inherit"
                        in_terminal_dimensions_str = "in inherit"
                        in_terminal_labels = "[(\'in\', True)]"
                        init_fnc = "/*Begin code section*/
floor_in = 0;
/*End code section*/"
                        no_feed_inputs = "[\'\']"
                        no_feed_outputs = "[\'\']"
                        out_terminal_dimensions = "inherit"
                        out_terminal_dimensions_str = "out inherit"
                        out_terminal_labels = "[(\'out\', True)]"
                        output_fnc = "/*Begin code section*/
x = in/6.283185307179586;
floor_in = floor(x);
out = in - (6.283185307179586*floor_in);
/*End code section*/"
                    }
                    [
                        position = 8408, 8152
                        size = 56, 48
                    ]

                    port wt {
                        label = "wt"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8496, 8152
                    ]

                    port w {
                        label = "w"
                        position = right:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8304, 8208
                    ]

                    port q {
                        label = "q"
                        position = left:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8064, 8152
                    ]

                    junction Junction1 sp
                    [
                        position = 8240, 8152
                    ]

                    connect w Junction1 as Connection19
                    connect "C function1.in" Junction1 as Connection17
                    connect wt "confine phase.out" as Connection14
                    connect "confine phase.in" "C function1.out" as Connection16
                    connect Junction1 "PID controller1.out" as Connection18
                    connect q "PID controller1.in" as Connection20
                }
                [
                    position = 7544, 8576
                    scale = 1, -1
                    size = 96, 56
                ]

                component gen_limiter Limit1 {
                    lower_limit = "1e-12"
                }
                [
                    position = 7384, 8016
                    hide_name = True
                ]

                component gen_digital_probe "Digital Probe6" {
                    override_signal_name = "True"
                    signal_name = "griddisconnect2"
                }
                [
                    position = 9104, 8280
                    hide_name = True
                ]

                component "core/abc to dq" "abc to dq1" {
                }
                [
                    position = 7264, 8576
                    size = 48, 80
                ]

                component gen_math_fnc "Mathematical function2" {
                    mathematical_fn = "sqrt"
                }
                [
                    position = 7416, 8352
                    hide_name = True
                ]

                component gen_probe Vd_G {
                }
                [
                    position = 7328, 8480
                    scale = -1, 1
                ]

                component gen_probe Vq_G {
                }
                [
                    position = 7432, 8472
                    scale = -1, 1
                ]

                component gen_probe del_w {
                }
                [
                    position = 8496, 8352
                ]

                component gen_probe del_V {
                }
                [
                    position = 8744, 8600
                ]

                component gen_c_function "stay connected1" {
                    global_variables = "real connect;"
                    in_terminal_dimensions = "inherit;inherit;inherit"
                    in_terminal_dimensions_str = "ready inherit;connectMT inherit;MTsync inherit"
                    in_terminal_labels = "[(\'ready\', True), (\'connectMT\', True), (\'MTsync\', True)]"
                    in_terminal_properties = "inherit ready;inherit connectMT;inherit MTsync;"
                    init_fnc = "/*Begin code section*/
connect = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    out_terminal_properties = "int out;"
                    output_fnc = "/*Begin code section*/
out = connect;
/*End code section*/"
                    parameters = "real Ts;"
                    update_fnc = "/*Begin code section*/
if ((ready==1)&&(connectMT==1)&&(MTsync==1)){
    connect = 1;
}
else if((connectMT==0)||(MTsync==0)){
    connect = 0;
}
/*End code section*/"
                }
                [
                    position = 8832, 8176
                    hide_name = True
                    size = 160, 104
                ]

                component gen_probe "|V|" {
                }
                [
                    position = 7512, 8304
                ]

                component gen_probe w_G {
                }
                [
                    position = 7824, 8160
                    rotation = down
                    scale = -1, 1
                ]

                component gen_probe w_bus {
                }
                [
                    position = 7824, 8240
                ]

                component gen_sum Sum6 {
                    signs = "+-"
                }
                [
                    position = 7752, 8336
                    hide_name = True
                ]

                component gen_sum Sum7 {
                    signs = "+-"
                }
                [
                    position = 7752, 8408
                    hide_name = True
                ]

                component gen_sum Sum8 {
                    signs = "+-"
                }
                [
                    position = 7752, 8480
                    hide_name = True
                ]

                component gen_probe Ea-Va {
                }
                [
                    position = 7848, 8336
                ]

                component gen_probe Eb-Vb {
                }
                [
                    position = 7848, 8408
                ]

                component gen_probe Ec-Vc {
                }
                [
                    position = 7848, 8480
                ]

                component "core/abc to dq" "abc to dq2" {
                }
                [
                    position = 7984, 8592
                    size = 48, 80
                ]

                component gen_probe Ed-Vd {
                }
                [
                    position = 8120, 8536
                ]

                component gen_probe Eq-Vq {
                }
                [
                    position = 8120, 8592
                ]

                component gen_terminator Termination2 {
                }
                [
                    position = 8072, 8632
                    hide_name = True
                ]

                component gen_probe E_d {
                }
                [
                    position = 7616, 8704
                ]

                component gen_probe E_q {
                }
                [
                    position = 7616, 8856
                    rotation = down
                    scale = -1, 1
                ]

                component gen_gain Gain7 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7336, 8736
                    hide_name = True
                ]

                component Subsystem Current_abc_to_dq3 {
                    layout = dynamic
                    component "core/abc to dq" "abc to dq1" {
                    }
                    [
                        position = 7856, 8008
                        size = 48, 80
                    ]

                    component gen_terminator Termination {
                    }
                    [
                        position = 7952, 8064
                    ]

                    port wt {
                        position = right:4
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8088
                    ]

                    port Ec {
                        position = right:3
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8040
                    ]

                    port Eq {
                        position = left:2
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 8016
                    ]

                    port Ea {
                        position = right:1
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 7960
                    ]

                    port Ed {
                        position = left:1
                        kind = sp
                        direction =  in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8008, 7976
                    ]

                    port Eb {
                        position = right:2
                        kind = sp
                        direction =  out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7704, 8000
                    ]

                    connect Termination.in "abc to dq1.zero_axis" as Connection4
                    connect "abc to dq1.q_axis" Eq as Connection6
                    connect Ec "abc to dq1.vc" as Connection3
                    connect Ea "abc to dq1.va" as Connection1
                    connect Eb "abc to dq1.vb" as Connection2
                    connect "abc to dq1.d_axis" Ed as Connection5
                    connect wt "abc to dq1.wt" as Connection7
                }
                [
                    position = 7256, 8784
                    hide_name = True
                    scale = -1, 1
                    size = 64, 144
                ]

                component gen_gain Gain12 {
                    gain = "1/V_DQ"
                }
                [
                    position = 7336, 8832
                    hide_name = True
                ]

                component tm_delay "Unit Delay5" {
                }
                [
                    position = 8968, 8176
                    hide_name = True
                ]

                component gen_c_function "BE1-25A Synchronizer2" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "df inherit"
                    in_terminal_labels = "[(\'df\', True)]"
                    in_terminal_properties = "real df;"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "del_w inherit"
                    out_terminal_labels = "[(\'del_w\', True)]"
                    out_terminal_properties = "real del_w;"
                    output_fnc = "/*Begin code section*/
if (df>maxw_slip)
{
    del_w = 1.125*maxw_pds;
}
else if ((df<=maxw_slip) && (df>0))
{
    del_w = maxw_pds*df/maxw_slip + (0.125*maxw_pds);
    //del_w = maxw_pds*(df+1e-4)/max_slip + (angle_slip);
}
else if ((df<=0) && (df > (-minw_slip)))
{
    del_w = (0.125*maxw_pds)*(df)/minw_slip + (0.125*maxw_pds);
    //del_w = maxw_pds*((-1*df)+1e-4)/min_slip  + (angle_slip);
}
else if ((df <= (-1*minw_slip))&&(df > (-1*maxw_slip)))
{
    del_w = 0;
    //del_w = maxw_pds*((min_slip)+1e-4)/min_slip  + (angle_slip);
}
else if (df <= (-1*maxw_slip))
{
    del_w = (maxw_slip+df)*maxw_pds/maxw_slip;
}
/*End code section*/"
                    parameters = "real Ts;real maxw_pds;real maxw_slip;real minw_slip;"
                }
                [
                    position = 8112, 8392
                    hide_name = True
                    scale = 1, -1
                    size = 128, 112
                ]

                component gen_c_function "BE1-25A Synchronizer (modified)" {
                    in_terminal_dimensions = "inherit"
                    in_terminal_dimensions_str = "df inherit"
                    in_terminal_labels = "[(\'df\', True)]"
                    in_terminal_properties = "real df;"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "del_w inherit"
                    out_terminal_labels = "[(\'del_w\', True)]"
                    out_terminal_properties = "real del_w;"
                    output_fnc = "/*Begin code section*/
if (df>maxw_slip)
{
    del_w = (df-maxw_slip)*maxw_pds/maxw_slip;
}
else if ((df <= maxw_slip)&&(df > minw_slip))
{
    del_w = 0;
}
else if ((df<=minw_slip) && (df > 0))
{
    del_w = (0.125*maxw_pds)*(df)/minw_slip - (0.125*maxw_pds);
}
else if ((df<=0) && (df>(-1*maxw_slip)))
{
    del_w = maxw_pds*df/maxw_slip - (0.125*maxw_pds);
}
else if (df <= (-1*maxw_slip))
{
    del_w = -1.125*maxw_pds;
}
/*End code section*/"
                    parameters = "real Ts;real maxw_pds;real maxw_slip;real minw_slip;"
                }
                [
                    position = 9112, 8016
                    scale = 1, -1
                    size = 128, 112
                ]

                component gen_probe thetaPLL {
                }
                [
                    position = 7992, 8704
                ]

                component gen_probe omegaPLL {
                }
                [
                    position = 7688, 8600
                ]

                component gen_probe theta_E {
                }
                [
                    position = 7592, 7960
                ]

                component gen_probe theta_V {
                }
                [
                    position = 7592, 8048
                ]

                component gen_c_function "Hold after connect2" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True)]"
                    in_terminal_properties = "real in;int connect;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if (connect==0)
    var = in;
/*End code section*/"
                }
                [
                    position = 8688, 8432
                    hide_name = True
                    size = 80, 88
                ]

                component gen_sum Sum9 {
                }
                [
                    position = 8584, 8408
                    hide_name = True
                ]

                component gen_c_function "Hold after connect3" {
                    global_variables = "real var;"
                    in_terminal_dimensions = "inherit;inherit"
                    in_terminal_dimensions_str = "in inherit;connect inherit"
                    in_terminal_labels = "[(\'in\', True), (\'connect\', True)]"
                    in_terminal_properties = "real in;int connect;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "out inherit"
                    out_terminal_labels = "[(\'out\', True)]"
                    output_fnc = "/*Begin code section*/
out = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if (connect==0)
    var = in;
/*End code section*/"
                }
                [
                    position = 8936, 8680
                    hide_name = True
                    size = 80, 88
                ]

                component gen_sum Sum10 {
                }
                [
                    position = 8832, 8656
                    hide_name = True
                ]

                component gen_gain Gain13 {
                    gain = "1/w_0"
                }
                [
                    position = 7680, 8536
                    hide_name = True
                ]

                component gen_gain R {
                    gain = "R_g/Z_DQ"
                }
                [
                    position = 8192, 8720
                ]

                component gen_gain X {
                    gain = "L_g/L_DQ"
                }
                [
                    position = 8192, 8768
                ]

                component gen_gain R1 {
                    gain = "R_g/Z_DQ"
                }
                [
                    position = 8192, 8904
                ]

                component gen_gain X1 {
                    gain = "L_g/L_DQ"
                }
                [
                    position = 8192, 8952
                ]

                component gen_sum Sum11 {
                    signs = "++"
                }
                [
                    position = 8272, 8744
                    hide_name = True
                    scale = 1, -1
                ]

                component gen_sum Sum12 {
                    signs = "-+"
                }
                [
                    position = 8272, 8928
                    hide_name = True
                    scale = 1, -1
                ]

                component gen_probe Id_gen {
                }
                [
                    position = 8440, 8848
                ]

                component gen_probe Iq_gen {
                }
                [
                    position = 8440, 9040
                ]

                component src_constant R_L {
                    execution_rate = "Ts"
                    value = "sq_Z"
                }
                [
                    position = 7880, 8944
                    hide_name = True
                ]

                component gen_product Product5 {
                    signs = "*/"
                }
                [
                    position = 8352, 8848
                    hide_name = True
                ]

                component gen_product Product6 {
                    signs = "*/"
                }
                [
                    position = 8352, 9040
                    hide_name = True
                ]

                component gen_gain Gain16 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8064, 8536
                    hide_name = True
                ]

                component gen_gain Gain17 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8064, 8592
                    hide_name = True
                ]

                component src_constant R_L1 {
                    execution_rate = "Ts"
                    value = "(R_g/Z_DQ)/sq_Z"
                }
                [
                    position = 7856, 8800
                    hide_name = True
                ]

                component src_constant R_L2 {
                    execution_rate = "Ts"
                    value = "(L_g/L_DQ)/sq_Z"
                }
                [
                    position = 7856, 8856
                    hide_name = True
                ]

                component gen_probe G_line {
                }
                [
                    position = 7936, 8800
                ]

                component gen_probe B_line {
                }
                [
                    position = 7936, 8856
                ]

                component gen_probe sqZ_line {
                }
                [
                    position = 7960, 8992
                ]

                component gen_gain Gain18 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8136, 8720
                    hide_name = True
                ]

                component gen_gain Gain19 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8136, 8768
                    hide_name = True
                ]

                component gen_gain Gain20 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8136, 8904
                    hide_name = True
                ]

                component gen_gain Gain21 {
                    gain = "1/V_DQ"
                }
                [
                    position = 8136, 8952
                    hide_name = True
                ]

                tag From39 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8072, 8264
                    hide_name = True
                ]

                tag From43 {
                    value = "Vd_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8312
                    hide_name = True
                ]

                tag w_bus1 {
                    value = "w_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7760, 8568
                    hide_name = True
                ]

                tag Vb_G1 {
                    value = "VbG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8560
                    hide_name = True
                ]

                tag "|V|1" {
                    value = "|V| bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7512, 8352
                    hide_name = True
                ]

                tag theta_bus {
                    value = "theta_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7656, 8656
                    hide_name = True
                ]

                tag theta_bus5 {
                    value = "dV"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8616
                    hide_name = True
                ]

                tag From42 {
                    value = "Vq_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8392
                    hide_name = True
                ]

                tag Goto32 {
                    value = "Vq_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7544, 8536
                    hide_name = True
                    size = 60, 20
                ]

                tag Connect2 {
                    value = "Connected"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8416
                    hide_name = True
                    size = 58, 20
                ]

                tag From44 {
                    value = "Vd_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8104
                    hide_name = True
                ]

                tag From45 {
                    value = "Vq_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8072
                    hide_name = True
                ]

                tag Goto30 {
                    value = "dV"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8504, 8160
                    hide_name = True
                ]

                tag Goto33 {
                    value = "Vd_G"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7440, 8552
                    hide_name = True
                    size = 60, 20
                ]

                tag Vc_G1 {
                    value = "VcG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8584
                    hide_name = True
                ]

                tag From41 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 8016
                    hide_name = True
                ]

                tag Va_G1 {
                    value = "VaG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7176, 8536
                    hide_name = True
                ]

                tag From36 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8072, 8184
                    hide_name = True
                ]

                tag w_bus3 {
                    value = "w_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7640, 8224
                    hide_name = True
                ]

                tag Connect1 {
                    value = "synced"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9104, 8176
                    hide_name = True
                ]

                tag From1 {
                    value = "|V| bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8312, 8184
                    hide_name = True
                ]

                tag From40 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7320, 7984
                    hide_name = True
                ]

                tag V_t9 {
                    value = "exc_state"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8456, 8712
                    hide_name = True
                ]

                tag MT_ON2 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8232, 8440
                    hide_name = True
                ]

                tag MT_ON3 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8456, 8680
                    hide_name = True
                ]

                tag MT_ON4 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8688, 8208
                    hide_name = True
                ]

                tag w_e7 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7640, 8176
                    hide_name = True
                ]

                tag From46 {
                    value = "Ec1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8464
                    hide_name = True
                    size = 60, 20
                ]

                tag From37 {
                    value = "Ea1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8320
                    hide_name = True
                    size = 60, 20
                ]

                tag From38 {
                    value = "Eb1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8392
                    hide_name = True
                    size = 60, 20
                ]

                tag Vb_G2 {
                    value = "VbG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8424
                    hide_name = True
                ]

                tag Vc_G2 {
                    value = "VcG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8496
                    hide_name = True
                ]

                tag Va_G2 {
                    value = "VaG"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7664, 8352
                    hide_name = True
                ]

                tag Goto28 {
                    value = "E_q"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7432, 8832
                    hide_name = True
                    size = 60, 20
                ]

                tag Goto29 {
                    value = "E_d"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7432, 8736
                    hide_name = True
                    size = 60, 20
                ]

                tag From34 {
                    value = "Ec1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7160, 8800
                    hide_name = True
                    size = 60, 20
                ]

                tag From33 {
                    value = "Ea1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7160, 8736
                    hide_name = True
                    size = 60, 20
                ]

                tag From35 {
                    value = "Eb1"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7160, 8768
                    hide_name = True
                    size = 60, 20
                ]

                tag theta_bus1 {
                    value = "theta_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7160, 8832
                    hide_name = True
                ]

                tag Connect5 {
                    value = "Connect MT"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8688, 8176
                    hide_name = True
                ]

                tag Connect6 {
                    value = "Connected"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8456, 8648
                    hide_name = True
                    size = 58, 20
                ]

                tag w_bus2 {
                    value = "w_bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8496, 8400
                    hide_name = True
                    scale = 1, -1
                ]

                tag Connect3 {
                    value = "Connected"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8584, 8456
                    hide_name = True
                    size = 58, 20
                ]

                tag Goto34 {
                    value = "w_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8792, 8432
                    hide_name = True
                ]

                tag From47 {
                    value = "|V| bus"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8744, 8648
                    hide_name = True
                ]

                tag Connect7 {
                    value = "Connected"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8832, 8704
                    hide_name = True
                    size = 58, 20
                ]

                tag Goto35 {
                    value = "|V|_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 9040, 8680
                    hide_name = True
                ]

                tag Ed_Vd {
                    value = "Ed-Vd"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8120, 8496
                    hide_name = True
                    size = 60, 20
                ]

                tag Eq_Vq {
                    value = "Eq-Vq"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8120, 8656
                    hide_name = True
                    size = 60, 20
                ]

                tag Ed_Vd1 {
                    value = "Ed-Vd"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8064, 8720
                    hide_name = True
                    size = 60, 20
                ]

                tag Eq_Vq1 {
                    value = "Eq-Vq"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8064, 8768
                    hide_name = True
                    size = 60, 20
                ]

                tag Ed_Vd2 {
                    value = "Ed-Vd"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8064, 8952
                    hide_name = True
                    size = 60, 20
                ]

                tag Eq_Vq2 {
                    value = "Eq-Vq"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8064, 8904
                    hide_name = True
                    size = 60, 20
                ]

                junction Junction41 sp
                [
                    position = 7480, 8576
                ]

                junction Junction38 sp
                [
                    position = 8304, 8120
                ]

                junction Junction26 sp
                [
                    position = 8112, 8184
                ]

                junction Junction42 sp
                [
                    position = 7216, 8392
                ]

                junction Junction43 sp
                [
                    position = 7216, 8312
                ]

                junction Junction28 sp
                [
                    position = 8112, 8264
                ]

                junction Junction45 sp
                [
                    position = 7608, 8656
                ]

                junction Junction49 sp
                [
                    position = 7872, 8048
                ]

                junction Junction35 sp
                [
                    position = 8424, 8192
                ]

                junction Junction56 sp
                [
                    position = 8280, 8616
                ]

                junction Junction57 sp
                [
                    position = 7480, 8536
                ]

                junction Junction58 sp
                [
                    position = 7368, 8552
                ]

                junction Junction63 sp
                [
                    position = 9040, 8176
                ]

                junction Junction66 sp
                [
                    position = 8552, 8136
                ]

                junction Junction67 sp
                [
                    position = 8576, 8040
                ]

                junction Junction69 sp
                [
                    position = 7456, 8352
                ]

                junction Junction71 sp
                [
                    position = 7784, 8176
                ]

                junction Junction73 sp
                [
                    position = 7992, 8128
                ]

                junction Junction74 sp
                [
                    position = 7800, 8336
                ]

                junction Junction75 sp
                [
                    position = 7800, 8480
                ]

                junction Junction76 sp
                [
                    position = 7800, 8408
                ]

                junction Junction77 sp
                [
                    position = 7608, 8656
                ]

                junction Junction78 sp
                [
                    position = 9040, 8208
                ]

                junction Junction61 sp
                [
                    position = 7376, 8736
                ]

                junction Junction80 sp
                [
                    position = 7376, 8832
                ]

                junction Junction81 sp
                [
                    position = 7992, 8200
                ]

                junction Junction84 sp
                [
                    position = 7944, 8680
                ]

                junction Junction85 sp
                [
                    position = 7648, 8568
                ]

                junction Junction86 sp
                [
                    position = 7520, 8088
                ]

                junction Junction87 sp
                [
                    position = 7520, 8000
                ]

                junction Junction88 sp
                [
                    position = 8432, 8416
                ]

                junction Junction89 sp
                [
                    position = 8672, 8664
                ]

                junction Junction90 sp
                [
                    position = 7784, 8224
                ]

                junction Junction91 sp
                [
                    position = 8024, 8536
                ]

                junction Junction92 sp
                [
                    position = 8024, 8592
                ]

                junction Junction93 sp
                [
                    position = 8024, 8944
                ]

                junction Junction94 sp
                [
                    position = 7928, 8944
                ]

                connect "Digital Probe4.in" Junction38 as Connection366
                connect From39 Junction28 as Connection259
                connect "abc to dq1.q_axis" Gain6.in as Connection319
                connect From41 Limit1.in as Connection285
                connect Sum3.in1 From1 as Connection81
                connect Vc_G1 "abc to dq1.vc" as Connection222
                connect angle_diff3.in Junction49 as Connection430
                connect Product2.out Sum4.in1 as Connection251
                connect Abs2.out "Relational operator4.in" as Connection84
                connect Connect2 "Hold after connect.connect" as Connection156
                connect Goto30 Junction35 as Connection308
                connect "Mathematical function1.out" Sum3.in as Connection253
                connect Va_G1 "abc to dq1.va" as Connection224
                connect theta_bus Junction45 as Connection404
                connect Termination1.in "abc to dq1.zero_axis" as Connection29
                connect From45 "Trigonometric function2.in" as Connection401
                connect Sum4.out "Mathematical function1.in" as Connection252
                connect Product2.in Junction28 as Connection261
                connect Junction28 Product2.in1 as Connection260
                connect Constant7.out "Relational operator2.in" as Connection70
                connect Junction49 Abs4.in as Connection429
                connect Abs2.in Junction35 as Connection306
                connect From44 Limit2.in as Connection402
                connect "Digital Probe6.in" "Logical operator2.out" as Connection454
                connect Junction26 From36 as Connection248
                connect Product1.in Junction26 as Connection247
                connect Limit2.out "Trigonometric function2.in1" as Connection398
                connect Product3.out Sum5.in as Connection390
                connect Junction38 "Relational operator2.out" as Connection365
                [
                    breakpoints = 8288, 8120; 8288, 8120
                ]
                connect Product3.in Junction43 as Connection386
                connect Limit1.out "Trigonometric function1.in1" as Connection286
                connect From40 "Trigonometric function1.in" as Connection284
                connect Vb_G1 "abc to dq1.vb" as Connection223
                connect "Relational operator2.in1" Abs5.out as Connection357
                connect From42 Junction42 as Connection384
                connect Junction43 From43 as Connection389
                connect Sum5.out "Mathematical function2.in" as Connection387
                connect Product3.in1 Junction43 as Connection391
                connect Gain6.out Junction41 as Connection381
                connect Junction35 Sum3.out as Connection307
                connect "confine phase.in" Sum1.out as Connection146
                connect Product4.out Sum5.in1 as Connection388
                connect Constant9.out "Relational operator4.in1" as Connection85
                connect Product4.in Junction42 as Connection385
                connect "confine phase.out" Junction49 as Connection428
                connect Junction45 "abc to dq1.wt" as Connection405
                connect Product1.in1 Junction26 as Connection249
                connect Junction41 PLL.q as Connection382
                connect Constant6.out "Relational operator1.in" as Connection69
                connect Product1.out Sum4.in as Connection250
                connect Junction42 Product4.in1 as Connection392
                connect "Logical operator1.in1" Junction38 as Connection364
                [
                    breakpoints = 8576, 8120
                ]
                connect Gain5.in "abc to dq1.d_axis" as Connection318
                connect theta_bus5 Junction56 as Connection464
                connect Junction56 "BE1-25A Synchronizer1.dV" as Connection465
                connect volt_diff3.in Junction56 as Connection466
                connect Goto32 Junction57 as Connection468
                connect Junction57 Junction41 as Connection469
                connect Vq_G.in Junction57 as Connection470
                connect Goto33 Junction58 as Connection471
                connect Junction58 Gain5.out as Connection472
                connect Vd_G.in Junction58 as Connection473
                connect PLL.wt "Unit Delay2.in" as Connection474
                connect MT_ON2 "Hold after connect.MT_sync" as Connection492
                connect V_t9 "Hold after connect1.exc_state" as Connection493
                connect MT_ON3 "Hold after connect1.MT_sync" as Connection494
                connect "Hold after connect1.in" "BE1-25A Synchronizer1.del_V" as Connection495
                connect Connect1 Junction63 as Connection508
                connect MT_ON4 "stay connected1.MTsync" as Connection512
                connect w_e7 Gain4.in as Connection513
                connect "Logical operator1.in2" Junction66 as Connection530
                connect Junction66 "Relational operator4.out" as Connection531
                connect "Digital Probe5.in" Junction66 as Connection532
                connect "Relational operator1.out" Junction67 as Connection534
                connect Junction67 "Logical operator1.in" as Connection535
                connect "Digital Probe3.in" Junction67 as Connection536
                connect "Logical operator1.out" "stay connected1.ready" as Connection537
                connect "Mathematical function2.out" Junction69 as Connection544
                connect Junction69 "|V|1" as Connection545
                [
                    breakpoints = 7456, 8352
                ]
                connect "|V|.in" Junction69 as Connection546
                connect Gain4.out Junction71 as Connection550
                connect Junction71 Sum2.in as Connection551
                connect w_G.in Junction71 as Connection552
                connect Abs5.in Junction73 as Connection557
                connect frequency_diff3.in Junction73 as Connection559
                connect Vc_G2 Sum8.in1 as Connection560
                connect From46 Sum8.in as Connection561
                connect Vb_G2 Sum7.in1 as Connection562
                connect From38 Sum7.in as Connection563
                connect Va_G2 Sum6.in1 as Connection564
                connect From37 Sum6.in as Connection565
                connect Ea-Va.in Junction74 as Connection569
                connect Junction74 Sum6.out as Connection570
                connect "abc to dq2.va" Junction74 as Connection571
                [
                    breakpoints = 7944, 8536; 7944, 8296; 7800, 8296
                ]
                connect Ec-Vc.in Junction75 as Connection580
                connect Junction75 Sum8.out as Connection581
                connect "abc to dq2.vc" Junction75 as Connection582
                connect Eb-Vb.in Junction76 as Connection599
                connect Junction76 Sum7.out as Connection600
                [
                    breakpoints = 7800, 8408; 7800, 8408; 7800, 8408; 7800, 8408; 7800, 8408
                ]
                connect "abc to dq2.vb" Junction76 as Connection601
                [
                    breakpoints = 7944, 8584; 7904, 8584; 7904, 8384; 7880, 8384; 7880, 8384; 7800, 8384
                ]
                connect "Unit Delay2.out" Junction77 as Connection602
                connect Junction77 Junction45 as Connection603
                connect Termination2.in "abc to dq2.zero_axis" as Connection607
                connect Junction63 Junction78 as Connection609
                [
                    breakpoints = 9040, 8176
                ]
                connect Junction78 "Logical operator2.in" as Connection610
                [
                    breakpoints = 9040, 8208
                ]
                connect "Digital Probe1.in" Junction78 as Connection611
                connect From34 Current_abc_to_dq3.Ec as Connection421
                connect From33 Current_abc_to_dq3.Ea as Connection278
                connect From35 Current_abc_to_dq3.Eb as Connection422
                connect Gain7.in Current_abc_to_dq3.Ed as Connection438
                [
                    breakpoints = 7304, 8736
                ]
                connect Current_abc_to_dq3.Eq Gain12.in as Connection439
                [
                    breakpoints = 7304, 8832
                ]
                connect Goto29 Junction61 as Connection444
                connect Junction61 Gain7.out as Connection445
                connect Current_abc_to_dq3.wt theta_bus1 as Connection616
                connect E_d.in Junction61 as Connection618
                [
                    breakpoints = 7472, 8760; 7376, 8760; 7376, 8736
                ]
                connect Goto28 Junction80 as Connection620
                connect Junction80 Gain12.out as Connection621
                connect E_q.in Junction80 as Connection622
                [
                    breakpoints = 7584, 8808; 7376, 8808
                ]
                connect Junction63 "Unit Delay5.out" as Connection623
                connect "Unit Delay5.in" "stay connected1.out" as Connection624
                connect Connect5 "stay connected1.connectMT" as Connection625
                connect Connect6 "Hold after connect1.connect" as Connection626
                connect Abs4.out "Relational operator1.in1" as Connection627
                [
                    breakpoints = 8024, 8048; 8128, 8048
                ]
                connect "BE1-25A Synchronizer2.del_w" "Hold after connect.in" as Connection633
                connect Sum2.out Junction81 as Connection634
                [
                    breakpoints = 7968, 8200
                ]
                connect Junction81 Junction73 as Connection635
                [
                    breakpoints = 7992, 8200; 7992, 8128
                ]
                connect "BE1-25A Synchronizer2.df" Junction81 as Connection636
                connect "abc to dq2.wt" Junction84 as Connection646
                connect Junction84 Junction77 as Connection647
                [
                    breakpoints = 7944, 8680; 7608, 8680; 7608, 8656
                ]
                connect thetaPLL.in Junction84 as Connection648
                connect PLL.w Junction85 as Connection649
                connect omegaPLL.in Junction85 as Connection651
                connect "Trigonometric function2.out" Junction86 as Connection654
                connect Junction86 Sum1.in1 as Connection655
                connect theta_V.in Junction86 as Connection656
                connect "Trigonometric function1.out" Junction87 as Connection657
                connect Junction87 Sum1.in as Connection658
                connect theta_E.in Junction87 as Connection659
                connect Connect3 "Hold after connect2.connect" as Connection1234
                connect w_bus2 Sum9.in as Connection1235
                connect Sum9.out "Hold after connect2.in" as Connection1237
                connect del_w.in Junction88 as Connection1239
                connect Junction88 "Hold after connect.out" as Connection1240
                [
                    breakpoints = 8432, 8416
                ]
                connect Sum9.in1 Junction88 as Connection1241
                connect "Hold after connect2.out" Goto34 as Connection1242
                connect Connect7 "Hold after connect3.connect" as Connection1243
                connect Sum10.out "Hold after connect3.in" as Connection1244
                connect From47 Sum10.in as Connection1246
                connect del_V.in Junction89 as Connection1247
                connect Junction89 "Hold after connect1.out" as Connection1248
                [
                    breakpoints = 8672, 8664
                ]
                connect Sum10.in1 Junction89 as Connection1249
                connect Goto35 "Hold after connect3.out" as Connection1250
                connect Junction85 Gain13.in as Connection1251
                connect Gain13.out w_bus1 as Connection1252
                connect w_bus3 Junction90 as Connection1254
                connect Junction90 Sum2.in1 as Connection1255
                connect w_bus.in Junction90 as Connection1256
                connect Junction91 "abc to dq2.d_axis" as Connection1258
                connect Ed_Vd Junction91 as Connection1259
                connect Junction92 "abc to dq2.q_axis" as Connection1261
                connect Eq_Vq Junction92 as Connection1262
                connect R.out Sum11.in1 as Connection1265
                connect X.out Sum11.in as Connection1266
                connect R1.out Sum12.in1 as Connection1270
                connect X1.out Sum12.in as Connection1271
                connect Junction93 Product5.in1 as Connection1278
                [
                    breakpoints = 8024, 8936
                ]
                connect Product6.in1 Junction93 as Connection1279
                connect Product6.in Sum12.out as Connection1280
                connect Sum11.out Product5.in as Connection1281
                connect Ed-Vd.in Gain16.out as Connection1288
                connect Gain16.in Junction91 as Connection1289
                connect Eq-Vq.in Gain17.out as Connection1290
                connect Gain17.in Junction92 as Connection1291
                connect R_L.out Junction94 as Connection1298
                connect Junction94 Junction93 as Connection1299
                connect sqZ_line.in Junction94 as Connection1300
                connect B_line.in R_L2.out as Connection1301
                connect G_line.in R_L1.out as Connection1302
                connect Product5.out Id_gen.in as Connection1303
                connect Product6.out Iq_gen.in as Connection1304
                connect Ed_Vd1 Gain18.in as Connection1305
                connect Gain18.out R.in as Connection1306
                connect Eq_Vq1 Gain19.in as Connection1307
                connect Gain19.out X.in as Connection1308
                connect Eq_Vq2 Gain20.in as Connection1309
                connect Gain20.out R1.in as Connection1310
                connect Ed_Vd2 Gain21.in as Connection1311
                connect Gain21.out X1.in as Connection1312
            }
            [
                position = 7776, 7944
                size = 112, 144
            ]

            component Subsystem CB_control {
                layout = dynamic
                component gen_logic_op "Logical operator1" {
                }
                [
                    position = 8176, 8256
                    hide_name = True
                ]

                component gen_logic_op "Logical operator2" {
                }
                [
                    position = 8088, 8232
                    hide_name = True
                ]

                component gen_logic_op "Logical operator3" {
                    operator = "NOT"
                }
                [
                    position = 8424, 8304
                    rotation = right
                    hide_name = True
                ]

                component gen_digital_probe "GCB OFF" {
                }
                [
                    position = 8464, 8352
                ]

                component gen_digital_probe "GCB ON" {
                }
                [
                    position = 8464, 8200
                    rotation = down
                    scale = -1, 1
                ]

                component gen_logic_op "Logical operator4" {
                    operator = "NOT"
                }
                [
                    position = 8064, 8392
                    rotation = right
                    hide_name = True
                ]

                component gen_digital_probe "MCB OFF" {
                }
                [
                    position = 8136, 8432
                ]

                component gen_digital_probe "MCB ON" {
                }
                [
                    position = 8136, 8328
                    rotation = down
                    scale = -1, 1
                ]

                component gen_logic_op "Logical operator5" {
                    operator = "NOT"
                }
                [
                    position = 7632, 8496
                    rotation = right
                    hide_name = True
                ]

                component gen_digital_probe "Grid_Islanded OFF" {
                }
                [
                    position = 7680, 8528
                ]

                component gen_digital_probe "Grid_Islanded ON" {
                }
                [
                    position = 7680, 8408
                    rotation = down
                    scale = -1, 1
                ]

                component src_scada_input Grid_Islanded {
                    def_value = "1"
                    execution_rate = "Ts"
                    format = "int"
                    max = "1"
                    min = "0"
                    signal_type = "int"
                    unit = ""
                }
                [
                    position = 7360, 8416
                ]

                component gen_logic_op "Logical operator6" {
                    operator = "OR"
                }
                [
                    position = 8304, 8688
                    hide_name = True
                ]

                component gen_digital_probe "MT_sync OFF" {
                }
                [
                    position = 7600, 8672
                ]

                component gen_digital_probe "MT_sync ON" {
                }
                [
                    position = 7528, 8600
                    rotation = down
                    scale = -1, -1
                ]

                component gen_logic_op "Logical operator7" {
                }
                [
                    position = 7560, 8440
                    hide_name = True
                ]

                component gen_logic_op "Logical operator8" {
                    inputs = "3"
                }
                [
                    position = 8224, 8696
                    hide_name = True
                ]

                component src_constant Constant10 {
                    execution_rate = "Ts"
                    value = "5e-2"
                }
                [
                    position = 8088, 8712
                    hide_name = True
                ]

                component gen_abs Abs6 {
                }
                [
                    position = 8088, 8680
                    hide_name = True
                ]

                component gen_rel_op "Relational operator5" {
                    relational_op = "<"
                }
                [
                    position = 8152, 8696
                    hide_name = True
                ]

                component gen_sum Sum9 {
                    signs = "-+"
                }
                [
                    position = 8016, 8688
                    hide_name = True
                    scale = 1, -1
                ]

                component src_constant Constant1 {
                    execution_rate = "Ts"
                }
                [
                    position = 7944, 8664
                    hide_name = True
                ]

                component src_constant Constant11 {
                    execution_rate = "Ts"
                    value = "1e-3"
                }
                [
                    position = 8088, 8616
                    hide_name = True
                ]

                component gen_abs Abs7 {
                }
                [
                    position = 8088, 8648
                    hide_name = True
                ]

                component gen_rel_op "Relational operator6" {
                    relational_op = ">"
                }
                [
                    position = 8152, 8632
                    hide_name = True
                ]

                component gen_sum Sum10 {
                    signs = "-+"
                }
                [
                    position = 8016, 8640
                    hide_name = True
                    scale = 1, -1
                ]

                component gen_gain Gain13 {
                    gain = "1/w_0"
                }
                [
                    position = 7944, 8616
                    hide_name = True
                ]

                component gen_logic_op "Logical operator9" {
                    operator = "NOT"
                }
                [
                    position = 7408, 8496
                    rotation = right
                    hide_name = True
                ]

                component gen_logic_op "Logical operator10" {
                    operator = "NOT"
                }
                [
                    position = 7520, 8496
                    rotation = right
                    hide_name = True
                ]

                component gen_logic_op "Logical operator11" {
                }
                [
                    position = 7464, 8568
                    rotation = right
                    hide_name = True
                ]

                component gen_logic_op "Logical operator12" {
                    operator = "NOT"
                }
                [
                    position = 7528, 8672
                    hide_name = True
                ]

                component gen_c_function "stay connected1" {
                    global_variables = "int var;"
                    in_terminal_dimensions = "inherit;inherit"
                    in_terminal_dimensions_str = "connect inherit;disconnect inherit"
                    in_terminal_labels = "[(\'connect\', True), (\'disconnect\', True)]"
                    in_terminal_properties = "inherit connect;inherit disconnect;"
                    init_fnc = "/*Begin code section*/
var = 0;
/*End code section*/"
                    no_feed_inputs = "[\'\']"
                    no_feed_outputs = "[\'\']"
                    out_terminal_dimensions = "inherit"
                    out_terminal_dimensions_str = "action inherit"
                    out_terminal_labels = "[(\'action\', True)]"
                    out_terminal_properties = "int action;"
                    output_fnc = "/*Begin code section*/
action = var;
/*End code section*/"
                    update_fnc = "/*Begin code section*/
if (connect==1)
{
    var = 1;
}
if(disconnect==0)
{
    var = 0;
}
/*End code section*/"
                }
                [
                    position = 8328, 8240
                    hide_name = True
                    scale = 1, -1
                    size = 112, 72
                ]

                port CB_status {
                    label = "CB_status"
                    position = top:1
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8552, 8240
                ]

                port Close_GCB {
                    label = "Close_GCB"
                    position = left:1
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7880, 8152
                ]

                port Close_MCB {
                    label = "Close_MCB"
                    position = left:3
                    kind = sp
                    direction =  out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7888, 8296
                ]

                port MCB_control {
                    label = "MCB_control"
                    position = right:1
                    kind = sp
                    direction =  in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8136, 8360
                ]

                tag Connect5 {
                    value = "synced"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8224, 8648
                    hide_name = True
                ]

                tag Connect6 {
                    value = "Connect MT"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8184, 8216
                    hide_name = True
                ]

                tag Connect1 {
                    value = "Connected"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8552, 8296
                    hide_name = True
                ]

                tag Connect7 {
                    value = "Grid_Islanded"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7680, 8440
                    hide_name = True
                    size = 75, 20
                ]

                tag Connect8 {
                    value = "Grid_Islanded"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8120, 8744
                    hide_name = True
                    size = 94, 20
                ]

                tag Connect9 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 8392, 8688
                    hide_name = True
                    size = 75, 20
                ]

                tag Connect10 {
                    value = "Connect"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 8088, 8280
                    hide_name = True
                ]

                tag Connect11 {
                    value = "MT_sync"
                    scope = masked_subsystem
                    kind = sp
                    direction = in
                }
                [
                    position = 7528, 8632
                    hide_name = True
                    size = 58, 20
                ]

                tag MT_state1 {
                    value = "MTsync_state"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7464, 8448
                    hide_name = True
                    size = 69, 20
                ]

                tag "|V|2" {
                    value = "|E|"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7928, 8712
                    hide_name = True
                    size = 29, 20
                ]

                tag w_e8 {
                    value = "w_e"
                    scope = masked_subsystem
                    kind = sp
                    direction = out
                }
                [
                    position = 7864, 8664
                    hide_name = True
                ]

                junction Junction3 sp
                [
                    position = 8136, 8232
                ]

                junction Junction5 sp
                [
                    position = 7992, 8296
                ]

                junction Junction8 sp
                [
                    position = 8064, 8360
                ]

                junction Junction9 sp
                [
                    position = 8064, 8360
                ]

                junction Junction108 sp
                [
                    position = 7632, 8440
                ]

                junction Junction109 sp
                [
                    position = 7632, 8440
                ]

                junction Junction81 sp
                [
                    position = 7976, 8664
                ]

                junction Junction111 sp
                [
                    position = 7408, 8416
                ]

                junction Junction113 sp
                [
                    position = 7464, 8600
                ]

                junction Junction114 sp
                [
                    position = 7520, 8448
                ]

                junction Junction115 sp
                [
                    position = 7464, 8632
                ]

                junction Junction116 sp
                [
                    position = 8424, 8240
                ]

                junction Junction117 sp
                [
                    position = 8424, 8240
                ]

                junction Junction119 sp
                [
                    position = 8480, 8240
                ]

                junction Junction120 sp
                [
                    position = 8016, 8152
                ]

                connect "Logical operator2.out" Junction3 as Connection29
                connect Junction3 "Logical operator1.in" as Connection30
                connect Connect6 Junction3 as Connection31
                connect Close_MCB Junction5 as Connection37
                connect Junction5 "Logical operator2.in1" as Connection38
                [
                    breakpoints = 8016, 8296; 8016, 8240
                ]
                connect "GCB OFF.in" "Logical operator3.out" as Connection155
                connect "MCB OFF.in" "Logical operator4.out" as Connection162
                connect Junction8 Junction5 as Connection164
                connect "MCB ON.in" Junction8 as Connection165
                connect MCB_control Junction9 as Connection166
                connect Junction9 Junction8 as Connection167
                connect "Logical operator4.in" Junction9 as Connection168
                connect Connect5 "Logical operator6.in" as Connection959
                connect "Logical operator6.out" Connect9 as Connection961
                connect Connect10 "Logical operator1.in1" as Connection962
                connect "Logical operator7.out" Junction108 as Connection980
                connect Junction108 Connect7 as Connection981
                connect "Logical operator5.in" Junction109 as Connection983
                connect Junction109 Junction108 as Connection984
                connect Abs6.out "Relational operator5.in" as Connection628
                connect Constant10.out "Relational operator5.in1" as Connection631
                connect Grid_Islanded.out Junction111 as Connection992
                connect Abs6.in Sum9.out as Connection632
                [
                    breakpoints = 8056, 8688
                ]
                connect Junction111 "Logical operator7.in" as Connection993
                connect "|V|2" Sum9.in as Connection634
                connect "Logical operator9.in" Junction111 as Connection994
                connect "Relational operator5.out" "Logical operator8.in1" as Connection635
                connect Constant11.out "Relational operator6.in" as Connection636
                connect "Relational operator6.in1" Abs7.out as Connection637
                connect "Relational operator6.out" "Logical operator8.in" as Connection638
                connect Sum10.out Abs7.in as Connection639
                connect w_e8 Gain13.in as Connection640
                connect Gain13.out Sum10.in1 as Connection641
                connect Constant1.out Junction81 as Connection642
                connect "Logical operator11.in1" "Logical operator9.out" as Connection998
                connect Junction81 Sum9.in1 as Connection643
                connect "Logical operator11.in" "Logical operator10.out" as Connection999
                connect Sum10.in Junction81 as Connection644
                connect Connect8 "Logical operator8.in2" as Connection990
                connect "Logical operator8.out" "Logical operator6.in1" as Connection991
                connect "Grid_Islanded ON.in" Junction109 as Connection1003
                [
                    breakpoints = 7632, 8408
                ]
                connect Junction113 "Logical operator11.out" as Connection1005
                connect "MT_sync ON.in" Junction113 as Connection1006
                connect MT_state1 Junction114 as Connection1008
                connect Junction114 "Logical operator7.in1" as Connection1009
                connect "Logical operator10.in" Junction114 as Connection1010
                connect "Grid_Islanded OFF.in" "Logical operator5.out" as Connection1011
                connect Connect11 Junction115 as Connection1012
                connect Junction115 Junction113 as Connection1013
                connect "Logical operator12.in" Junction115 as Connection1014
                connect "Logical operator12.out" "MT_sync OFF.in" as Connection1015
                connect "stay connected1.action" Junction116 as Connection1018
                connect Junction116 "Logical operator3.in" as Connection1019
                connect Junction117 Junction116 as Connection1022
                connect "GCB ON.in" Junction117 as Connection1023
                connect "stay connected1.connect" "Logical operator1.out" as Connection1032
                connect CB_status Junction119 as Connection1036
                connect Junction119 Junction117 as Connection1037
                connect Connect1 Junction119 as Connection1038
                connect "stay connected1.disconnect" Junction120 as Connection1040
                [
                    breakpoints = 8256, 8152; 8128, 8152
                ]
                connect Junction120 Close_GCB as Connection1041
                [
                    breakpoints = 8016, 8152
                ]
                connect "Logical operator2.in" Junction120 as Connection1042
            }
            [
                position = 7768, 8104
                size = 176, 96
            ]

            component gen_logic_op "Logical operator2" {
            }
            [
                position = 6008, 7840
                hide_name = True
            ]

            component "core/RL Section" RL {
                inductance_per_l_mile = "L_g"
                length_mile = "line_len"
                resistance_per_l_mile = "R_g"
            }
            [
                position = 7776, 8280
                size = 256, 56
            ]

            component gen_probe ref_ctrl_PROBE {
            }
            [
                position = 6232, 7840
            ]

            component gen_probe MTsync_PROBE {
            }
            [
                position = 6088, 8128
            ]

            component pas_inductor La {
                inductance = "X_dpp*L_DQ"
            }
            [
                position = 6160, 8216
            ]

            component pas_inductor Lb {
                inductance = "X_dpp*L_DQ"
            }
            [
                position = 6728, 8280
            ]

            component pas_inductor Lc {
                inductance = "X_dpp*L_DQ"
            }
            [
                position = 7232, 8336
            ]

            component "core/Three Phase Non-Ideal Contactor" S3 {
                ctrl_src = "Model"
                resistance = "1e6"
            }
            [
                position = 8000, 8280
                size = 64, 256
            ]

            port ground {
                position = bottom:auto
                kind = pe
            }
            [
                position = 8528, 8464
                scale = -1, 1
            ]

            port V_aG {
                position = top:1
                kind = pe
            }
            [
                position = 8528, 8184
                scale = -1, 1
            ]

            port V_bG {
                position = top:2
                kind = pe
            }
            [
                position = 8528, 8280
                scale = -1, 1
            ]

            port V_cG {
                position = top:3
                kind = pe
            }
            [
                position = 8528, 8376
                scale = -1, 1
            ]

            port "MCB Control" {
                position = left:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7920, 8104
            ]

            tag MT_ON1 {
                value = "MT_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5920, 8128
                hide_name = True
            ]

            tag MT_ON2 {
                value = "MT_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5920, 7992
                hide_name = True
            ]

            tag V_a1 {
                value = "E_a"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5912, 8328
                hide_name = True
            ]

            tag V_b1 {
                value = "E_b"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 6488, 8368
                hide_name = True
            ]

            tag V_c1 {
                value = "E_c"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 7008, 8400
                hide_name = True
            ]

            tag I_a {
                value = "I_a"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 6312, 8176
                hide_name = True
            ]

            tag I_b {
                value = "I_b"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 6864, 8240
                hide_name = True
            ]

            tag I_c {
                value = "I_c"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7368, 8296
                hide_name = True
            ]

            tag Ea_G {
                value = "Ea1"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 6216, 8328
                scale = -1, 1
            ]

            tag Eb_G {
                value = "Eb1"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 6784, 8360
                scale = -1, 1
            ]

            tag Ec_G {
                value = "Ec1"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 7328, 8392
                scale = -1, 1
            ]

            tag V_d_a3 {
                value = "VbG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 8352, 8328
                hide_name = True
            ]

            tag V_q_a3 {
                value = "VaG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 8464, 8232
                hide_name = True
            ]

            tag V_q_a4 {
                value = "VcG"
                scope = masked_subsystem
                kind = sp
                direction = in
            }
            [
                position = 8240, 8416
                hide_name = True
            ]

            tag Connect2 {
                value = "Connected"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5920, 7864
                hide_name = True
                size = 58, 20
            ]

            tag theta_bus5 {
                value = "w_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5920, 8056
                hide_name = True
            ]

            tag From1 {
                value = "|V|_sync"
                scope = masked_subsystem
                kind = sp
                direction = out
            }
            [
                position = 5920, 7928
                hide_name = True
            ]

            junction Junction64 pe
            [
                position = 5992, 8216
            ]

            junction Junction66 pe
            [
                position = 6568, 8280
            ]

            junction Junction68 pe
            [
                position = 7088, 8336
            ]

            junction Junction134 pe
            [
                position = 8280, 8464
            ]

            junction Junction135 pe
            [
                position = 8392, 8464
            ]

            junction Junction139 sp
            [
                position = 6000, 8128
            ]

            junction Junction140 sp
            [
                position = 6120, 7840
            ]

            junction Junction142 pe
            [
                position = 6312, 8216
            ]

            junction Junction150 pe
            [
                position = 6880, 8280
            ]

            junction Junction151 pe
            [
                position = 8392, 8184
            ]

            junction Junction152 pe
            [
                position = 8280, 8280
            ]

            junction Junction153 pe
            [
                position = 8168, 8376
            ]

            junction Junction154 pe
            [
                position = 7424, 8336
            ]

            junction Junction155 pe
            [
                position = 8168, 8464
            ]

            junction Junction156 pe
            [
                position = 5992, 8464
            ]

            junction Junction157 pe
            [
                position = 6312, 8464
            ]

            junction Junction158 pe
            [
                position = 6432, 8464
            ]

            junction Junction159 pe
            [
                position = 6568, 8464
            ]

            junction Junction160 pe
            [
                position = 6880, 8464
            ]

            junction Junction161 pe
            [
                position = 6952, 8464
            ]

            junction Junction162 pe
            [
                position = 7088, 8464
            ]

            junction Junction163 pe
            [
                position = 7424, 8464
            ]

            connect Constant1.out "Signal switch2.in" as Connection360
            connect Constant2.out "Signal switch1.in" as Connection362
            connect MT_ON2 "Signal switch2.in2" as Connection366
            connect Ea_G Ea1.out as Connection295
            connect Eb_G Eb1.out as Connection296
            connect Ec_G Ec1.out as Connection297
            connect V_a1 Ea.in as Connection390
            connect V_b1 Eb.in as Connection391
            connect V_c1 Ec.in as Connection392
            connect Ea.p_node Junction64 as Connection468
            connect Junction64 Ra.p_node as Connection469
            connect Ea_phi.p_node Junction64 as Connection470
            connect Eb.p_node Junction66 as Connection474
            connect Junction66 Rb.p_node as Connection475
            connect Eb_phi.p_node Junction66 as Connection476
            connect Ec.p_node Junction68 as Connection480
            connect Junction68 Rc.p_node as Connection481
            connect Ec_phi.p_node Junction68 as Connection482
            connect V_q_a3 Va_G1.out as Connection720
            connect V_d_a3 Vb_G1.out as Connection721
            connect V_q_a4 Vc_G1.out as Connection806
            connect "Signal switch2.out" "qd0(PU).V_ref" as Connection1046
            connect "Signal switch1.out" "qd0(PU).w_ref" as Connection1047
            connect "Connect MT.out" CB_control.Close_GCB as Connection1050
            connect "Connect MCB.out" CB_control.Close_MCB as Connection1051
            connect "MCB Control" CB_control.MCB_control as Connection1052
            connect Connect2 "Logical operator2.in1" as Connection1055
            connect ref_ctrl.out "Logical operator2.in" as Connection1057
            connect Vb_G1.n_node Junction134 as Connection1194
            connect ground Junction135 as Connection1195
            connect Junction135 Junction134 as Connection1196
            connect Va_G1.n_node Junction135 as Connection1197
            connect I_a Ia1.out as Connection1201
            connect I_b Ib1.out as Connection1202
            connect I_c Ic1.out as Connection1203
            connect "Signal switch1.in2" Junction139 as Connection1228
            connect Junction139 MT_ON1 as Connection1229
            [
                breakpoints = 6000, 8120
            ]
            connect MTsync_PROBE.in Junction139 as Connection1230
            connect "Logical operator2.out" Junction140 as Connection1231
            connect Junction140 "qd0(PU).Reference control" as Connection1232
            connect ref_ctrl_PROBE.in Junction140 as Connection1233
            connect theta_bus5 "Signal switch1.in1" as Connection1234
            connect From1 "Signal switch2.in1" as Connection1235
            connect Ia1.n_node Junction142 as Connection1250
            connect Ea1.p_node Junction142 as Connection1252
            connect Ia1.p_node La.n_node as Connection1297
            connect La.p_node Ra.n_node as Connection1298
            connect Rb.n_node Lb.p_node as Connection1299
            connect Lb.n_node Ib1.p_node as Connection1300
            connect Rc.n_node Lc.p_node as Connection1301
            connect Lc.n_node Ic1.p_node as Connection1302
            connect Ib1.n_node Junction150 as Connection1308
            connect Eb1.p_node Junction150 as Connection1310
            connect RL.P5 S3.C1 as Connection1311
            connect RL.P1 S3.A1 as Connection1313
            connect RL.P3 S3.B1 as Connection1315
            connect S3.ctrl_in CB_control.CB_status as Connection1319
            connect V_aG Junction151 as Connection1320
            connect Junction151 Va_G1.p_node as Connection1321
            [
                breakpoints = 8392, 8184; 8392, 8184
            ]
            connect S3.A2 Junction151 as Connection1322
            [
                breakpoints = 8048, 8184
            ]
            connect V_bG Junction152 as Connection1323
            [
                breakpoints = 8392, 8280; 8392, 8280
            ]
            connect Junction152 Vb_G1.p_node as Connection1324
            [
                breakpoints = 8280, 8280; 8280, 8280
            ]
            connect S3.B2 Junction152 as Connection1325
            connect V_cG Junction153 as Connection1326
            [
                breakpoints = 8280, 8376
            ]
            connect Junction153 Vc_G1.p_node as Connection1327
            [
                breakpoints = 8168, 8376; 8168, 8376
            ]
            connect S3.C2 Junction153 as Connection1328
            connect Junction150 RL.P4 as Connection1329
            [
                breakpoints = 6880, 8280; 7552, 8280; 7552, 8280
            ]
            connect RL.P2 Junction142 as Connection1330
            [
                breakpoints = 7632, 8216; 7520, 8216; 7520, 8216; 7480, 8216; 7480, 8216
            ]
            connect Ic1.n_node Junction154 as Connection1334
            connect Junction154 Ec1.p_node as Connection1335
            [
                breakpoints = 7424, 8336; 7424, 8336
            ]
            connect RL.P6 Junction154 as Connection1336
            [
                breakpoints = 7632, 8336; 7480, 8336; 7480, 8336
            ]
            connect Vc_G1.n_node Junction155 as Connection1344
            connect Junction155 Junction134 as Connection1345
            [
                breakpoints = 8168, 8464
            ]
            connect Ea_phi.n_node Junction156 as Connection1347
            connect Ea.n_node Junction156 as Connection1349
            connect Junction156 Junction157 as Connection1350
            connect Ea1.n_node Junction157 as Connection1352
            connect Junction157 Junction158 as Connection1353
            connect Eb_phi.n_node Junction158 as Connection1355
            connect Junction158 Junction159 as Connection1356
            connect Eb.n_node Junction159 as Connection1358
            connect Junction159 Junction160 as Connection1359
            connect Eb1.n_node Junction160 as Connection1361
            connect Junction160 Junction161 as Connection1362
            connect Ec_phi.n_node Junction161 as Connection1364
            connect Junction161 Junction162 as Connection1365
            connect Ec.n_node Junction162 as Connection1367
            connect Junction162 Junction163 as Connection1368
            connect Junction163 Junction155 as Connection1369
            connect Ec1.n_node Junction163 as Connection1370

            T_R = "1e-1"
            V_fall = "-5"
            V_rise = "5"
            maxw_slip = "0.5e-3"
            minw_slip = "0.1e-3"

            mask {
                description = "<html><head><meta name=\"qrichtext\" content=\"1\"></meta><style type=\"text/css\">p, li { white-space: pre-wrap; }</style></head><body style=\"\"><p style=\"margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\">A salient-pole synchronous machine with DEGOV1 governor and IEEE type DC1A exciter, powered by a diesel genset</p></body></html>"

                S {
                    label = "Rated Power (system)"
                    widget = edit
                    type = generic
                    default_value = "3.5e+6"
                    unit = "VA"
                    group = "1. Synchronous Machine"
                }

                V_ABC {
                    label = "Rated RMS Voltage (genset)"
                    widget = edit
                    type = generic
                    default_value = "13800/np.sqrt(3)"
                    unit = "V"
                    group = "1. Synchronous Machine"
                }

                w_0 {
                    label = "Nominal Frequency"
                    widget = edit
                    type = generic
                    default_value = "2*np.pi*60"
                    unit = "rad/s"
                    group = "1. Synchronous Machine"
                }

                pms {
                    label = "Pole-pairs"
                    widget = edit
                    type = generic
                    default_value = "2"
                    group = "1. Synchronous Machine"
                }

                Jm {
                    label = "Moment of Inertia"
                    widget = edit
                    type = generic
                    default_value = "68.32425"
                    unit = "kg.m^2"
                    group = "1. Synchronous Machine"
                }

                Fc {
                    label = "Friction Coefficient"
                    widget = edit
                    type = generic
                    default_value = "0.5720"
                    unit = "N.m.s"
                    group = "1. Synchronous Machine"
                }

                Ts {
                    label = "Execution rate"
                    widget = edit
                    type = generic
                    default_value = "Ts"
                    unit = "s"
                    group = "1. Synchronous Machine"
                }

                R_g {
                    label = "Resistance"
                    widget = edit
                    type = generic
                    default_value = "0.35"
                    unit = "/mile"
                    group = "2. Electrical Line"
                }

                L_g {
                    label = "Inductance"
                    widget = edit
                    type = generic
                    default_value = "1.5e-3"
                    unit = "H/mile"
                    group = "2. Electrical Line"
                }

                line_len {
                    label = "Length"
                    widget = edit
                    type = generic
                    default_value = "1"
                    unit = "miles"
                    group = "2. Electrical Line"
                }

                Rs {
                    label = "Armature Resistance"
                    widget = edit
                    type = generic
                    default_value = "0.4886"
                    unit = ""
                    group = "3. Windings"
                }

                Lls {
                    label = "Armature Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0072"
                    unit = "H"
                    group = "3. Windings"
                }

                Rf {
                    label = "Field Resistance"
                    widget = edit
                    type = generic
                    default_value = "0.1121"
                    unit = ""
                    group = "3. Windings"
                }

                Llfd {
                    label = "Field Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0738"
                    unit = "H"
                    group = "3. Windings"
                }

                Rkq {
                    label = "Damper q Resistance"
                    widget = edit
                    type = generic
                    default_value = "1.3848"
                    unit = ""
                    group = "3. Windings"
                }

                Llkq {
                    label = "Damper q Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.0345"
                    unit = "H"
                    group = "3. Windings"
                }

                Rkd {
                    label = "Damper d Resistance"
                    widget = edit
                    type = generic
                    default_value = "15.3767"
                    unit = ""
                    group = "3. Windings"
                }

                Llkd {
                    label = "Damper d Leakage Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.5395"
                    unit = "H"
                    group = "3. Windings"
                }

                Lmq {
                    label = "q Mutual Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.2482"
                    unit = "H"
                    group = "3. Windings"
                }

                Lmd {
                    label = "d Mutual Inductance"
                    widget = edit
                    type = generic
                    default_value = "0.3392"
                    unit = "H"
                    group = "3. Windings"
                }

                gov_Kp {
                    label = "Governor gain (gov_Kp)"
                    widget = edit
                    type = generic
                    default_value = "0.75"
                    group = "4. Governor and Engine"
                }

                K {
                    label = "Governor gain (K)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    group = "4. Governor and Engine"
                }

                R_D {
                    label = "Governor Droop"
                    widget = edit
                    type = generic
                    default_value = "0.05"
                    group = "4. Governor and Engine"
                }

                T_CH {
                    label = "Engine time constant"
                    widget = edit
                    type = generic
                    default_value = "24e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T1 {
                    label = "Time constant 1"
                    widget = edit
                    type = generic
                    default_value = "1e-4"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T2 {
                    label = "Time constant 2"
                    widget = edit
                    type = generic
                    default_value = "0"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T3 {
                    label = "Time constant 3"
                    widget = edit
                    type = generic
                    default_value = "5e-1"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T4 {
                    label = "Time constant 4"
                    widget = edit
                    type = generic
                    default_value = "25e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T5 {
                    label = "Time constant 5"
                    widget = edit
                    type = generic
                    default_value = "9e-4"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                T6 {
                    label = "Time constant 6"
                    widget = edit
                    type = generic
                    default_value = "5.74e-3"
                    unit = "s"
                    group = "4. Governor and Engine"
                }

                K_A {
                    label = "Gain 1 (K_A)"
                    widget = edit
                    type = generic
                    default_value = "20"
                    group = "5. Exciter and Voltage Regulator"
                }

                K_E {
                    label = "Gain 2 (K_E)"
                    widget = edit
                    type = generic
                    default_value = "1"
                    group = "5. Exciter and Voltage Regulator"
                }

                K_F {
                    label = "Gain 3 (K_F)"
                    widget = edit
                    type = generic
                    default_value = "0"
                    group = "5. Exciter and Voltage Regulator"
                }

                S_E {
                    label = "Gain 4 (S_E)"
                    widget = edit
                    type = generic
                    default_value = "0"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_R_max {
                    label = "Saturation upper limit"
                    widget = edit
                    type = generic
                    default_value = "5"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_R_min {
                    label = "Saturation lower limit"
                    widget = edit
                    type = generic
                    default_value = "-5"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_A {
                    label = "Time constant 1 (T_A)"
                    widget = edit
                    type = generic
                    default_value = "2e-3"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_E {
                    label = "Time constant 2 (T_E)"
                    widget = edit
                    type = generic
                    default_value = "1e-3"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_F {
                    label = "Time constant 3 (T_F)"
                    widget = edit
                    type = generic
                    default_value = "1e-3"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                T_R {
                    label = "Time constant 4 (T_R)"
                    widget = edit
                    type = generic
                    default_value = "1e-3"
                    unit = "s"
                    group = "5. Exciter and Voltage Regulator"
                }

                inner_w_rise {
                    label = "Governor (inner_w_rise)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    unit = "pu/s"
                    group = "4. Governor and Engine"
                }

                inner_w_fall {
                    label = "Governor (inner_w_fall)"
                    widget = edit
                    type = generic
                    default_value = "-10"
                    unit = "pu/s"
                    group = "4. Governor and Engine"
                }

                V_rise {
                    label = "Exciter (V_rise)"
                    widget = edit
                    type = generic
                    default_value = "10"
                    unit = "pu/s"
                    group = "5. Exciter and Voltage Regulator"
                }

                V_fall {
                    label = "Exciter (V_fall)"
                    widget = edit
                    type = generic
                    default_value = "-10"
                    unit = "pu/s"
                    group = "5. Exciter and Voltage Regulator"
                }

                exc_Kp {
                    label = "Exciter proportional gain"
                    widget = edit
                    type = generic
                    default_value = "1.16"
                    group = "5. Exciter and Voltage Regulator"
                }

                exc_Ki {
                    label = "Exciter integral gain"
                    widget = edit
                    type = generic
                    default_value = "1.19"
                    group = "5. Exciter and Voltage Regulator"
                }

                maxV_slip {
                    label = "Maximum slip (voltage)"
                    widget = edit
                    type = generic
                    default_value = "1e-3"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                minV_slip {
                    label = "Minimum slip (voltage)"
                    widget = edit
                    type = generic
                    default_value = "0.5e-3"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                maxw_slip {
                    label = "Maximum slip (frequency)"
                    widget = edit
                    type = generic
                    default_value = "1e-3"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                minw_slip {
                    label = "Minimum slip (frequency)"
                    widget = edit
                    type = generic
                    default_value = "0.5e-3"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                maxV_pds {
                    label = "Maximum difference signal (voltage)"
                    widget = edit
                    type = generic
                    default_value = "0.5e-1"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                maxw_pds {
                    label = "Maximum difference signal (frequency)"
                    widget = edit
                    type = generic
                    default_value = "0.5e-1"
                    unit = "pu"
                    group = "6. Automatic Synchronizer"
                }

                Kp_PLL {
                    label = "Proportional gain"
                    widget = edit
                    type = generic
                    default_value = "5"
                    group = "7. Phase Locked Loop"
                }

                Ki_PLL {
                    label = "Integral gain"
                    widget = edit
                    type = generic
                    default_value = "2"
                    group = "7. Phase Locked Loop"
                }

                PLL_max {
                    label = "Saturation upper limit"
                    widget = edit
                    type = generic
                    default_value = "2*np.pi*63"
                    group = "7. Phase Locked Loop"
                }

                PLL_min {
                    label = "Saturation lower limit"
                    widget = edit
                    type = generic
                    default_value = "2*np.pi*57"
                    group = "7. Phase Locked Loop"
                }

                CODE open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE

                CODE init
                    S = mdl.get_property_value(mdl.prop(item_handle, "S"))
                    V_ABC = mdl.get_property_value(mdl.prop(item_handle, "V_ABC"))
                    w_0 = mdl.get_property_value(mdl.prop(item_handle, "w_0"))
                    pms = mdl.get_property_value(mdl.prop(item_handle, "pms"))
                    Jm = mdl.get_property_value(mdl.prop(item_handle, "Jm"))
                    Fc = mdl.get_property_value(mdl.prop(item_handle, "Fc"))
                    Ts = mdl.get_property_value(mdl.prop(item_handle, "Ts"))
                    R_g = mdl.get_property_value(mdl.prop(item_handle, "R_g"))
                    L_g = mdl.get_property_value(mdl.prop(item_handle, "L_g"))
                    line_len = mdl.get_property_value(mdl.prop(item_handle, "line_len"))
                    Rs = mdl.get_property_value(mdl.prop(item_handle, "Rs"))
                    Lls = mdl.get_property_value(mdl.prop(item_handle, "Lls"))
                    Rf = mdl.get_property_value(mdl.prop(item_handle, "Rf"))
                    Llfd = mdl.get_property_value(mdl.prop(item_handle, "Llfd"))
                    Rkq = mdl.get_property_value(mdl.prop(item_handle, "Rkq"))
                    Llkq = mdl.get_property_value(mdl.prop(item_handle, "Llkq"))
                    Rkd = mdl.get_property_value(mdl.prop(item_handle, "Rkd"))
                    Llkd = mdl.get_property_value(mdl.prop(item_handle, "Llkd"))
                    Lmq = mdl.get_property_value(mdl.prop(item_handle, "Lmq"))
                    Lmd = mdl.get_property_value(mdl.prop(item_handle, "Lmd"))
                    gov_Kp = mdl.get_property_value(mdl.prop(item_handle, "gov_Kp"))
                    K = mdl.get_property_value(mdl.prop(item_handle, "K"))
                    R_D = mdl.get_property_value(mdl.prop(item_handle, "R_D"))
                    T_CH = mdl.get_property_value(mdl.prop(item_handle, "T_CH"))
                    T1 = mdl.get_property_value(mdl.prop(item_handle, "T1"))
                    T2 = mdl.get_property_value(mdl.prop(item_handle, "T2"))
                    T3 = mdl.get_property_value(mdl.prop(item_handle, "T3"))
                    T4 = mdl.get_property_value(mdl.prop(item_handle, "T4"))
                    T5 = mdl.get_property_value(mdl.prop(item_handle, "T5"))
                    T6 = mdl.get_property_value(mdl.prop(item_handle, "T6"))
                    K_A = mdl.get_property_value(mdl.prop(item_handle, "K_A"))
                    K_E = mdl.get_property_value(mdl.prop(item_handle, "K_E"))
                    K_F = mdl.get_property_value(mdl.prop(item_handle, "K_F"))
                    S_E = mdl.get_property_value(mdl.prop(item_handle, "S_E"))
                    V_R_max = mdl.get_property_value(mdl.prop(item_handle, "V_R_max"))
                    V_R_min = mdl.get_property_value(mdl.prop(item_handle, "V_R_min"))
                    T_A = mdl.get_property_value(mdl.prop(item_handle, "T_A"))
                    T_E = mdl.get_property_value(mdl.prop(item_handle, "T_E"))
                    T_F = mdl.get_property_value(mdl.prop(item_handle, "T_F"))
                    T_R = mdl.get_property_value(mdl.prop(item_handle, "T_R"))
                    inner_w_rise = mdl.get_property_value(mdl.prop(item_handle, "inner_w_rise"))
                    inner_w_fall = mdl.get_property_value(mdl.prop(item_handle, "inner_w_fall"))
                    V_rise = mdl.get_property_value(mdl.prop(item_handle, "V_rise"))
                    V_fall = mdl.get_property_value(mdl.prop(item_handle, "V_fall"))
                    exc_Kp = mdl.get_property_value(mdl.prop(item_handle, "exc_Kp"))
                    exc_Ki = mdl.get_property_value(mdl.prop(item_handle, "exc_Ki"))
                    maxV_slip = mdl.get_property_value(mdl.prop(item_handle, "maxV_slip"))
                    minV_slip = mdl.get_property_value(mdl.prop(item_handle, "minV_slip"))
                    maxw_slip = mdl.get_property_value(mdl.prop(item_handle, "maxw_slip"))
                    minw_slip = mdl.get_property_value(mdl.prop(item_handle, "minw_slip"))
                    maxV_pds = mdl.get_property_value(mdl.prop(item_handle, "maxV_pds"))
                    maxw_pds = mdl.get_property_value(mdl.prop(item_handle, "maxw_pds"))
                    Kp_PLL = mdl.get_property_value(mdl.prop(item_handle, "Kp_PLL"))
                    Ki_PLL = mdl.get_property_value(mdl.prop(item_handle, "Ki_PLL"))
                    PLL_max = mdl.get_property_value(mdl.prop(item_handle, "PLL_max"))
                    PLL_min = mdl.get_property_value(mdl.prop(item_handle, "PLL_min"))
                    
                    w_m = w_0/pms
                    
                    V_DQ = V_ABC*np.sqrt(2)
                    T_nom = S/w_m
                    I_DQ = (2*S)/(3*V_DQ)
                    Z_DQ = V_DQ/I_DQ
                    L_DQ = Z_DQ/w_0
                    sq_Z = (R_g/Z_DQ)**2+(L_g/L_DQ)**2
                    
                    X_q = w_0*(Lls+Lmq)/Z_DQ
                    X_d = w_0*(Lls+Lmd)/Z_DQ
                    X_ls = w_0*Lls/Z_DQ
                    X_lfd = w_0*Llfd/Z_DQ
                    X_lkd = w_0*Llkd/Z_DQ
                    X_lkq = w_0*Llkq/Z_DQ
                    X_md = w_0*Lmd/Z_DQ
                    X_mq = w_0*Lmq/Z_DQ
                    X_fd = w_0*(Llfd+Lmd)/Z_DQ
                    X_kd = w_0*(Llkd+Lmd)/Z_DQ
                    X_kq = w_0*(Llkq+Lmq)/Z_DQ
                    R_fd = Rf/Z_DQ
                    R_kd = Rkd/Z_DQ
                    R_kq = Rkq/Z_DQ
                    R_s = Rs/Z_DQ
                    
                    L_DQ = Z_DQ/w_0
                    C_DQ = 1/(Z_DQ*w_0)
                    
                    R_G = R_g/Z_DQ
                    X_G = L_g/L_DQ
                    
                    H = 0.5*Jm*(w_0*(2/pms))**2/S
                    D_FW = Fc*(w_m/T_nom)
                    
                    X_dp = X_d - (X_md**2/X_fd)
                    X_qp = X_q
                    T_dop = X_fd/(w_0*R_fd)
                    T_qop = 0
                    
                    X_dpp = X_ls + (X_md*(X_lkd*X_lfd/(X_lkd+X_lfd)))/(X_md+(X_lkd*X_lfd/(X_lkd+X_lfd)))
                    X_qpp = X_ls + (X_mq*X_lkq/(X_mq+X_lkq))
                    T_dopp = (1/(w_0*R_kd))*(X_lkd+(X_md*X_lfd/(X_md+X_lfd)))
                    T_qopp = (1/(w_0*R_kq))*X_kq
                ENDCODE

                CODE define_icon
                    mdl.set_component_icon_image(item_handle, 'diesel_genset_image.jpg')
                    mdl.set_color(item_handle, "black")
                ENDCODE
            }
        }
        [
            position = 6592, 8104
            size = 200, 96
        ]

        tag V_d_a {
            value = "VbG"
            scope = masked_subsystem
            kind = sp
            direction = out
        }
        [
            position = 7776, 8112
            hide_name = True
            scale = -1, 1
        ]

        tag V_q_a {
            value = "VaG"
            scope = masked_subsystem
            kind = sp
            direction = out
        }
        [
            position = 7880, 8064
            hide_name = True
            scale = -1, 1
        ]

        tag V_d_a2 {
            value = "VcG"
            scope = masked_subsystem
            kind = sp
            direction = out
        }
        [
            position = 7672, 8160
            hide_name = True
            scale = -1, 1
        ]

        tag V_d_a1 {
            value = "VbG"
            scope = masked_subsystem
            kind = sp
            direction = in
        }
        [
            position = 7512, 8112
            hide_name = True
        ]

        tag V_q_a1 {
            value = "VaG"
            scope = masked_subsystem
            kind = sp
            direction = in
        }
        [
            position = 7512, 8064
            hide_name = True
        ]

        tag V_q_a2 {
            value = "VcG"
            scope = masked_subsystem
            kind = sp
            direction = in
        }
        [
            position = 7512, 8160
            hide_name = True
        ]

        tag MT_state {
            value = "MTsync_state"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 6912, 7880
            hide_name = True
            scale = -1, 1
            size = 78, 20
        ]

        junction Junction61 pe
        [
            position = 7816, 8296
        ]

        junction Junction63 pe
        [
            position = 7608, 8296
        ]

        junction Junction64 pe
        [
            position = 7712, 8296
        ]

        junction Junction110 sp
        [
            position = 6976, 7880
        ]

        junction Junction111 sp
        [
            position = 6976, 7792
        ]

        junction Junction112 sp
        [
            position = 6976, 7792
        ]

        junction Junction121 pe
        [
            position = 7816, 7920
        ]

        junction Junction122 pe
        [
            position = 7816, 8296
        ]

        junction Junction123 pe
        [
            position = 6800, 7960
        ]

        junction Junction124 pe
        [
            position = 6832, 7976
        ]

        junction Junction125 pe
        [
            position = 6864, 7992
        ]

        junction Junction126 pe
        [
            position = 6832, 8296
        ]

        connect V_q_a Va_G.in as Connection312
        connect V_d_a Vb_G.in as Connection313
        connect V_d_a2 Vc_G.in as Connection314
        connect RL.P3 Vb_G.p_node as Connection509
        connect RL.P5 Vc_G.p_node as Connection538
        [
            breakpoints = 7544, 8000; 7544, 8032; 7608, 8032
        ]
        connect V_q_a1 Gain3.out as Connection315
        connect "Sinusoidal Source1.out" Gain3.in as Connection328
        connect Gain4.in "Sinusoidal Source3.out" as Connection789
        connect "Sinusoidal Source2.out" Gain5.in as Connection790
        connect Gain5.out V_d_a1 as Connection791
        connect Gain4.out V_q_a2 as Connection792
        connect Va_G.n_node Junction61 as Connection818
        connect gnd1.node Junction61 as Connection820
        connect Vc_G.n_node Junction63 as Connection826
        connect Junction64 Junction63 as Connection828
        connect Vb_G.n_node Junction64 as Connection829
        connect "Constant Impedance Load1.A" Ia1.n_node as Connection834
        connect S2.b_out RL.P4 as Connection963
        connect S2.c_out RL.P6 as Connection970
        [
            breakpoints = 7160, 7992; 7256, 7992
        ]
        connect RL.P2 S2.a_out as Connection971
        connect "grid_connect OFF.in" Junction110 as Connection982
        connect Junction110 "Logical operator1.out" as Connection983
        connect MT_state Junction110 as Connection984
        connect S2.ctrl_in Junction111 as Connection986
        connect Junction111 grid_connect.out as Connection987
        connect "grid_connect ON.in" Junction112 as Connection989
        connect Junction112 Junction111 as Connection990
        connect "Logical operator1.in" Junction112 as Connection991
        connect RL.P1 Junction121 as Connection1027
        [
            breakpoints = 7544, 7960; 7544, 7920
        ]
        connect Junction121 Va_G.p_node as Connection1028
        [
            breakpoints = 7816, 7920
        ]
        connect Va1.p_node Junction121 as Connection1029
        connect Junction61 Junction122 as Connection1030
        connect Junction122 Junction64 as Connection1031
        [
            breakpoints = 7744, 8296
        ]
        connect Va1.n_node Junction122 as Connection1032
        connect "Microturbine.MCB Control" Termination1.in as Connection1054
        connect S2.a_in Junction123 as Connection1055
        [
            breakpoints = 7064, 7880; 7064, 7960
        ]
        connect Junction123 Ia1.p_node as Connection1056
        [
            breakpoints = 6800, 7960; 6800, 7960; 6800, 7960; 6800, 7960
        ]
        connect Microturbine.V_aG Junction123 as Connection1057
        connect S2.b_in Junction124 as Connection1058
        connect Junction124 "Constant Impedance Load1.B" as Connection1059
        [
            breakpoints = 6832, 7976; 6832, 7976; 6832, 7976; 6832, 7976; 6832, 7976
        ]
        connect Microturbine.V_bG Junction124 as Connection1060
        connect "Constant Impedance Load1.C" Junction125 as Connection1061
        connect Junction125 S2.c_in as Connection1062
        [
            breakpoints = 6864, 7992; 6864, 7992; 7064, 7992
        ]
        connect Microturbine.V_cG Junction125 as Connection1063
        connect "Constant Impedance Load1.N" Junction126 as Connection1064
        connect Junction126 Junction63 as Connection1065
        [
            breakpoints = 6832, 8296; 6832, 8296; 6832, 8296; 7608, 8296; 7608, 8296
        ]
        connect Microturbine.ground Junction126 as Connection1066
    }

    logically_deleted {
        "Microturbine.qd0(PU).Constant3"
        "Microturbine.BE1-25A Synchronizer.BE1-25A Synchronizer (modified)"
    }

    default {
        gen_PQ_transform {
            filter_order = "first order"
            filter_cutoff_Hz = "30"
            initial_filter_input = "0"
            initial_filter_output = "0"
            enable_inst_ports = "True"
            enable_zero_ports = "False"
            execution_rate = "inherit"
        }

        gen_abs {
            execution_rate = "inherit"
        }

        gen_c_function {
            in_terminal_properties = "real in;"
            in_terminal_labels = ""
            out_terminal_properties = "real out;"
            out_terminal_labels = ""
            no_feed_inputs = ""
            no_feed_outputs = ""
            in_terminal_dimensions = ""
            in_terminal_dimensions_str = ""
            out_terminal_dimensions = ""
            out_terminal_dimensions_str = ""
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            execution_rate = "inherit"
        }

        gen_comparator {
            execution_rate = "inherit"
        }

        gen_digital_probe {
            override_signal_name = "False"
            signal_name = ""
            streaming_en = "False"
            addr = "0"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        gen_gain {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            execution_rate = "inherit"
        }

        gen_integrator {
            show_reset = "none"
            reset_type = "asynchronous"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }

        gen_limiter {
            upper_limit = "[\'inf\']"
            lower_limit = "[\'-inf\']"
            execution_rate = "inherit"
        }

        gen_logic_op {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }

        gen_math_fnc {
            mathematical_fn = "exponential"
            execution_rate = "inherit"
        }

        gen_pid_controller {
            controller_type = "PID"
            kp = "1"
            kp_source = "internal"
            ki = "1"
            ki_source = "internal"
            kd = "0"
            kd_source = "internal"
            filt_coef = "100"
            int_init_value = "0"
            filt_init_value = "0"
            enb_output_limit_out = "False"
            upper_sat_lim = "1"
            lower_sat_lim = "-1"
            enb_anti_windup_out = "False"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        gen_probe {
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            streaming_en = "False"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        gen_product {
            signs = "2"
            execution_rate = "inherit"
        }

        gen_rate_limiter {
            rising_limit = "1"
            falling_limit = "-1"
            execution_rate = "inherit"
        }

        gen_rel_op {
            relational_op = "=="
            execution_rate = "inherit"
        }

        gen_sum {
            signs = "2"
            execution_rate = "inherit"
        }

        gen_terminator {
            execution_rate = "inherit"
        }

        gen_trigonometric {
            trigonometric_fn = "sin"
            execution_rate = "inherit"
        }

        gen_z_domain_transfer {
            domain = "Z-domain"
            method = "Zero-order hold"
            b_coeff = "[1]"
            a_coeff = "[1,-1]"
            init_states = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        pas_inductor {
            inductance = "1e-3"
            initial_current = "0.0"
            pole_shift_ignore = "False"
            visible = "True"
        }

        pas_resistor {
            resistance = "1"
        }

        src_clock {
            execution_rate = "100e-6"
        }

        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }

        src_scada_input {
            addr = "0"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }

        src_sine {
            amplitude = "1"
            dc_offset = "0"
            frequency = "50"
            phase = "0"
            execution_rate = "100e-6"
        }

        sys_signal_switch {
            criterion = "ctrl >= threshold"
            threshold = "0"
            execution_rate = "inherit"
        }

        tm_delay {
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        "core/Constant Impedance Load" {
            fn = "60"
            conn_type = "Y"
            enable_neutral = "False"
            set_balanced = "True"
            Vn_3ph = "480"
            Sn_3ph = "1.0e6"
            pf_mode_3ph = "Unit"
            pf_3ph = "0.9"
            VAn = "480/(3**0.5)"
            VAB = "480"
            SAn = "1.0e6/3"
            SAB = "1.0e6/3"
            pf_modeA = "Unit"
            pfA = "0.9"
            VBn = "480/(3**0.5)"
            VBC = "480"
            SBn = "1.0e6/3"
            SBC = "1.0e6/3"
            pf_modeB = "Unit"
            pfB = "0.9"
            VCn = "480/(3**0.5)"
            VCA = "480"
            SCn = "1.0e6/3"
            SCA = "1.0e6/3"
            pf_modeC = "Unit"
            pfC = "0.9"
        }

        "core/Current Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/RL Section" {
            model_def = "R-L"
            unit_sys = "imperial"
            num_of_phases = "3"
            resistance_per_l = "1"
            resistance_per_l_mile = "1"
            inductance_per_l = "1e-3"
            inductance_per_l_mile = "1e-3"
            length = "1.0"
            length_mile = "1.0"
            power = "500.0"
            voltage = "11.0"
            frequency = "50.0"
            R_value = "21.55"
            L_value = "0.00842"
        }

        "core/Signal Controlled Voltage Source" {
            execution_rate = "inherit"
        }

        "core/Three Phase Non-Ideal Contactor" {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            switching = "zero current"
            execution_rate = "inherit"
            resistance = "1.0"
        }

        "core/Triple Pole Single Throw Contactor" {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            enable_fb_out = "False"
            fb_out_type = "real"
            execution_rate = "inherit"
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
        }

        "core/Voltage Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/abc to dq" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            disable_filter = "True"
            initial_filter_output = "0"
            wn_LPFdq = "1000"
            execution_rate = "inherit"
        }

        "core/dq to abc" {
            power_form = "variant - Clarke\'s original"
            alignment = "-pi/2"
            execution_rate = "0"
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        # The Schematic API is imported as 'mdl'
        # To get the model file path, use 'mdl.get_model_file_path()'
        # To print information to the console, use info()
        
        V_G = 13800
        Ts = 10e-6
    ENDCODE
}
